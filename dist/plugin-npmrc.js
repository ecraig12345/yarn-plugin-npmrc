/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-npmrc",
factory: function (require) {
"use strict";var plugin=(()=>{var No=Object.create;var te=Object.defineProperty;var Mo=Object.getOwnPropertyDescriptor;var $o=Object.getOwnPropertyNames;var Fo=Object.getPrototypeOf,Lo=Object.prototype.hasOwnProperty;var A=(i=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(i,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):i)(function(i){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+i+'" is not supported')});var di=(i,t)=>()=>(i&&(t=i(i=0)),t);var v=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),Ve=(i,t)=>{for(var e in t)te(i,e,{get:t[e],enumerable:!0})},pi=(i,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of $o(t))!Lo.call(i,n)&&n!==e&&te(i,n,{get:()=>t[n],enumerable:!(s=Mo(t,n))||s.enumerable});return i};var ee=(i,t,e)=>(e=i!=null?No(Fo(i)):{},pi(t||!i||!i.__esModule?te(e,"default",{value:i,enumerable:!0}):e,i)),Io=i=>pi(te({},"__esModule",{value:!0}),i);var mi=v(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.walkUp=void 0;var gi=A("path"),Wo=function*(i){for(i=(0,gi.resolve)(i);i;){yield i;let t=(0,gi.dirname)(i);if(t===i)break;i=t}};se.walkUp=Wo});var Ei=v((Rl,Si)=>{var{hasOwnProperty:Je}=Object.prototype,Ye=(i,t={})=>{typeof t=="string"&&(t={section:t}),t.align=t.align===!0,t.newline=t.newline===!0,t.sort=t.sort===!0,t.whitespace=t.whitespace===!0||t.align===!0,t.platform=t.platform||typeof process<"u"&&process.platform,t.bracketedArray=t.bracketedArray!==!1;let e=t.platform==="win32"?`\r
`:`
`,s=t.whitespace?" = ":"=",n=[],r=t.sort?Object.keys(i).sort():Object.keys(i),o=0;t.align&&(o=tt(r.filter(c=>i[c]===null||Array.isArray(i[c])||typeof i[c]!="object").map(c=>Array.isArray(i[c])?`${c}[]`:c).concat([""]).reduce((c,l)=>tt(c).length>=tt(l).length?c:l)).length);let a="",h=t.bracketedArray?"[]":"";for(let c of r){let l=i[c];if(l&&Array.isArray(l))for(let f of l)a+=tt(`${c}${h}`).padEnd(o," ")+s+tt(f)+e;else l&&typeof l=="object"?n.push(c):a+=tt(c).padEnd(o," ")+s+tt(l)+e}t.section&&a.length&&(a="["+tt(t.section)+"]"+(t.newline?e+e:e)+a);for(let c of n){let l=yi(c,".").join("\\."),f=(t.section?t.section+".":"")+l,d=Ye(i[c],{...t,section:f});a.length&&d.length&&(a+=e),a+=d}return a};function yi(i,t){var e=0,s=0,n=0,r=[];do if(n=i.indexOf(t,e),n!==-1){if(e=n+t.length,n>0&&i[n-1]==="\\")continue;r.push(i.slice(s,n)),s=n+t.length}while(n!==-1);return r.push(i.slice(s)),r}var wi=(i,t={})=>{t.bracketedArray=t.bracketedArray!==!1;let e=Object.create(null),s=e,n=null,r=/^\[([^\]]*)\]\s*$|^([^=]+)(=(.*))?$/i,o=i.split(/[\r\n]+/g),a={};for(let c of o){if(!c||c.match(/^\s*[;#]/)||c.match(/^\s*$/))continue;let l=c.match(r);if(!l)continue;if(l[1]!==void 0){if(n=ie(l[1]),n==="__proto__"){s=Object.create(null);continue}s=e[n]=e[n]||Object.create(null);continue}let f=ie(l[2]),d;t.bracketedArray?d=f.length>2&&f.slice(-2)==="[]":(a[f]=(a?.[f]||0)+1,d=a[f]>1);let u=d&&f.endsWith("[]")?f.slice(0,-2):f;if(u==="__proto__")continue;let m=l[3]?ie(l[4]):!0,p=m==="true"||m==="false"||m==="null"?JSON.parse(m):m;d&&(Je.call(s,u)?Array.isArray(s[u])||(s[u]=[s[u]]):s[u]=[]),Array.isArray(s[u])?s[u].push(p):s[u]=p}let h=[];for(let c of Object.keys(e)){if(!Je.call(e,c)||typeof e[c]!="object"||Array.isArray(e[c]))continue;let l=yi(c,".");s=e;let f=l.pop(),d=f.replace(/\\\./g,".");for(let u of l)u!=="__proto__"&&((!Je.call(s,u)||typeof s[u]!="object")&&(s[u]=Object.create(null)),s=s[u]);s===e&&d===f||(s[d]=e[c],h.push(c))}for(let c of h)delete e[c];return e},bi=i=>i.startsWith('"')&&i.endsWith('"')||i.startsWith("'")&&i.endsWith("'"),tt=i=>typeof i!="string"||i.match(/[=\r\n]/)||i.match(/^\[/)||i.length>1&&bi(i)||i!==i.trim()?JSON.stringify(i):i.split(";").join("\\;").split("#").join("\\#"),ie=i=>{if(i=(i||"").trim(),bi(i)){i.charAt(0)==="'"&&(i=i.slice(1,-1));try{i=JSON.parse(i)}catch{}}else{let t=!1,e="";for(let s=0,n=i.length;s<n;s++){let r=i.charAt(s);if(t)"\\;#".indexOf(r)!==-1?e+=r:e+="\\"+r,t=!1;else{if(";#".indexOf(r)!==-1)break;r==="\\"?t=!0:e+=r}}return t&&(e+="\\"),e.trim()}return i};Si.exports={parse:wi,decode:wi,stringify:Ye,encode:Ye,safe:tt,unsafe:ie}});var _i=v((Nl,vi)=>{vi.exports=Bo;function Bo(...i){let t=i;i.length===1&&(Array.isArray(i[0])||typeof i[0]=="string")&&(t=[].concat(i[0]));for(let n=0,r=t.length;n<r;n++)t[n]=typeof t[n]=="string"?t[n]:String(t[n]);t=t.sort(qo);let e={},s="";for(let n=0,r=t.length;n<r;n++){let o=t[n],a=t[n+1]||"",h=!0,c=!0;if(o===a)continue;let l=0,f=o.length;for(;l<f;l++){let d=o.charAt(l);if(h=h&&d===a.charAt(l),c=c&&d===s.charAt(l),!h&&!c){l++;break}}if(s=o,l===f){e[o]=o;continue}for(let d=o.slice(0,l);l<=f;l++)e[d]=o,d+=o.charAt(l)}return e}function qo(i,t){return i===t?0:i>t?1:-1}});var Xe=v((Ml,xi)=>{xi.exports=process.env.DEBUG_NOPT||process.env.NOPT_DEBUG?(...i)=>console.error(...i):()=>{}});var Qe=v(($l,Ti)=>{var Oi=A("url"),Ze=A("path"),Ai=A("stream").Stream,Uo=A("os"),ki=Xe();function zo(i,t,e){i[t]=String(e)}function Go(i,t,e){if(e===!0)return!1;if(e===null)return!0;e=String(e);let n=process.platform==="win32"?/^~(\/|\\)/:/^~\//,r=Uo.homedir();return r&&e.match(n)?i[t]=Ze.resolve(r,e.slice(2)):i[t]=Ze.resolve(e),!0}function Ho(i,t,e){if(ki("validate Number %j %j %j",t,e,isNaN(e)),isNaN(e))return!1;i[t]=+e}function Ko(i,t,e){let s=Date.parse(e);if(ki("validate Date %j %j %j",t,e,s),isNaN(s))return!1;i[t]=new Date(e)}function Vo(i,t,e){typeof e=="string"?isNaN(e)?e==="null"||e==="false"?e=!1:e=!0:e=!!+e:e=!!e,i[t]=e}function Jo(i,t,e){if(e=Oi.parse(String(e)),!e.host)return!1;i[t]=e.href}function Yo(i,t,e){if(!(e instanceof Ai))return!1;i[t]=e}Ti.exports={String:{type:String,validate:zo},Boolean:{type:Boolean,validate:Vo},url:{type:Oi,validate:Jo},Number:{type:Number,validate:Ho},path:{type:Ze,validate:Go},Stream:{type:Ai,validate:Yo},Date:{type:Date,validate:Ko},Array:{type:Array}}});var $i=v((Fl,Mi)=>{var ne=_i(),P=Xe(),Xo=Qe(),Pi=(i,t)=>Object.prototype.hasOwnProperty.call(i,t),Ci=(i,{types:t,dynamicTypes:e})=>{let s=Pi(t,i),n=t[i];if(!s&&typeof e=="function"){let r=e(i);r!==void 0&&(n=r,s=!0)}return[s,n]},gt=(i,t)=>t&&i===t,Y=(i,t)=>t&&i.indexOf(t)!==-1,Zo=(i,t)=>t&&!Y(i,t);function Qo(i,{types:t,shorthands:e,typeDefs:s,invalidHandler:n,unknownHandler:r,abbrevHandler:o,typeDefault:a,dynamicTypes:h}={}){P(t,e,i,s);let c={},l={remain:[],cooked:i,original:i.slice(0)};return Ri(i,c,l.remain,{typeDefs:s,types:t,dynamicTypes:h,shorthands:e,unknownHandler:r,abbrevHandler:o}),Di(c,{types:t,dynamicTypes:h,typeDefs:s,invalidHandler:n,typeDefault:a}),c.argv=l,Object.defineProperty(c.argv,"toString",{value:function(){return this.original.map(JSON.stringify).join(" ")},enumerable:!1}),c}function Di(i,{types:t={},typeDefs:e={},dynamicTypes:s,invalidHandler:n,typeDefault:r}={}){let o=e.String?.type,a=e.Number?.type,h=e.Array?.type,c=e.Boolean?.type,l=e.Date?.type,f=typeof r<"u";f||(r=[!1,!0,null],o&&r.push(o),h&&r.push(h));let d={};Object.keys(i).forEach(u=>{if(u==="argv")return;let m=i[u];P("val=%j",m);let p=Array.isArray(m),[g,w]=Ci(u,{types:t,dynamicTypes:s}),S=w;p||(m=[m]),S||(S=r),gt(S,h)&&(S=r.concat(h)),Array.isArray(S)||(S=[S]),P("val=%j",m),P("types=",S),m=m.map(y=>{if(typeof y=="string"&&(P("string %j",y),y=y.trim(),y==="null"&&~S.indexOf(null)||y==="true"&&(~S.indexOf(!0)||Y(S,c))||y==="false"&&(~S.indexOf(!1)||Y(S,c))?(y=JSON.parse(y),P("jsonable %j",y)):Y(S,a)&&!isNaN(y)?(P("convert to number",y),y=+y):Y(S,l)&&!isNaN(Date.parse(y))&&(P("convert to date",y),y=new Date(y))),!g){if(!f)return y;w=r}y===!1&&~S.indexOf(null)&&!(~S.indexOf(!1)||Y(S,c))&&(y=null);let E={};return E[u]=y,P("prevalidated val",E,y,w),ts(E,u,y,w,{typeDefs:e})?(P("validated v",E,y,w),E[u]):(n?n(u,y,w,i):n!==!1&&P("invalid: "+u+"="+y,w),d)}).filter(y=>y!==d),!m.length&&Zo(S,h)?(P("VAL HAS NO LENGTH, DELETE IT",m,u,S.indexOf(h)),delete i[u]):p?(P(p,i[u],m),i[u]=m):i[u]=m[0],P("k=%s val=%j",u,m,i[u])})}function ts(i,t,e,s,{typeDefs:n}={}){let r=n?.Array?.type;if(Array.isArray(s)){for(let h=0,c=s.length;h<c;h++)if(!gt(s[h],r)&&ts(i,t,e,s[h],{typeDefs:n}))return!0;return delete i[t],!1}if(gt(s,r))return!0;if(s!==s)return P("Poison NaN",t,e,s),delete i[t],!1;if(e===s)return P("Explicitly allowed %j",e),i[t]=e,!0;let o=!1,a=Object.keys(n);for(let h=0,c=a.length;h<c;h++){P("test type %j %j %j",t,e,a[h]);let l=n[a[h]];if(l&&(s&&s.name&&l.type&&l.type.name?s.name===l.type.name:s===l.type)){let f={};if(o=l.validate(f,t,e)!==!1,e=f[t],o){i[t]=e;break}}}return P("OK? %j (%j %j %j)",o,t,e,a[a.length-1]),o||delete i[t],o}function Ri(i,t,e,{types:s={},typeDefs:n={},shorthands:r={},dynamicTypes:o,unknownHandler:a,abbrevHandler:h}={}){let c=n.String?.type,l=n.Number?.type,f=n.Array?.type,d=n.Boolean?.type;P("parse",i,t,e);let u=ne(Object.keys(s));P("abbrevs=%j",u);let m=ne(Object.keys(r));for(let p=0;p<i.length;p++){let g=i[p];if(P("arg",g),g.match(/^-{2,}$/)){e.push.apply(e,i.slice(p+1)),i[p]="--";break}let w=!1;if(g.charAt(0)==="-"&&g.length>1){let S=g.indexOf("=");if(S>-1){w=!0;let ct=g.slice(S+1);g=g.slice(0,S),i.splice(p,1,g,ct)}let y=Ni(g,m,u,{shorthands:r,abbrevHandler:h});if(P("arg=%j shRes=%j",g,y),y&&(i.splice.apply(i,[p,1].concat(y)),g!==y[0])){p--;continue}g=g.replace(/^-+/,"");let E=null;for(;g.toLowerCase().indexOf("no-")===0;)E=!E,g=g.slice(3);u[g]&&u[g]!==g&&(h?h(g,u[g]):h!==!1&&P(`abbrev: ${g} -> ${u[g]}`),g=u[g]);let[k,_]=Ci(g,{types:s,dynamicTypes:o}),C=Array.isArray(_);C&&_.length===1&&(C=!1,_=_[0]);let B=gt(_,f)||C&&Y(_,f);!k&&Pi(t,g)&&(Array.isArray(t[g])||(t[g]=[t[g]]),B=!0);let j,x=i[p+1],Qt=typeof E=="boolean"||gt(_,d)||C&&Y(_,d)||typeof _>"u"&&!w||x==="false"&&(_===null||C&&~_.indexOf(null));if(typeof _>"u"){let ct=!w&&x&&!x?.startsWith("-")&&!["true","false"].includes(x);a?ct?a(g,x):a(g):a!==!1&&(P(`unknown: ${g}`),ct&&P(`unknown: ${x} parsed as normal opt`))}if(Qt){j=!E,(x==="true"||x==="false")&&(j=JSON.parse(x),x=null,E&&(j=!j),p++),C&&x&&(~_.indexOf(x)?(j=x,p++):x==="null"&&~_.indexOf(null)?(j=null,p++):!x.match(/^-{2,}[^-]/)&&!isNaN(x)&&Y(_,l)?(j=+x,p++):!x.match(/^-[^-]/)&&Y(_,c)&&(j=x,p++)),B?(t[g]=t[g]||[]).push(j):t[g]=j;continue}gt(_,c)&&(x===void 0?x="":x.match(/^-{1,2}[^-]+/)&&(x="",p--)),x&&x.match(/^-{2,}$/)&&(x=void 0,p--),j=x===void 0?!0:x,B?(t[g]=t[g]||[]).push(j):t[g]=j,p++;continue}e.push(g)}}var ji=Symbol("singles"),ta=(i,t)=>{let e=t[ji];e||(e=Object.keys(t).filter(n=>n.length===1).reduce((n,r)=>(n[r]=!0,n),{}),t[ji]=e,P("shorthand singles",e));let s=i.split("").filter(n=>e[n]);return s.join("")===i?s:null};function Ni(i,...t){let{abbrevHandler:e,types:s={},shorthands:n={}}=t.length?t.pop():{},r=t[0]??ne(Object.keys(n)),o=t[1]??ne(Object.keys(s));if(i=i.replace(/^-+/,""),o[i]===i)return null;if(n[i])return n[i]&&!Array.isArray(n[i])&&(n[i]=n[i].split(/\s+/)),n[i];let a=ta(i,n);return a?a.map(h=>n[h]).reduce((h,c)=>h.concat(c),[]):o[i]&&!n[i]?null:(r[i]&&(e?e(i,r[i]):e!==!1&&P(`abbrev: ${i} -> ${r[i]}`),i=r[i]),n[i]&&!Array.isArray(n[i])&&(n[i]=n[i].split(/\s+/)),n[i])}Mi.exports={nopt:Qo,clean:Di,parse:Ri,validate:ts,resolveShort:Ni,typeDefs:Xo}});var ss=v((q,Fi)=>{var es=$i(),ea=Qe();Fi.exports=q=sa;q.clean=ia;q.typeDefs=ea;q.lib=es;function sa(i,t,e=process.argv,s=2){return es.nopt(e.slice(s),{types:i||{},shorthands:t||{},typeDefs:q.typeDefs,invalidHandler:q.invalidHandler,unknownHandler:q.unknownHandler,abbrevHandler:q.abbrevHandler})}function ia(i,t,e=q.typeDefs){return es.clean(i,{types:t||{},typeDefs:e,invalidHandler:q.invalidHandler,unknownHandler:q.unknownHandler,abbrevHandler:q.abbrevHandler})}});var Ii=v((Ll,Li)=>{var na=Symbol("proc-log.meta");Li.exports={META:na,output:{LEVELS:["standard","error","buffer","flush"],KEYS:{standard:"standard",error:"error",buffer:"buffer",flush:"flush"},standard:function(...i){return process.emit("output","standard",...i)},error:function(...i){return process.emit("output","error",...i)},buffer:function(...i){return process.emit("output","buffer",...i)},flush:function(...i){return process.emit("output","flush",...i)}},log:{LEVELS:["notice","error","warn","info","verbose","http","silly","timing","pause","resume"],KEYS:{notice:"notice",error:"error",warn:"warn",info:"info",verbose:"verbose",http:"http",silly:"silly",timing:"timing",pause:"pause",resume:"resume"},error:function(...i){return process.emit("log","error",...i)},notice:function(...i){return process.emit("log","notice",...i)},warn:function(...i){return process.emit("log","warn",...i)},info:function(...i){return process.emit("log","info",...i)},verbose:function(...i){return process.emit("log","verbose",...i)},http:function(...i){return process.emit("log","http",...i)},silly:function(...i){return process.emit("log","silly",...i)},timing:function(...i){return process.emit("log","timing",...i)},pause:function(){return process.emit("log","pause")},resume:function(){return process.emit("log","resume")}},time:{LEVELS:["start","end"],KEYS:{start:"start",end:"end"},start:function(i,t){process.emit("time","start",i);function e(){return process.emit("time","end",i)}if(typeof t=="function"){let s=t();return s&&s.finally?s.finally(e):(e(),s)}return e},end:function(i){return process.emit("time","end",i)}},input:{LEVELS:["start","end","read"],KEYS:{start:"start",end:"end",read:"read"},start:function(i){process.emit("input","start");function t(){return process.emit("input","end")}if(typeof i=="function"){let e=i();return e&&e.finally?e.finally(t):(t(),e)}return t},end:function(){return process.emit("input","end")},read:function(...i){let t,e,s=new Promise((n,r)=>{t=n,e=r});return process.emit("input","read",t,e,...i),s}}}});var mt=v((Il,is)=>{var rt=ss(),ra=rt.typeDefs.path.validate,oa=(i,t,e)=>typeof e!="string"?!1:ra(i,t,e);is.exports={...rt.typeDefs,url:{...rt.typeDefs.url,description:'full url with "http://"'},path:{...rt.typeDefs.path,validate:oa,description:"valid filesystem path"},Number:{...rt.typeDefs.Number,description:"numeric value"},Boolean:{...rt.typeDefs.Boolean,description:"boolean value (true or false)"},Date:{...rt.typeDefs.Date,description:"valid Date string"}};rt.typeDefs=is.exports});var qi=v((Wl,Bi)=>{var{URL:Wi}=A("url");Bi.exports=i=>{let t=new Wi(i),e=`${t.protocol}//${t.host}${t.pathname}`,s=new Wi(".",e);return`//${s.host}${s.pathname}`}});var ns=v((Bl,Ui)=>{var aa=/(?<!\\)(\\*)\$\{([^${}?]+)(\?)?\}/g;Ui.exports=(i,t)=>i.replace(aa,(e,s,n,r)=>{let o=r==="?"?"":`\${${n}}`,a=t[n]!==void 0?t[n]:o;return s.length%2?e.slice((s.length+1)/2):s.slice(s.length/2)+a})});var Hi=v((ql,Gi)=>{var At=mt(),ha=ns(),{resolve:zi}=A("path"),rs=(i,t,e,s=!1)=>{if(typeof i!="string"&&!Array.isArray(i))return i;let{platform:n,types:r,home:o,env:a}=e,h=new Set([].concat(r[t])),c=h.has(At.path.type),l=h.has(At.Boolean.type),f=c||h.has(At.String.type),d=h.has(At.Number.type),u=!s&&h.has(Array),m=h.has(At.Date.type);if(Array.isArray(i))return u?i.map(p=>rs(p,t,e,!0)):i;if(i=i.trim(),u)return rs(i.split(`

`),t,e);if(l&&!f&&i==="")return!0;if(!f&&!c&&!d)switch(i){case"true":return!0;case"false":return!1;case"null":return null;case"undefined":return}return i=ha(i,a),m?new Date(i):(c&&((n==="win32"?/^~(\/|\\)/:/^~\//).test(i)&&o?i=zi(o,i.slice(2)):i=zi(i)),d&&!isNaN(i)&&(i=+i),i)};Gi.exports=rs});var Yi=v((Ul,Ji)=>{var ca=(i,t)=>!/^[/@_]/.test(i)&&typeof os(t)=="string"&&`npm_config_${i.replace(/-/g,"_").toLowerCase()}`,os=i=>Array.isArray(i)?i.map(t=>os(t)).join(`

`):i==null||i===!1?"":typeof i=="object"?null:String(i),Ki=(i,t)=>!Array.isArray(t)||!Array.isArray(i)?i===t:la(i,t),la=(i,t)=>{if(i.length!==t.length)return!1;for(let e=0;e<i.length;e++)if(i[e]!==t[e])return!1;return!0},Vi=(i,t,e)=>{let s=os(e),n=ca(t,s);n&&s!==null&&(i[n]=s)},fa=i=>{let{env:t,defaults:e,definitions:s,list:[n,r]}=i;t.INIT_CWD=process.cwd();let o=new Set(Object.keys(n)),a=new Set(Object.keys(r));for(let h in n){let{deprecated:c,envExport:l=!0}=s[h]||{};c||l===!1||(Ki(e[h],n[h])?Ki(r[h],n[h])||Vi(t,h,n[h]):a.has(h)&&!o.has(h)||Vi(t,h,n[h]))}t.HOME=i.home,t.npm_config_global_prefix=i.globalPrefix,t.npm_config_local_prefix=i.localPrefix,n.editor&&(t.EDITOR=n.editor),n["node-options"]&&(t.NODE_OPTIONS=n["node-options"]),t.npm_config_node_gyp=n["node-gyp"],t.npm_config_npm_version=n["npm-version"]||"unknown",t.npm_execpath=i.npmBin,t.NODE=t.npm_node_execpath=i.execPath};Ji.exports=fa});var Zi=v((zl,Xi)=>{"use strict";var as=class extends Error{constructor(t){let e="Invalid auth configuration found: ";e+=t.map(s=>{if(s.action==="delete")return`\`${s.key}\` is not allowed in ${s.where} config`;if(s.action==="rename")return`\`${s.from}\` must be renamed to \`${s.to}\` in ${s.where} config`}).join(", "),e+="\nPlease run `npm config fix` to repair your configuration.`",super(e),this.code="ERR_INVALID_AUTH",this.problems=t}};Xi.exports={ErrInvalidAuth:as}});var en=v((Gl,tn)=>{var ua=mt(),Qi=i=>{if(!i||typeof i!="function"&&typeof i!="object")return i;if(Array.isArray(i))return i.map(t=>Qi(t));for(let{type:t,description:e}of Object.values(ua))if(t===i)return e||t;return i};tn.exports=i=>[].concat(Qi(i)).filter(t=>t!==void 0)});var cs=v((Hl,on)=>{"use strict";var da=Symbol.for("indent"),pa=Symbol.for("newline"),ga=`
`,ma="  ",wa=/^\uFEFF/,ya=/^\s*[{[]((?:\r?\n)+)([\s\t]*)/,ba=/^(?:\{\}|\[\])((?:\r?\n)+)?$/,sn=/^Unexpected token '?(.)'?(,)? /i,Sa=i=>{let t=i.charCodeAt(0).toString(16).toUpperCase();return`0x${t.length%2?"0":""}${t}`},nn=i=>String(i).replace(wa,""),hs=(i,t,e=0)=>({message:`${i} while parsing ${t}`,position:e}),Ea=(i,t,e=20)=>{let s=i.message;if(!t)return hs(s,"empty string");let n=s.match(sn),r=s.match(/ position\s+(\d+)/i);n&&(s=s.replace(sn,`Unexpected token ${JSON.stringify(n[1])} (${Sa(n[1])})$2 `));let o;if(r?o=+r[1]:s.match(/^Unexpected end of JSON.*/i)&&(o=t.length-1),o==null)return hs(s,`'${t.slice(0,e*2)}'`);let a=o<=e?0:o-e,h=o+e>=t.length?t.length:o+e,c=`${a?"...":""}${t.slice(a,h)}${h===t.length?"":"..."}`;return hs(s,`${t===c?"":"near "}${JSON.stringify(c)}`,o)},re=class extends SyntaxError{constructor(t,e,s,n){let r=Ea(t,e,s);super(r.message),Object.assign(this,r),this.code="EJSONPARSE",this.systemError=t,Error.captureStackTrace(this,n||this.constructor)}get name(){return this.constructor.name}set name(t){}get[Symbol.toStringTag](){return this.constructor.name}},rn=(i,t)=>{let e=JSON.parse(i,t);if(e&&typeof e=="object"){let s=i.match(ba)||i.match(ya)||[null,"",""];e[pa]=s[1]??ga,e[da]=s[2]??ma}return e},oe=(i,t,e)=>{let s=nn(i);try{return rn(s,t)}catch(n){if(typeof i!="string"&&!Buffer.isBuffer(i)){let r=Array.isArray(i)&&i.length===0?"an empty array":String(i);throw Object.assign(new TypeError(`Cannot parse ${r}`),{code:"EJSONPARSE",systemError:n})}throw new re(n,s,e,oe)}};on.exports=oe;oe.JSONParseError=re;oe.noExceptions=(i,t)=>{try{return rn(nn(i),t)}catch{}}});var cn=v((Kl,hn)=>{var ls=new Set(["dependencies","optionalDependencies","devDependencies","peerDependencies"]),va=i=>{for(let t of ls)i&&i[t]&&(i[t]=Object.keys(i[t]).sort((e,s)=>e.localeCompare(s,"en")).reduce((e,s)=>(e[s]=i[t][s],e),{}));return i},an=({content:i,originalContent:t})=>{let e=va({...i});if(e.dependencies&&e.optionalDependencies)for(let a of Object.keys(e.optionalDependencies))delete e.dependencies[a];let s={...t};for(let a of ls)e[a]&&(s[a]=e[a]),e[a]&&typeof e=="object"&&Object.keys(e[a]).length===0&&delete s[a];let{dependencies:n,peerDependencies:r}=t||{},{peerDependencies:o}=s;if(n&&r&&o)for(let a of Object.keys(r))n[a]!==void 0&&o[a]!==void 0&&(s.dependencies=s.dependencies||{},s.dependencies[a]=o[a]);return s};an.knownKeys=ls;hn.exports=an});var fn=v((Vl,ln)=>{var _a=({content:i,originalContent:t={}})=>{let e=i.scripts;if(!e)return t;if(Object.entries(e).some(([n,r])=>typeof n!="string"||typeof r!="string"))throw Object.assign(new TypeError("package.json scripts should be a key-value pair of strings."),{code:"ESCRIPTSINVALID"});return{...t,scripts:{...e}}};ln.exports=_a});var dn=v((Jl,un)=>{var xa=({content:i,originalContent:t={}})=>{let e=i.workspaces;if(!e)return t;let s=()=>e.some(n=>typeof n!="string");if(!e.length||s())throw Object.assign(new TypeError("workspaces should be an array of strings."),{code:"EWORKSPACESINVALID"});return{...t,workspaces:[...e]}};un.exports=xa});var gn=v((Yl,pn)=>{pn.exports=function(){}});var bn=v((Xl,yn)=>{var{readFile:Oa}=A("fs/promises"),Aa=cs();async function mn(i){try{return await Oa(i,"utf8")}catch(t){throw t.message=`Could not read package.json: ${t}`,t}}function wn(i){try{return Aa(i)}catch(t){throw t.message=`Invalid package.json: ${t}`,t}}async function ka(i){let t=await mn(i);return wn(t)}yn.exports={read:mn,parse:wn,readPackage:ka}});var En=v((Zl,Sn)=>{function Ta(i){let{name:t,version:e,private:s,description:n,keywords:r,homepage:o,bugs:a,repository:h,funding:c,license:l,author:f,maintainers:d,contributors:u,type:m,imports:p,exports:g,main:w,browser:S,types:y,bin:E,man:k,directories:_,files:C,workspaces:B,scripts:j,config:x,dependencies:Qt,devDependencies:ct,peerDependencies:ei,peerDependenciesMeta:si,optionalDependencies:ii,bundledDependencies:ni,bundleDependencies:ri,engines:oi,os:ai,cpu:hi,publishConfig:ci,devEngines:li,licenses:fi,overrides:ui,...Ro}=i;return{...typeof t<"u"?{name:t}:{},...typeof e<"u"?{version:e}:{},...typeof s<"u"?{private:s}:{},...typeof n<"u"?{description:n}:{},...typeof r<"u"?{keywords:r}:{},...typeof o<"u"?{homepage:o}:{},...typeof a<"u"?{bugs:a}:{},...typeof h<"u"?{repository:h}:{},...typeof c<"u"?{funding:c}:{},...typeof l<"u"?{license:l}:{},...typeof f<"u"?{author:f}:{},...typeof d<"u"?{maintainers:d}:{},...typeof u<"u"?{contributors:u}:{},...typeof m<"u"?{type:m}:{},...typeof p<"u"?{imports:p}:{},...typeof g<"u"?{exports:g}:{},...typeof w<"u"?{main:w}:{},...typeof S<"u"?{browser:S}:{},...typeof y<"u"?{types:y}:{},...typeof E<"u"?{bin:E}:{},...typeof k<"u"?{man:k}:{},...typeof _<"u"?{directories:_}:{},...typeof C<"u"?{files:C}:{},...typeof B<"u"?{workspaces:B}:{},...typeof j<"u"?{scripts:j}:{},...typeof x<"u"?{config:x}:{},...typeof Qt<"u"?{dependencies:Qt}:{},...typeof ct<"u"?{devDependencies:ct}:{},...typeof ei<"u"?{peerDependencies:ei}:{},...typeof si<"u"?{peerDependenciesMeta:si}:{},...typeof ii<"u"?{optionalDependencies:ii}:{},...typeof ni<"u"?{bundledDependencies:ni}:{},...typeof ri<"u"?{bundleDependencies:ri}:{},...typeof oi<"u"?{engines:oi}:{},...typeof ai<"u"?{os:ai}:{},...typeof hi<"u"?{cpu:hi}:{},...typeof ci<"u"?{publishConfig:ci}:{},...typeof li<"u"?{devEngines:li}:{},...typeof fi<"u"?{licenses:fi}:{},...typeof ui<"u"?{overrides:ui}:{},...Ro}}Sn.exports={packageSort:Ta}});var ds=v((Ql,xn)=>{var{readFile:ja,writeFile:Pa}=A("fs/promises"),{resolve:vn}=A("path"),Ca=cs(),_n=cn(),Da=fn(),Ra=dn(),fs=gn(),{read:Na,parse:Ma}=bn(),{packageSort:$a}=En(),Fa=new Set([_n,Da,Ra]),La=new Set([..._n.knownKeys,"scripts","workspaces"]),us=class i{static normalizeSteps=Object.freeze(["_id","_attributes","bundledDependencies","bundleDependencies","optionalDedupe","scripts","funding","bin"]);static fixSteps=Object.freeze(["binRefs","bundleDependencies","bundleDependenciesFalse","fixName","fixNameField","fixVersionField","fixRepositoryField","fixDependencies","devDependencies","scriptpath"]);static prepareSteps=Object.freeze(["_id","_attributes","bundledDependencies","bundleDependencies","bundleDependenciesDeleteFalse","gypfile","serverjs","scriptpath","authors","readme","mans","binDir","gitHead","fillTypes","normalizeData","binRefs"]);static async create(t,e={}){let s=new i;return await s.create(t),e.data?s.update(e.data):s}static async load(t,e={}){let s=new i;if(!e.create)return s.load(t);try{return await s.load(t)}catch(n){if(!n.message.startsWith("Could not read package.json"))throw n;return await s.create(t)}}static async fix(t,e){let s=new i;return await s.load(t,!0),s.fix(e)}static async prepare(t,e){let s=new i;return await s.load(t,!0),s.prepare(e)}static async normalize(t,e){let s=new i;return await s.load(t),s.normalize(e)}#t;#e;#i="";#s=!0;async load(t,e){this.#t=t;let s;try{this.#i=await Na(this.filename)}catch(n){if(!e)throw n;s=n}if(s){let n=vn(this.path,"index.js"),r;try{r=await ja(n,"utf8")}catch{throw s}try{this.fromComment(r)}catch{throw s}return this.#s=!1,this}return this.fromJSON(this.#i)}fromJSON(t){return this.#e=Ma(t),this}fromContent(t){return this.#e=t,this.#s=!1,this}fromComment(t){if(t=t.split(/^\/\*\*package(?:\s|$)/m),t.length<2)throw new Error("File has no package in comments");if(t=t[1],t=t.split(/\*\*\/$/m),t.length<2)throw new Error("File has no package in comments");return t=t[0],t=t.replace(/^\s*\*/mg,""),this.#e=Ca(t),this}get content(){return this.#e}get path(){return this.#t}get filename(){if(this.path)return vn(this.path,"package.json")}create(t){return this.#t=t,this.#e={},this}update(t){if(!this.content)throw new Error("Can not update without content.  Please `load` or `create`");for(let e of Fa)this.#e=e({content:t,originalContent:this.content});for(let[e,s]of Object.entries(t))La.has(e)||(this.content[e]=s);return this}async save({sort:t}={}){if(!this.#s)throw new Error("No package.json to save to");let{[Symbol.for("indent")]:e,[Symbol.for("newline")]:s,...n}=this.content,r=e===void 0?"  ":e,o=s===void 0?`
`:s,a=t?$a(n):n,h=`${JSON.stringify(a,null,r)}
`.replace(/\n/g,o);if(h.trim()!==this.#i.trim()){let c=await Pa(this.filename,h);return this.#i=h,c}}async normalize(t={}){return t.steps||(t.steps=this.constructor.normalizeSteps),await fs(this,t),this}async prepare(t={}){return t.steps||(t.steps=this.constructor.prepareSteps),await fs(this,t),this}async fix(t={}){return t.steps=this.constructor.fixSteps,await fs(this,t),this}};xn.exports=us});var kn=v((tf,An)=>{var{basename:On,dirname:Ia}=A("path"),Wa=(i,t)=>i.charAt(0)==="@"?`${i}/${t}`:t;An.exports=i=>i?Wa(On(Ia(i)),On(i)):!1});var Dn=v((ef,Cn)=>{"use strict";Cn.exports=jn;function jn(i,t,e){i instanceof RegExp&&(i=Tn(i,e)),t instanceof RegExp&&(t=Tn(t,e));var s=Pn(i,t,e);return s&&{start:s[0],end:s[1],pre:e.slice(0,s[0]),body:e.slice(s[0]+i.length,s[1]),post:e.slice(s[1]+t.length)}}function Tn(i,t){var e=t.match(i);return e?e[0]:null}jn.range=Pn;function Pn(i,t,e){var s,n,r,o,a,h=e.indexOf(i),c=e.indexOf(t,h+1),l=h;if(h>=0&&c>0){if(i===t)return[h,c];for(s=[],r=e.length;l>=0&&!a;)l==h?(s.push(l),h=e.indexOf(i,l+1)):s.length==1?a=[s.pop(),c]:(n=s.pop(),n<r&&(r=n,o=c),c=e.indexOf(t,l+1)),l=h<c&&h>=0?h:c;s.length&&(a=[r,o])}return a}});var Wn=v((sf,In)=>{var Rn=Dn();In.exports=Ua;var Nn="\0SLASH"+Math.random()+"\0",Mn="\0OPEN"+Math.random()+"\0",gs="\0CLOSE"+Math.random()+"\0",$n="\0COMMA"+Math.random()+"\0",Fn="\0PERIOD"+Math.random()+"\0";function ps(i){return parseInt(i,10)==i?parseInt(i,10):i.charCodeAt(0)}function Ba(i){return i.split("\\\\").join(Nn).split("\\{").join(Mn).split("\\}").join(gs).split("\\,").join($n).split("\\.").join(Fn)}function qa(i){return i.split(Nn).join("\\").split(Mn).join("{").split(gs).join("}").split($n).join(",").split(Fn).join(".")}function Ln(i){if(!i)return[""];var t=[],e=Rn("{","}",i);if(!e)return i.split(",");var s=e.pre,n=e.body,r=e.post,o=s.split(",");o[o.length-1]+="{"+n+"}";var a=Ln(r);return r.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),t.push.apply(t,o),t}function Ua(i){return i?(i.substr(0,2)==="{}"&&(i="\\{\\}"+i.substr(2)),kt(Ba(i),!0).map(qa)):[]}function za(i){return"{"+i+"}"}function Ga(i){return/^-?0\d/.test(i)}function Ha(i,t){return i<=t}function Ka(i,t){return i>=t}function kt(i,t){var e=[],s=Rn("{","}",i);if(!s)return[i];var n=s.pre,r=s.post.length?kt(s.post,!1):[""];if(/\$$/.test(s.pre))for(var o=0;o<r.length;o++){var a=n+"{"+s.body+"}"+r[o];e.push(a)}else{var h=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),l=h||c,f=s.body.indexOf(",")>=0;if(!l&&!f)return s.post.match(/,(?!,).*\}/)?(i=s.pre+"{"+s.body+gs+s.post,kt(i)):[i];var d;if(l)d=s.body.split(/\.\./);else if(d=Ln(s.body),d.length===1&&(d=kt(d[0],!1).map(za),d.length===1))return r.map(function(x){return s.pre+d[0]+x});var u;if(l){var m=ps(d[0]),p=ps(d[1]),g=Math.max(d[0].length,d[1].length),w=d.length==3?Math.abs(ps(d[2])):1,S=Ha,y=p<m;y&&(w*=-1,S=Ka);var E=d.some(Ga);u=[];for(var k=m;S(k,p);k+=w){var _;if(c)_=String.fromCharCode(k),_==="\\"&&(_="");else if(_=String(k),E){var C=g-_.length;if(C>0){var B=new Array(C+1).join("0");k<0?_="-"+B+_.slice(1):_=B+_}}u.push(_)}}else{u=[];for(var j=0;j<d.length;j++)u.push.apply(u,kt(d[j],!1))}for(var j=0;j<u.length;j++)for(var o=0;o<r.length;o++){var a=n+u[j]+r[o];(!t||l||a)&&e.push(a)}}return e}});var Bn=v(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.assertValidPattern=void 0;var Va=1024*64,Ja=i=>{if(typeof i!="string")throw new TypeError("invalid pattern");if(i.length>Va)throw new TypeError("pattern is too long")};ae.assertValidPattern=Ja});var Un=v(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.parseClass=void 0;var Ya={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Tt=i=>i.replace(/[[\]\\-]/g,"\\$&"),Xa=i=>i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),qn=i=>i.join(""),Za=(i,t)=>{let e=t;if(i.charAt(e)!=="[")throw new Error("not in a brace expression");let s=[],n=[],r=e+1,o=!1,a=!1,h=!1,c=!1,l=e,f="";t:for(;r<i.length;){let p=i.charAt(r);if((p==="!"||p==="^")&&r===e+1){c=!0,r++;continue}if(p==="]"&&o&&!h){l=r+1;break}if(o=!0,p==="\\"&&!h){h=!0,r++;continue}if(p==="["&&!h){for(let[g,[w,S,y]]of Object.entries(Ya))if(i.startsWith(g,r)){if(f)return["$.",!1,i.length-e,!0];r+=g.length,y?n.push(w):s.push(w),a=a||S;continue t}}if(h=!1,f){p>f?s.push(Tt(f)+"-"+Tt(p)):p===f&&s.push(Tt(p)),f="",r++;continue}if(i.startsWith("-]",r+1)){s.push(Tt(p+"-")),r+=2;continue}if(i.startsWith("-",r+1)){f=p,r+=2;continue}s.push(Tt(p)),r++}if(l<r)return["",!1,0,!1];if(!s.length&&!n.length)return["$.",!1,i.length-e,!0];if(n.length===0&&s.length===1&&/^\\?.$/.test(s[0])&&!c){let p=s[0].length===2?s[0].slice(-1):s[0];return[Xa(p),!1,l-e,!1]}let d="["+(c?"^":"")+qn(s)+"]",u="["+(c?"":"^")+qn(n)+"]";return[s.length&&n.length?"("+d+"|"+u+")":s.length?d:u,a,l-e,!0]};he.parseClass=Za});var le=v(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.unescape=void 0;var Qa=(i,{windowsPathsNoEscape:t=!1}={})=>t?i.replace(/\[([^\/\\])\]/g,"$1"):i.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");ce.unescape=Qa});var ys=v(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.AST=void 0;var th=Un(),fe=le(),eh=new Set(["!","?","+","*","@"]),zn=i=>eh.has(i),sh="(?!(?:^|/)\\.\\.?(?:$|/))",ue="(?!\\.)",ih=new Set(["[","."]),nh=new Set(["..","."]),rh=new Set("().*{}+?[]^$\\!"),oh=i=>i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),ws="[^/]",Gn=ws+"*?",Hn=ws+"+?",ms=class i{type;#t;#e;#i=!1;#s=[];#o;#u;#c;#l=!1;#a;#h;#r=!1;constructor(t,e,s={}){this.type=t,t&&(this.#e=!0),this.#o=e,this.#t=this.#o?this.#o.#t:this,this.#a=this.#t===this?s:this.#t.#a,this.#c=this.#t===this?[]:this.#t.#c,t==="!"&&!this.#t.#l&&this.#c.push(this),this.#u=this.#o?this.#o.#s.length:0}get hasMagic(){if(this.#e!==void 0)return this.#e;for(let t of this.#s)if(typeof t!="string"&&(t.type||t.hasMagic))return this.#e=!0;return this.#e}toString(){return this.#h!==void 0?this.#h:this.type?this.#h=this.type+"("+this.#s.map(t=>String(t)).join("|")+")":this.#h=this.#s.map(t=>String(t)).join("")}#w(){if(this!==this.#t)throw new Error("should only call on root");if(this.#l)return this;this.toString(),this.#l=!0;let t;for(;t=this.#c.pop();){if(t.type!=="!")continue;let e=t,s=e.#o;for(;s;){for(let n=e.#u+1;!s.type&&n<s.#s.length;n++)for(let r of t.#s){if(typeof r=="string")throw new Error("string part in extglob AST??");r.copyIn(s.#s[n])}e=s,s=e.#o}}return this}push(...t){for(let e of t)if(e!==""){if(typeof e!="string"&&!(e instanceof i&&e.#o===this))throw new Error("invalid part: "+e);this.#s.push(e)}}toJSON(){let t=this.type===null?this.#s.slice().map(e=>typeof e=="string"?e:e.toJSON()):[this.type,...this.#s.map(e=>e.toJSON())];return this.isStart()&&!this.type&&t.unshift([]),this.isEnd()&&(this===this.#t||this.#t.#l&&this.#o?.type==="!")&&t.push({}),t}isStart(){if(this.#t===this)return!0;if(!this.#o?.isStart())return!1;if(this.#u===0)return!0;let t=this.#o;for(let e=0;e<this.#u;e++){let s=t.#s[e];if(!(s instanceof i&&s.type==="!"))return!1}return!0}isEnd(){if(this.#t===this||this.#o?.type==="!")return!0;if(!this.#o?.isEnd())return!1;if(!this.type)return this.#o?.isEnd();let t=this.#o?this.#o.#s.length:0;return this.#u===t-1}copyIn(t){typeof t=="string"?this.push(t):this.push(t.clone(this))}clone(t){let e=new i(this.type,t);for(let s of this.#s)e.copyIn(s);return e}static#y(t,e,s,n){let r=!1,o=!1,a=-1,h=!1;if(e.type===null){let u=s,m="";for(;u<t.length;){let p=t.charAt(u++);if(r||p==="\\"){r=!r,m+=p;continue}if(o){u===a+1?(p==="^"||p==="!")&&(h=!0):p==="]"&&!(u===a+2&&h)&&(o=!1),m+=p;continue}else if(p==="["){o=!0,a=u,h=!1,m+=p;continue}if(!n.noext&&zn(p)&&t.charAt(u)==="("){e.push(m),m="";let g=new i(p,e);u=i.#y(t,g,u,n),e.push(g);continue}m+=p}return e.push(m),u}let c=s+1,l=new i(null,e),f=[],d="";for(;c<t.length;){let u=t.charAt(c++);if(r||u==="\\"){r=!r,d+=u;continue}if(o){c===a+1?(u==="^"||u==="!")&&(h=!0):u==="]"&&!(c===a+2&&h)&&(o=!1),d+=u;continue}else if(u==="["){o=!0,a=c,h=!1,d+=u;continue}if(zn(u)&&t.charAt(c)==="("){l.push(d),d="";let m=new i(u,l);l.push(m),c=i.#y(t,m,c,n);continue}if(u==="|"){l.push(d),d="",f.push(l),l=new i(null,e);continue}if(u===")")return d===""&&e.#s.length===0&&(e.#r=!0),l.push(d),d="",e.push(...f,l),c;d+=u}return e.type=null,e.#e=void 0,e.#s=[t.substring(s-1)],c}static fromGlob(t,e={}){let s=new i(null,void 0,e);return i.#y(t,s,0,e),s}toMMPattern(){if(this!==this.#t)return this.#t.toMMPattern();let t=this.toString(),[e,s,n,r]=this.toRegExpSource();if(!(n||this.#e||this.#a.nocase&&!this.#a.nocaseMagicOnly&&t.toUpperCase()!==t.toLowerCase()))return s;let a=(this.#a.nocase?"i":"")+(r?"u":"");return Object.assign(new RegExp(`^${e}$`,a),{_src:e,_glob:t})}get options(){return this.#a}toRegExpSource(t){let e=t??!!this.#a.dot;if(this.#t===this&&this.#w(),!this.type){let h=this.isStart()&&this.isEnd(),c=this.#s.map(u=>{let[m,p,g,w]=typeof u=="string"?i.#d(u,this.#e,h):u.toRegExpSource(t);return this.#e=this.#e||g,this.#i=this.#i||w,m}).join(""),l="";if(this.isStart()&&typeof this.#s[0]=="string"&&!(this.#s.length===1&&nh.has(this.#s[0]))){let m=ih,p=e&&m.has(c.charAt(0))||c.startsWith("\\.")&&m.has(c.charAt(2))||c.startsWith("\\.\\.")&&m.has(c.charAt(4)),g=!e&&!t&&m.has(c.charAt(0));l=p?sh:g?ue:""}let f="";return this.isEnd()&&this.#t.#l&&this.#o?.type==="!"&&(f="(?:$|\\/)"),[l+c+f,(0,fe.unescape)(c),this.#e=!!this.#e,this.#i]}let s=this.type==="*"||this.type==="+",n=this.type==="!"?"(?:(?!(?:":"(?:",r=this.#p(e);if(this.isStart()&&this.isEnd()&&!r&&this.type!=="!"){let h=this.toString();return this.#s=[h],this.type=null,this.#e=void 0,[h,(0,fe.unescape)(this.toString()),!1,!1]}let o=!s||t||e||!ue?"":this.#p(!0);o===r&&(o=""),o&&(r=`(?:${r})(?:${o})*?`);let a="";if(this.type==="!"&&this.#r)a=(this.isStart()&&!e?ue:"")+Hn;else{let h=this.type==="!"?"))"+(this.isStart()&&!e&&!t?ue:"")+Gn+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=n+r+h}return[a,(0,fe.unescape)(r),this.#e=!!this.#e,this.#i]}#p(t){return this.#s.map(e=>{if(typeof e=="string")throw new Error("string type in extglob ast??");let[s,n,r,o]=e.toRegExpSource(t);return this.#i=this.#i||o,s}).filter(e=>!(this.isStart()&&this.isEnd())||!!e).join("|")}static#d(t,e,s=!1){let n=!1,r="",o=!1;for(let a=0;a<t.length;a++){let h=t.charAt(a);if(n){n=!1,r+=(rh.has(h)?"\\":"")+h;continue}if(h==="\\"){a===t.length-1?r+="\\\\":n=!0;continue}if(h==="["){let[c,l,f,d]=(0,th.parseClass)(t,a);if(f){r+=c,o=o||l,a+=f-1,e=e||d;continue}}if(h==="*"){s&&t==="*"?r+=Hn:r+=Gn,e=!0;continue}if(h==="?"){r+=ws,e=!0;continue}r+=oh(h)}return[r,(0,fe.unescape)(t),!!e,o]}};de.AST=ms});var bs=v(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.escape=void 0;var ah=(i,{windowsPathsNoEscape:t=!1}={})=>t?i.replace(/[?*()[\]]/g,"[$&]"):i.replace(/[?*()[\]\\]/g,"\\$&");pe.escape=ah});var et=v(b=>{"use strict";var hh=b&&b.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(b,"__esModule",{value:!0});b.unescape=b.escape=b.AST=b.Minimatch=b.match=b.makeRe=b.braceExpand=b.defaults=b.filter=b.GLOBSTAR=b.sep=b.minimatch=void 0;var ch=hh(Wn()),ge=Bn(),Jn=ys(),lh=bs(),fh=le(),uh=(i,t,e={})=>((0,ge.assertValidPattern)(t),!e.nocomment&&t.charAt(0)==="#"?!1:new lt(t,e).match(i));b.minimatch=uh;var dh=/^\*+([^+@!?\*\[\(]*)$/,ph=i=>t=>!t.startsWith(".")&&t.endsWith(i),gh=i=>t=>t.endsWith(i),mh=i=>(i=i.toLowerCase(),t=>!t.startsWith(".")&&t.toLowerCase().endsWith(i)),wh=i=>(i=i.toLowerCase(),t=>t.toLowerCase().endsWith(i)),yh=/^\*+\.\*+$/,bh=i=>!i.startsWith(".")&&i.includes("."),Sh=i=>i!=="."&&i!==".."&&i.includes("."),Eh=/^\.\*+$/,vh=i=>i!=="."&&i!==".."&&i.startsWith("."),_h=/^\*+$/,xh=i=>i.length!==0&&!i.startsWith("."),Oh=i=>i.length!==0&&i!=="."&&i!=="..",Ah=/^\?+([^+@!?\*\[\(]*)?$/,kh=([i,t=""])=>{let e=Yn([i]);return t?(t=t.toLowerCase(),s=>e(s)&&s.toLowerCase().endsWith(t)):e},Th=([i,t=""])=>{let e=Xn([i]);return t?(t=t.toLowerCase(),s=>e(s)&&s.toLowerCase().endsWith(t)):e},jh=([i,t=""])=>{let e=Xn([i]);return t?s=>e(s)&&s.endsWith(t):e},Ph=([i,t=""])=>{let e=Yn([i]);return t?s=>e(s)&&s.endsWith(t):e},Yn=([i])=>{let t=i.length;return e=>e.length===t&&!e.startsWith(".")},Xn=([i])=>{let t=i.length;return e=>e.length===t&&e!=="."&&e!==".."},Zn=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",Kn={win32:{sep:"\\"},posix:{sep:"/"}};b.sep=Zn==="win32"?Kn.win32.sep:Kn.posix.sep;b.minimatch.sep=b.sep;b.GLOBSTAR=Symbol("globstar **");b.minimatch.GLOBSTAR=b.GLOBSTAR;var Ch="[^/]",Dh=Ch+"*?",Rh="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Nh="(?:(?!(?:\\/|^)\\.).)*?",Mh=(i,t={})=>e=>(0,b.minimatch)(e,i,t);b.filter=Mh;b.minimatch.filter=b.filter;var G=(i,t={})=>Object.assign({},i,t),$h=i=>{if(!i||typeof i!="object"||!Object.keys(i).length)return b.minimatch;let t=b.minimatch;return Object.assign((s,n,r={})=>t(s,n,G(i,r)),{Minimatch:class extends t.Minimatch{constructor(n,r={}){super(n,G(i,r))}static defaults(n){return t.defaults(G(i,n)).Minimatch}},AST:class extends t.AST{constructor(n,r,o={}){super(n,r,G(i,o))}static fromGlob(n,r={}){return t.AST.fromGlob(n,G(i,r))}},unescape:(s,n={})=>t.unescape(s,G(i,n)),escape:(s,n={})=>t.escape(s,G(i,n)),filter:(s,n={})=>t.filter(s,G(i,n)),defaults:s=>t.defaults(G(i,s)),makeRe:(s,n={})=>t.makeRe(s,G(i,n)),braceExpand:(s,n={})=>t.braceExpand(s,G(i,n)),match:(s,n,r={})=>t.match(s,n,G(i,r)),sep:t.sep,GLOBSTAR:b.GLOBSTAR})};b.defaults=$h;b.minimatch.defaults=b.defaults;var Fh=(i,t={})=>((0,ge.assertValidPattern)(i),t.nobrace||!/\{(?:(?!\{).)*\}/.test(i)?[i]:(0,ch.default)(i));b.braceExpand=Fh;b.minimatch.braceExpand=b.braceExpand;var Lh=(i,t={})=>new lt(i,t).makeRe();b.makeRe=Lh;b.minimatch.makeRe=b.makeRe;var Ih=(i,t,e={})=>{let s=new lt(t,e);return i=i.filter(n=>s.match(n)),s.options.nonull&&!i.length&&i.push(t),i};b.match=Ih;b.minimatch.match=b.match;var Vn=/[?*]|[+@!]\(.*?\)|\[|\]/,Wh=i=>i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),lt=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(t,e={}){(0,ge.assertValidPattern)(t),e=e||{},this.options=e,this.pattern=t,this.platform=e.platform||Zn,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!e.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!e.nonegate,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=e.windowsNoMagicRoot!==void 0?e.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let t of this.set)for(let e of t)if(typeof e!="string")return!0;return!1}debug(...t){}make(){let t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],e.debug&&(this.debug=(...r)=>console.error(...r)),this.debug(this.pattern,this.globSet);let s=this.globSet.map(r=>this.slashSplit(r));this.globParts=this.preprocess(s),this.debug(this.pattern,this.globParts);let n=this.globParts.map((r,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let h=r[0]===""&&r[1]===""&&(r[2]==="?"||!Vn.test(r[2]))&&!Vn.test(r[3]),c=/^[a-z]:/i.test(r[0]);if(h)return[...r.slice(0,4),...r.slice(4).map(l=>this.parse(l))];if(c)return[r[0],...r.slice(1).map(l=>this.parse(l))]}return r.map(h=>this.parse(h))});if(this.debug(this.pattern,n),this.set=n.filter(r=>r.indexOf(!1)===-1),this.isWindows)for(let r=0;r<this.set.length;r++){let o=this.set[r];o[0]===""&&o[1]===""&&this.globParts[r][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let s=0;s<t.length;s++)for(let n=0;n<t[s].length;n++)t[s][n]==="**"&&(t[s][n]="*");let{optimizationLevel:e=1}=this.options;return e>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):e>=1?t=this.levelOneOptimize(t):t=this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map(e=>{let s=-1;for(;(s=e.indexOf("**",s+1))!==-1;){let n=s;for(;e[n+1]==="**";)n++;n!==s&&e.splice(s,n-s)}return e})}levelOneOptimize(t){return t.map(e=>(e=e.reduce((s,n)=>{let r=s[s.length-1];return n==="**"&&r==="**"?s:n===".."&&r&&r!==".."&&r!=="."&&r!=="**"?(s.pop(),s):(s.push(n),s)},[]),e.length===0?[""]:e))}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let e=!1;do{if(e=!1,!this.preserveMultipleSlashes){for(let n=1;n<t.length-1;n++){let r=t[n];n===1&&r===""&&t[0]===""||(r==="."||r==="")&&(e=!0,t.splice(n,1),n--)}t[0]==="."&&t.length===2&&(t[1]==="."||t[1]==="")&&(e=!0,t.pop())}let s=0;for(;(s=t.indexOf("..",s+1))!==-1;){let n=t[s-1];n&&n!=="."&&n!==".."&&n!=="**"&&(e=!0,t.splice(s-1,2),s-=2)}}while(e);return t.length===0?[""]:t}firstPhasePreProcess(t){let e=!1;do{e=!1;for(let s of t){let n=-1;for(;(n=s.indexOf("**",n+1))!==-1;){let o=n;for(;s[o+1]==="**";)o++;o>n&&s.splice(n+1,o-n);let a=s[n+1],h=s[n+2],c=s[n+3];if(a!==".."||!h||h==="."||h===".."||!c||c==="."||c==="..")continue;e=!0,s.splice(n,1);let l=s.slice(0);l[n]="**",t.push(l),n--}if(!this.preserveMultipleSlashes){for(let o=1;o<s.length-1;o++){let a=s[o];o===1&&a===""&&s[0]===""||(a==="."||a==="")&&(e=!0,s.splice(o,1),o--)}s[0]==="."&&s.length===2&&(s[1]==="."||s[1]==="")&&(e=!0,s.pop())}let r=0;for(;(r=s.indexOf("..",r+1))!==-1;){let o=s[r-1];if(o&&o!=="."&&o!==".."&&o!=="**"){e=!0;let h=r===1&&s[r+1]==="**"?["."]:[];s.splice(r-1,2,...h),s.length===0&&s.push(""),r-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++)for(let s=e+1;s<t.length;s++){let n=this.partsMatch(t[e],t[s],!this.preserveMultipleSlashes);if(n){t[e]=[],t[s]=n;break}}return t.filter(e=>e.length)}partsMatch(t,e,s=!1){let n=0,r=0,o=[],a="";for(;n<t.length&&r<e.length;)if(t[n]===e[r])o.push(a==="b"?e[r]:t[n]),n++,r++;else if(s&&t[n]==="**"&&e[r]===t[n+1])o.push(t[n]),n++;else if(s&&e[r]==="**"&&t[n]===e[r+1])o.push(e[r]),r++;else if(t[n]==="*"&&e[r]&&(this.options.dot||!e[r].startsWith("."))&&e[r]!=="**"){if(a==="b")return!1;a="a",o.push(t[n]),n++,r++}else if(e[r]==="*"&&t[n]&&(this.options.dot||!t[n].startsWith("."))&&t[n]!=="**"){if(a==="a")return!1;a="b",o.push(e[r]),n++,r++}else return!1;return t.length===e.length&&o}parseNegate(){if(this.nonegate)return;let t=this.pattern,e=!1,s=0;for(let n=0;n<t.length&&t.charAt(n)==="!";n++)e=!e,s++;s&&(this.pattern=t.slice(s)),this.negate=e}matchOne(t,e,s=!1){let n=this.options;if(this.isWindows){let p=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),g=!p&&t[0]===""&&t[1]===""&&t[2]==="?"&&/^[a-z]:$/i.test(t[3]),w=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),S=!w&&e[0]===""&&e[1]===""&&e[2]==="?"&&typeof e[3]=="string"&&/^[a-z]:$/i.test(e[3]),y=g?3:p?0:void 0,E=S?3:w?0:void 0;if(typeof y=="number"&&typeof E=="number"){let[k,_]=[t[y],e[E]];k.toLowerCase()===_.toLowerCase()&&(e[E]=k,E>y?e=e.slice(E):y>E&&(t=t.slice(y)))}}let{optimizationLevel:r=1}=this.options;r>=2&&(t=this.levelTwoFileOptimize(t)),this.debug("matchOne",this,{file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var o=0,a=0,h=t.length,c=e.length;o<h&&a<c;o++,a++){this.debug("matchOne loop");var l=e[a],f=t[o];if(this.debug(e,l,f),l===!1)return!1;if(l===b.GLOBSTAR){this.debug("GLOBSTAR",[e,l,f]);var d=o,u=a+1;if(u===c){for(this.debug("** at the end");o<h;o++)if(t[o]==="."||t[o]===".."||!n.dot&&t[o].charAt(0)===".")return!1;return!0}for(;d<h;){var m=t[d];if(this.debug(`
globstar while`,t,d,e,u,m),this.matchOne(t.slice(d),e.slice(u),s))return this.debug("globstar found match!",d,h,m),!0;if(m==="."||m===".."||!n.dot&&m.charAt(0)==="."){this.debug("dot detected!",t,d,e,u);break}this.debug("globstar swallow a segment, and continue"),d++}return!!(s&&(this.debug(`
>>> no match, partial?`,t,d,e,u),d===h))}let p;if(typeof l=="string"?(p=f===l,this.debug("string match",l,f,p)):(p=l.test(f),this.debug("pattern match",l,f,p)),!p)return!1}if(o===h&&a===c)return!0;if(o===h)return s;if(a===c)return o===h-1&&t[o]==="";throw new Error("wtf?")}braceExpand(){return(0,b.braceExpand)(this.pattern,this.options)}parse(t){(0,ge.assertValidPattern)(t);let e=this.options;if(t==="**")return b.GLOBSTAR;if(t==="")return"";let s,n=null;(s=t.match(_h))?n=e.dot?Oh:xh:(s=t.match(dh))?n=(e.nocase?e.dot?wh:mh:e.dot?gh:ph)(s[1]):(s=t.match(Ah))?n=(e.nocase?e.dot?Th:kh:e.dot?jh:Ph)(s):(s=t.match(yh))?n=e.dot?Sh:bh:(s=t.match(Eh))&&(n=vh);let r=Jn.AST.fromGlob(t,this.options).toMMPattern();return n&&typeof r=="object"&&Reflect.defineProperty(r,"test",{value:n}),r}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let t=this.set;if(!t.length)return this.regexp=!1,this.regexp;let e=this.options,s=e.noglobstar?Dh:e.dot?Rh:Nh,n=new Set(e.nocase?["i"]:[]),r=t.map(h=>{let c=h.map(l=>{if(l instanceof RegExp)for(let f of l.flags.split(""))n.add(f);return typeof l=="string"?Wh(l):l===b.GLOBSTAR?b.GLOBSTAR:l._src});return c.forEach((l,f)=>{let d=c[f+1],u=c[f-1];l!==b.GLOBSTAR||u===b.GLOBSTAR||(u===void 0?d!==void 0&&d!==b.GLOBSTAR?c[f+1]="(?:\\/|"+s+"\\/)?"+d:c[f]=s:d===void 0?c[f-1]=u+"(?:\\/|"+s+")?":d!==b.GLOBSTAR&&(c[f-1]=u+"(?:\\/|\\/"+s+"\\/)"+d,c[f+1]=b.GLOBSTAR))}),c.filter(l=>l!==b.GLOBSTAR).join("/")}).join("|"),[o,a]=t.length>1?["(?:",")"]:["",""];r="^"+o+r+a+"$",this.negate&&(r="^(?!"+r+").+$");try{this.regexp=new RegExp(r,[...n].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(t)?["",...t.split(/\/+/)]:t.split(/\/+/)}match(t,e=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&e)return!0;let s=this.options;this.isWindows&&(t=t.split("\\").join("/"));let n=this.slashSplit(t);this.debug(this.pattern,"split",n);let r=this.set;this.debug(this.pattern,"set",r);let o=n[n.length-1];if(!o)for(let a=n.length-2;!o&&a>=0;a--)o=n[a];for(let a=0;a<r.length;a++){let h=r[a],c=n;if(s.matchBase&&h.length===1&&(c=[o]),this.matchOne(c,h,e))return s.flipNegate?!0:!this.negate}return s.flipNegate?!1:this.negate}static defaults(t){return b.minimatch.defaults(t).Minimatch}};b.Minimatch=lt;var Bh=ys();Object.defineProperty(b,"AST",{enumerable:!0,get:function(){return Bh.AST}});var qh=bs();Object.defineProperty(b,"escape",{enumerable:!0,get:function(){return qh.escape}});var Uh=le();Object.defineProperty(b,"unescape",{enumerable:!0,get:function(){return Uh.unescape}});b.minimatch.AST=Jn.AST;b.minimatch.Minimatch=lt;b.minimatch.escape=lh.escape;b.minimatch.unescape=fh.unescape});var ir=v(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.LRUCache=void 0;var wt=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,tr=new Set,Ss=typeof process=="object"&&process?process:{},er=(i,t,e,s)=>{typeof Ss.emitWarning=="function"?Ss.emitWarning(i,t,e,s):console.error(`[${e}] ${t}: ${i}`)},me=globalThis.AbortController,Qn=globalThis.AbortSignal;if(typeof me>"u"){Qn=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(s,n){this._onabort.push(n)}},me=class{constructor(){t()}signal=new Qn;abort(s){if(!this.signal.aborted){this.signal.reason=s,this.signal.aborted=!0;for(let n of this.signal._onabort)n(s);this.signal.onabort?.(s)}}};let i=Ss.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{i&&(i=!1,er("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}var zh=i=>!tr.has(i),pf=Symbol("type"),ot=i=>i&&i===Math.floor(i)&&i>0&&isFinite(i),sr=i=>ot(i)?i<=Math.pow(2,8)?Uint8Array:i<=Math.pow(2,16)?Uint16Array:i<=Math.pow(2,32)?Uint32Array:i<=Number.MAX_SAFE_INTEGER?yt:null:null,yt=class extends Array{constructor(t){super(t),this.fill(0)}},Es=class i{heap;length;static#t=!1;static create(t){let e=sr(t);if(!e)return[];i.#t=!0;let s=new i(t,e);return i.#t=!1,s}constructor(t,e){if(!i.#t)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},vs=class i{#t;#e;#i;#s;#o;#u;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#c;#l;#a;#h;#r;#w;#y;#p;#d;#_;#m;#x;#O;#S;#E;#v;#g;static unsafeExposeInternals(t){return{starts:t.#O,ttls:t.#S,sizes:t.#x,keyMap:t.#a,keyList:t.#h,valList:t.#r,next:t.#w,prev:t.#y,get head(){return t.#p},get tail(){return t.#d},free:t.#_,isBackgroundFetch:e=>t.#f(e),backgroundFetch:(e,s,n,r)=>t.#L(e,s,n,r),moveToTail:e=>t.#W(e),indexes:e=>t.#k(e),rindexes:e=>t.#T(e),isStale:e=>t.#b(e)}}get max(){return this.#t}get maxSize(){return this.#e}get calculatedSize(){return this.#l}get size(){return this.#c}get fetchMethod(){return this.#o}get memoMethod(){return this.#u}get dispose(){return this.#i}get disposeAfter(){return this.#s}constructor(t){let{max:e=0,ttl:s,ttlResolution:n=1,ttlAutopurge:r,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:h,dispose:c,disposeAfter:l,noDisposeOnSet:f,noUpdateTTL:d,maxSize:u=0,maxEntrySize:m=0,sizeCalculation:p,fetchMethod:g,memoMethod:w,noDeleteOnFetchRejection:S,noDeleteOnStaleGet:y,allowStaleOnFetchRejection:E,allowStaleOnFetchAbort:k,ignoreFetchAbort:_}=t;if(e!==0&&!ot(e))throw new TypeError("max option must be a nonnegative integer");let C=e?sr(e):Array;if(!C)throw new Error("invalid max value: "+e);if(this.#t=e,this.#e=u,this.maxEntrySize=m||this.#e,this.sizeCalculation=p,this.sizeCalculation){if(!this.#e&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(w!==void 0&&typeof w!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#u=w,g!==void 0&&typeof g!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#o=g,this.#v=!!g,this.#a=new Map,this.#h=new Array(e).fill(void 0),this.#r=new Array(e).fill(void 0),this.#w=new C(e),this.#y=new C(e),this.#p=0,this.#d=0,this.#_=Es.create(e),this.#c=0,this.#l=0,typeof c=="function"&&(this.#i=c),typeof l=="function"?(this.#s=l,this.#m=[]):(this.#s=void 0,this.#m=void 0),this.#E=!!this.#i,this.#g=!!this.#s,this.noDisposeOnSet=!!f,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!S,this.allowStaleOnFetchRejection=!!E,this.allowStaleOnFetchAbort=!!k,this.ignoreFetchAbort=!!_,this.maxEntrySize!==0){if(this.#e!==0&&!ot(this.#e))throw new TypeError("maxSize must be a positive integer if specified");if(!ot(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#P()}if(this.allowStale=!!h,this.noDeleteOnStaleGet=!!y,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=ot(n)||n===0?n:1,this.ttlAutopurge=!!r,this.ttl=s||0,this.ttl){if(!ot(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#j()}if(this.#t===0&&this.ttl===0&&this.#e===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#e){let B="LRU_CACHE_UNBOUNDED";zh(B)&&(tr.add(B),er("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",B,i))}}getRemainingTTL(t){return this.#a.has(t)?1/0:0}#j(){let t=new yt(this.#t),e=new yt(this.#t);this.#S=t,this.#O=e,this.#D=(r,o,a=wt.now())=>{if(e[r]=o!==0?a:0,t[r]=o,o!==0&&this.ttlAutopurge){let h=setTimeout(()=>{this.#b(r)&&this.#C(this.#h[r],"expire")},o+1);h.unref&&h.unref()}},this.#A=r=>{e[r]=t[r]!==0?wt.now():0},this.#n=(r,o)=>{if(t[o]){let a=t[o],h=e[o];if(!a||!h)return;r.ttl=a,r.start=h,r.now=s||n();let c=r.now-h;r.remainingTTL=a-c}};let s=0,n=()=>{let r=wt.now();if(this.ttlResolution>0){s=r;let o=setTimeout(()=>s=0,this.ttlResolution);o.unref&&o.unref()}return r};this.getRemainingTTL=r=>{let o=this.#a.get(r);if(o===void 0)return 0;let a=t[o],h=e[o];if(!a||!h)return 1/0;let c=(s||n())-h;return a-c},this.#b=r=>{let o=e[r],a=t[r];return!!a&&!!o&&(s||n())-o>a}}#A=()=>{};#n=()=>{};#D=()=>{};#b=()=>!1;#P(){let t=new yt(this.#t);this.#l=0,this.#x=t,this.#R=e=>{this.#l-=t[e],t[e]=0},this.#M=(e,s,n,r)=>{if(this.#f(s))return 0;if(!ot(n))if(r){if(typeof r!="function")throw new TypeError("sizeCalculation must be a function");if(n=r(s,e),!ot(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return n},this.#N=(e,s,n)=>{if(t[e]=s,this.#e){let r=this.#e-t[e];for(;this.#l>r;)this.#F(!0)}this.#l+=t[e],n&&(n.entrySize=s,n.totalCalculatedSize=this.#l)}}#R=t=>{};#N=(t,e,s)=>{};#M=(t,e,s,n)=>{if(s||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:t=this.allowStale}={}){if(this.#c)for(let e=this.#d;!(!this.#$(e)||((t||!this.#b(e))&&(yield e),e===this.#p));)e=this.#y[e]}*#T({allowStale:t=this.allowStale}={}){if(this.#c)for(let e=this.#p;!(!this.#$(e)||((t||!this.#b(e))&&(yield e),e===this.#d));)e=this.#w[e]}#$(t){return t!==void 0&&this.#a.get(this.#h[t])===t}*entries(){for(let t of this.#k())this.#r[t]!==void 0&&this.#h[t]!==void 0&&!this.#f(this.#r[t])&&(yield[this.#h[t],this.#r[t]])}*rentries(){for(let t of this.#T())this.#r[t]!==void 0&&this.#h[t]!==void 0&&!this.#f(this.#r[t])&&(yield[this.#h[t],this.#r[t]])}*keys(){for(let t of this.#k()){let e=this.#h[t];e!==void 0&&!this.#f(this.#r[t])&&(yield e)}}*rkeys(){for(let t of this.#T()){let e=this.#h[t];e!==void 0&&!this.#f(this.#r[t])&&(yield e)}}*values(){for(let t of this.#k())this.#r[t]!==void 0&&!this.#f(this.#r[t])&&(yield this.#r[t])}*rvalues(){for(let t of this.#T())this.#r[t]!==void 0&&!this.#f(this.#r[t])&&(yield this.#r[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(let s of this.#k()){let n=this.#r[s],r=this.#f(n)?n.__staleWhileFetching:n;if(r!==void 0&&t(r,this.#h[s],this))return this.get(this.#h[s],e)}}forEach(t,e=this){for(let s of this.#k()){let n=this.#r[s],r=this.#f(n)?n.__staleWhileFetching:n;r!==void 0&&t.call(e,r,this.#h[s],this)}}rforEach(t,e=this){for(let s of this.#T()){let n=this.#r[s],r=this.#f(n)?n.__staleWhileFetching:n;r!==void 0&&t.call(e,r,this.#h[s],this)}}purgeStale(){let t=!1;for(let e of this.#T({allowStale:!0}))this.#b(e)&&(this.#C(this.#h[e],"expire"),t=!0);return t}info(t){let e=this.#a.get(t);if(e===void 0)return;let s=this.#r[e],n=this.#f(s)?s.__staleWhileFetching:s;if(n===void 0)return;let r={value:n};if(this.#S&&this.#O){let o=this.#S[e],a=this.#O[e];if(o&&a){let h=o-(wt.now()-a);r.ttl=h,r.start=Date.now()}}return this.#x&&(r.size=this.#x[e]),r}dump(){let t=[];for(let e of this.#k({allowStale:!0})){let s=this.#h[e],n=this.#r[e],r=this.#f(n)?n.__staleWhileFetching:n;if(r===void 0||s===void 0)continue;let o={value:r};if(this.#S&&this.#O){o.ttl=this.#S[e];let a=wt.now()-this.#O[e];o.start=Math.floor(Date.now()-a)}this.#x&&(o.size=this.#x[e]),t.unshift([s,o])}return t}load(t){this.clear();for(let[e,s]of t){if(s.start){let n=Date.now()-s.start;s.start=wt.now()-n}this.set(e,s.value,s)}}set(t,e,s={}){if(e===void 0)return this.delete(t),this;let{ttl:n=this.ttl,start:r,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:h}=s,{noUpdateTTL:c=this.noUpdateTTL}=s,l=this.#M(t,e,s.size||0,a);if(this.maxEntrySize&&l>this.maxEntrySize)return h&&(h.set="miss",h.maxEntrySizeExceeded=!0),this.#C(t,"set"),this;let f=this.#c===0?void 0:this.#a.get(t);if(f===void 0)f=this.#c===0?this.#d:this.#_.length!==0?this.#_.pop():this.#c===this.#t?this.#F(!1):this.#c,this.#h[f]=t,this.#r[f]=e,this.#a.set(t,f),this.#w[this.#d]=f,this.#y[f]=this.#d,this.#d=f,this.#c++,this.#N(f,l,h),h&&(h.set="add"),c=!1;else{this.#W(f);let d=this.#r[f];if(e!==d){if(this.#v&&this.#f(d)){d.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:u}=d;u!==void 0&&!o&&(this.#E&&this.#i?.(u,t,"set"),this.#g&&this.#m?.push([u,t,"set"]))}else o||(this.#E&&this.#i?.(d,t,"set"),this.#g&&this.#m?.push([d,t,"set"]));if(this.#R(f),this.#N(f,l,h),this.#r[f]=e,h){h.set="replace";let u=d&&this.#f(d)?d.__staleWhileFetching:d;u!==void 0&&(h.oldValue=u)}}else h&&(h.set="update")}if(n!==0&&!this.#S&&this.#j(),this.#S&&(c||this.#D(f,n,r),h&&this.#n(h,f)),!o&&this.#g&&this.#m){let d=this.#m,u;for(;u=d?.shift();)this.#s?.(...u)}return this}pop(){try{for(;this.#c;){let t=this.#r[this.#p];if(this.#F(!0),this.#f(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(this.#g&&this.#m){let t=this.#m,e;for(;e=t?.shift();)this.#s?.(...e)}}}#F(t){let e=this.#p,s=this.#h[e],n=this.#r[e];return this.#v&&this.#f(n)?n.__abortController.abort(new Error("evicted")):(this.#E||this.#g)&&(this.#E&&this.#i?.(n,s,"evict"),this.#g&&this.#m?.push([n,s,"evict"])),this.#R(e),t&&(this.#h[e]=void 0,this.#r[e]=void 0,this.#_.push(e)),this.#c===1?(this.#p=this.#d=0,this.#_.length=0):this.#p=this.#w[e],this.#a.delete(s),this.#c--,e}has(t,e={}){let{updateAgeOnHas:s=this.updateAgeOnHas,status:n}=e,r=this.#a.get(t);if(r!==void 0){let o=this.#r[r];if(this.#f(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#b(r))n&&(n.has="stale",this.#n(n,r));else return s&&this.#A(r),n&&(n.has="hit",this.#n(n,r)),!0}else n&&(n.has="miss");return!1}peek(t,e={}){let{allowStale:s=this.allowStale}=e,n=this.#a.get(t);if(n===void 0||!s&&this.#b(n))return;let r=this.#r[n];return this.#f(r)?r.__staleWhileFetching:r}#L(t,e,s,n){let r=e===void 0?void 0:this.#r[e];if(this.#f(r))return r;let o=new me,{signal:a}=s;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let h={signal:o.signal,options:s,context:n},c=(p,g=!1)=>{let{aborted:w}=o.signal,S=s.ignoreFetchAbort&&p!==void 0;if(s.status&&(w&&!g?(s.status.fetchAborted=!0,s.status.fetchError=o.signal.reason,S&&(s.status.fetchAbortIgnored=!0)):s.status.fetchResolved=!0),w&&!S&&!g)return f(o.signal.reason);let y=u;return this.#r[e]===u&&(p===void 0?y.__staleWhileFetching?this.#r[e]=y.__staleWhileFetching:this.#C(t,"fetch"):(s.status&&(s.status.fetchUpdated=!0),this.set(t,p,h.options))),p},l=p=>(s.status&&(s.status.fetchRejected=!0,s.status.fetchError=p),f(p)),f=p=>{let{aborted:g}=o.signal,w=g&&s.allowStaleOnFetchAbort,S=w||s.allowStaleOnFetchRejection,y=S||s.noDeleteOnFetchRejection,E=u;if(this.#r[e]===u&&(!y||E.__staleWhileFetching===void 0?this.#C(t,"fetch"):w||(this.#r[e]=E.__staleWhileFetching)),S)return s.status&&E.__staleWhileFetching!==void 0&&(s.status.returnedStale=!0),E.__staleWhileFetching;if(E.__returned===E)throw p},d=(p,g)=>{let w=this.#o?.(t,r,h);w&&w instanceof Promise&&w.then(S=>p(S===void 0?void 0:S),g),o.signal.addEventListener("abort",()=>{(!s.ignoreFetchAbort||s.allowStaleOnFetchAbort)&&(p(void 0),s.allowStaleOnFetchAbort&&(p=S=>c(S,!0)))})};s.status&&(s.status.fetchDispatched=!0);let u=new Promise(d).then(c,l),m=Object.assign(u,{__abortController:o,__staleWhileFetching:r,__returned:void 0});return e===void 0?(this.set(t,m,{...h.options,status:void 0}),e=this.#a.get(t)):this.#r[e]=m,m}#f(t){if(!this.#v)return!1;let e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof me}async fetch(t,e={}){let{allowStale:s=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:h=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:u=this.ignoreFetchAbort,allowStaleOnFetchAbort:m=this.allowStaleOnFetchAbort,context:p,forceRefresh:g=!1,status:w,signal:S}=e;if(!this.#v)return w&&(w.fetch="get"),this.get(t,{allowStale:s,updateAgeOnGet:n,noDeleteOnStaleGet:r,status:w});let y={allowStale:s,updateAgeOnGet:n,noDeleteOnStaleGet:r,ttl:o,noDisposeOnSet:a,size:h,sizeCalculation:c,noUpdateTTL:l,noDeleteOnFetchRejection:f,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:m,ignoreFetchAbort:u,status:w,signal:S},E=this.#a.get(t);if(E===void 0){w&&(w.fetch="miss");let k=this.#L(t,E,y,p);return k.__returned=k}else{let k=this.#r[E];if(this.#f(k)){let x=s&&k.__staleWhileFetching!==void 0;return w&&(w.fetch="inflight",x&&(w.returnedStale=!0)),x?k.__staleWhileFetching:k.__returned=k}let _=this.#b(E);if(!g&&!_)return w&&(w.fetch="hit"),this.#W(E),n&&this.#A(E),w&&this.#n(w,E),k;let C=this.#L(t,E,y,p),j=C.__staleWhileFetching!==void 0&&s;return w&&(w.fetch=_?"stale":"refresh",j&&_&&(w.returnedStale=!0)),j?C.__staleWhileFetching:C.__returned=C}}async forceFetch(t,e={}){let s=await this.fetch(t,e);if(s===void 0)throw new Error("fetch() returned undefined");return s}memo(t,e={}){let s=this.#u;if(!s)throw new Error("no memoMethod provided to constructor");let{context:n,forceRefresh:r,...o}=e,a=this.get(t,o);if(!r&&a!==void 0)return a;let h=s(t,a,{options:o,context:n});return this.set(t,h,o),h}get(t,e={}){let{allowStale:s=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,status:o}=e,a=this.#a.get(t);if(a!==void 0){let h=this.#r[a],c=this.#f(h);return o&&this.#n(o,a),this.#b(a)?(o&&(o.get="stale"),c?(o&&s&&h.__staleWhileFetching!==void 0&&(o.returnedStale=!0),s?h.__staleWhileFetching:void 0):(r||this.#C(t,"expire"),o&&s&&(o.returnedStale=!0),s?h:void 0)):(o&&(o.get="hit"),c?h.__staleWhileFetching:(this.#W(a),n&&this.#A(a),h))}else o&&(o.get="miss")}#I(t,e){this.#y[e]=t,this.#w[t]=e}#W(t){t!==this.#d&&(t===this.#p?this.#p=this.#w[t]:this.#I(this.#y[t],this.#w[t]),this.#I(this.#d,t),this.#d=t)}delete(t){return this.#C(t,"delete")}#C(t,e){let s=!1;if(this.#c!==0){let n=this.#a.get(t);if(n!==void 0)if(s=!0,this.#c===1)this.#B(e);else{this.#R(n);let r=this.#r[n];if(this.#f(r)?r.__abortController.abort(new Error("deleted")):(this.#E||this.#g)&&(this.#E&&this.#i?.(r,t,e),this.#g&&this.#m?.push([r,t,e])),this.#a.delete(t),this.#h[n]=void 0,this.#r[n]=void 0,n===this.#d)this.#d=this.#y[n];else if(n===this.#p)this.#p=this.#w[n];else{let o=this.#y[n];this.#w[o]=this.#w[n];let a=this.#w[n];this.#y[a]=this.#y[n]}this.#c--,this.#_.push(n)}}if(this.#g&&this.#m?.length){let n=this.#m,r;for(;r=n?.shift();)this.#s?.(...r)}return s}clear(){return this.#B("delete")}#B(t){for(let e of this.#T({allowStale:!0})){let s=this.#r[e];if(this.#f(s))s.__abortController.abort(new Error("deleted"));else{let n=this.#h[e];this.#E&&this.#i?.(s,n,t),this.#g&&this.#m?.push([s,n,t])}}if(this.#a.clear(),this.#r.fill(void 0),this.#h.fill(void 0),this.#S&&this.#O&&(this.#S.fill(0),this.#O.fill(0)),this.#x&&this.#x.fill(0),this.#p=0,this.#d=0,this.#_.length=0,this.#l=0,this.#c=0,this.#g&&this.#m){let e=this.#m,s;for(;s=e?.shift();)this.#s?.(...s)}}};we.LRUCache=vs});var Ps=v(W=>{"use strict";var Gh=W&&W.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(W,"__esModule",{value:!0});W.Minipass=W.isWritable=W.isReadable=W.isStream=void 0;var nr=typeof process=="object"&&process?process:{stdout:null,stderr:null},js=A("events"),hr=Gh(A("stream")),Hh=A("string_decoder"),Kh=i=>!!i&&typeof i=="object"&&(i instanceof xe||i instanceof hr.default||(0,W.isReadable)(i)||(0,W.isWritable)(i));W.isStream=Kh;var Vh=i=>!!i&&typeof i=="object"&&i instanceof js.EventEmitter&&typeof i.pipe=="function"&&i.pipe!==hr.default.Writable.prototype.pipe;W.isReadable=Vh;var Jh=i=>!!i&&typeof i=="object"&&i instanceof js.EventEmitter&&typeof i.write=="function"&&typeof i.end=="function";W.isWritable=Jh;var st=Symbol("EOF"),it=Symbol("maybeEmitEnd"),at=Symbol("emittedEnd"),ye=Symbol("emittingEnd"),jt=Symbol("emittedError"),be=Symbol("closed"),rr=Symbol("read"),Se=Symbol("flush"),or=Symbol("flushChunk"),V=Symbol("encoding"),bt=Symbol("decoder"),N=Symbol("flowing"),Pt=Symbol("paused"),St=Symbol("resume"),M=Symbol("buffer"),I=Symbol("pipes"),$=Symbol("bufferLength"),_s=Symbol("bufferPush"),Ee=Symbol("bufferShift"),L=Symbol("objectMode"),D=Symbol("destroyed"),xs=Symbol("error"),Os=Symbol("emitData"),ar=Symbol("emitEnd"),As=Symbol("emitEnd2"),X=Symbol("async"),ks=Symbol("abort"),ve=Symbol("aborted"),Ct=Symbol("signal"),ft=Symbol("dataListeners"),U=Symbol("discarded"),Dt=i=>Promise.resolve().then(i),Yh=i=>i(),Xh=i=>i==="end"||i==="finish"||i==="prefinish",Zh=i=>i instanceof ArrayBuffer||!!i&&typeof i=="object"&&i.constructor&&i.constructor.name==="ArrayBuffer"&&i.byteLength>=0,Qh=i=>!Buffer.isBuffer(i)&&ArrayBuffer.isView(i),_e=class{src;dest;opts;ondrain;constructor(t,e,s){this.src=t,this.dest=e,this.opts=s,this.ondrain=()=>t[St](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(t){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Ts=class extends _e{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(t,e,s){super(t,e,s),this.proxyErrors=n=>e.emit("error",n),t.on("error",this.proxyErrors)}},tc=i=>!!i.objectMode,ec=i=>!i.objectMode&&!!i.encoding&&i.encoding!=="buffer",xe=class extends js.EventEmitter{[N]=!1;[Pt]=!1;[I]=[];[M]=[];[L];[V];[X];[bt];[st]=!1;[at]=!1;[ye]=!1;[be]=!1;[jt]=null;[$]=0;[D]=!1;[Ct];[ve]=!1;[ft]=0;[U]=!1;writable=!0;readable=!0;constructor(...t){let e=t[0]||{};if(super(),e.objectMode&&typeof e.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");tc(e)?(this[L]=!0,this[V]=null):ec(e)?(this[V]=e.encoding,this[L]=!1):(this[L]=!1,this[V]=null),this[X]=!!e.async,this[bt]=this[V]?new Hh.StringDecoder(this[V]):null,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[M]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[I]});let{signal:s}=e;s&&(this[Ct]=s,s.aborted?this[ks]():s.addEventListener("abort",()=>this[ks]()))}get bufferLength(){return this[$]}get encoding(){return this[V]}set encoding(t){throw new Error("Encoding must be set at instantiation time")}setEncoding(t){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[L]}set objectMode(t){throw new Error("objectMode must be set at instantiation time")}get async(){return this[X]}set async(t){this[X]=this[X]||!!t}[ks](){this[ve]=!0,this.emit("abort",this[Ct]?.reason),this.destroy(this[Ct]?.reason)}get aborted(){return this[ve]}set aborted(t){}write(t,e,s){if(this[ve])return!1;if(this[st])throw new Error("write after end");if(this[D])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof e=="function"&&(s=e,e="utf8"),e||(e="utf8");let n=this[X]?Dt:Yh;if(!this[L]&&!Buffer.isBuffer(t)){if(Qh(t))t=Buffer.from(t.buffer,t.byteOffset,t.byteLength);else if(Zh(t))t=Buffer.from(t);else if(typeof t!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[L]?(this[N]&&this[$]!==0&&this[Se](!0),this[N]?this.emit("data",t):this[_s](t),this[$]!==0&&this.emit("readable"),s&&n(s),this[N]):t.length?(typeof t=="string"&&!(e===this[V]&&!this[bt]?.lastNeed)&&(t=Buffer.from(t,e)),Buffer.isBuffer(t)&&this[V]&&(t=this[bt].write(t)),this[N]&&this[$]!==0&&this[Se](!0),this[N]?this.emit("data",t):this[_s](t),this[$]!==0&&this.emit("readable"),s&&n(s),this[N]):(this[$]!==0&&this.emit("readable"),s&&n(s),this[N])}read(t){if(this[D])return null;if(this[U]=!1,this[$]===0||t===0||t&&t>this[$])return this[it](),null;this[L]&&(t=null),this[M].length>1&&!this[L]&&(this[M]=[this[V]?this[M].join(""):Buffer.concat(this[M],this[$])]);let e=this[rr](t||null,this[M][0]);return this[it](),e}[rr](t,e){if(this[L])this[Ee]();else{let s=e;t===s.length||t===null?this[Ee]():typeof s=="string"?(this[M][0]=s.slice(t),e=s.slice(0,t),this[$]-=t):(this[M][0]=s.subarray(t),e=s.subarray(0,t),this[$]-=t)}return this.emit("data",e),!this[M].length&&!this[st]&&this.emit("drain"),e}end(t,e,s){return typeof t=="function"&&(s=t,t=void 0),typeof e=="function"&&(s=e,e="utf8"),t!==void 0&&this.write(t,e),s&&this.once("end",s),this[st]=!0,this.writable=!1,(this[N]||!this[Pt])&&this[it](),this}[St](){this[D]||(!this[ft]&&!this[I].length&&(this[U]=!0),this[Pt]=!1,this[N]=!0,this.emit("resume"),this[M].length?this[Se]():this[st]?this[it]():this.emit("drain"))}resume(){return this[St]()}pause(){this[N]=!1,this[Pt]=!0,this[U]=!1}get destroyed(){return this[D]}get flowing(){return this[N]}get paused(){return this[Pt]}[_s](t){this[L]?this[$]+=1:this[$]+=t.length,this[M].push(t)}[Ee](){return this[L]?this[$]-=1:this[$]-=this[M][0].length,this[M].shift()}[Se](t=!1){do;while(this[or](this[Ee]())&&this[M].length);!t&&!this[M].length&&!this[st]&&this.emit("drain")}[or](t){return this.emit("data",t),this[N]}pipe(t,e){if(this[D])return t;this[U]=!1;let s=this[at];return e=e||{},t===nr.stdout||t===nr.stderr?e.end=!1:e.end=e.end!==!1,e.proxyErrors=!!e.proxyErrors,s?e.end&&t.end():(this[I].push(e.proxyErrors?new Ts(this,t,e):new _e(this,t,e)),this[X]?Dt(()=>this[St]()):this[St]()),t}unpipe(t){let e=this[I].find(s=>s.dest===t);e&&(this[I].length===1?(this[N]&&this[ft]===0&&(this[N]=!1),this[I]=[]):this[I].splice(this[I].indexOf(e),1),e.unpipe())}addListener(t,e){return this.on(t,e)}on(t,e){let s=super.on(t,e);if(t==="data")this[U]=!1,this[ft]++,!this[I].length&&!this[N]&&this[St]();else if(t==="readable"&&this[$]!==0)super.emit("readable");else if(Xh(t)&&this[at])super.emit(t),this.removeAllListeners(t);else if(t==="error"&&this[jt]){let n=e;this[X]?Dt(()=>n.call(this,this[jt])):n.call(this,this[jt])}return s}removeListener(t,e){return this.off(t,e)}off(t,e){let s=super.off(t,e);return t==="data"&&(this[ft]=this.listeners("data").length,this[ft]===0&&!this[U]&&!this[I].length&&(this[N]=!1)),s}removeAllListeners(t){let e=super.removeAllListeners(t);return(t==="data"||t===void 0)&&(this[ft]=0,!this[U]&&!this[I].length&&(this[N]=!1)),e}get emittedEnd(){return this[at]}[it](){!this[ye]&&!this[at]&&!this[D]&&this[M].length===0&&this[st]&&(this[ye]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[be]&&this.emit("close"),this[ye]=!1)}emit(t,...e){let s=e[0];if(t!=="error"&&t!=="close"&&t!==D&&this[D])return!1;if(t==="data")return!this[L]&&!s?!1:this[X]?(Dt(()=>this[Os](s)),!0):this[Os](s);if(t==="end")return this[ar]();if(t==="close"){if(this[be]=!0,!this[at]&&!this[D])return!1;let r=super.emit("close");return this.removeAllListeners("close"),r}else if(t==="error"){this[jt]=s,super.emit(xs,s);let r=!this[Ct]||this.listeners("error").length?super.emit("error",s):!1;return this[it](),r}else if(t==="resume"){let r=super.emit("resume");return this[it](),r}else if(t==="finish"||t==="prefinish"){let r=super.emit(t);return this.removeAllListeners(t),r}let n=super.emit(t,...e);return this[it](),n}[Os](t){for(let s of this[I])s.dest.write(t)===!1&&this.pause();let e=this[U]?!1:super.emit("data",t);return this[it](),e}[ar](){return this[at]?!1:(this[at]=!0,this.readable=!1,this[X]?(Dt(()=>this[As]()),!0):this[As]())}[As](){if(this[bt]){let e=this[bt].end();if(e){for(let s of this[I])s.dest.write(e);this[U]||super.emit("data",e)}}for(let e of this[I])e.end();let t=super.emit("end");return this.removeAllListeners("end"),t}async collect(){let t=Object.assign([],{dataLength:0});this[L]||(t.dataLength=0);let e=this.promise();return this.on("data",s=>{t.push(s),this[L]||(t.dataLength+=s.length)}),await e,t}async concat(){if(this[L])throw new Error("cannot concat in objectMode");let t=await this.collect();return this[V]?t.join(""):Buffer.concat(t,t.dataLength)}async promise(){return new Promise((t,e)=>{this.on(D,()=>e(new Error("stream destroyed"))),this.on("error",s=>e(s)),this.on("end",()=>t())})}[Symbol.asyncIterator](){this[U]=!1;let t=!1,e=async()=>(this.pause(),t=!0,{value:void 0,done:!0});return{next:()=>{if(t)return e();let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[st])return e();let r,o,a=f=>{this.off("data",h),this.off("end",c),this.off(D,l),e(),o(f)},h=f=>{this.off("error",a),this.off("end",c),this.off(D,l),this.pause(),r({value:f,done:!!this[st]})},c=()=>{this.off("error",a),this.off("data",h),this.off(D,l),e(),r({done:!0,value:void 0})},l=()=>a(new Error("stream destroyed"));return new Promise((f,d)=>{o=d,r=f,this.once(D,l),this.once("error",a),this.once("end",c),this.once("data",h)})},throw:e,return:e,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[U]=!1;let t=!1,e=()=>(this.pause(),this.off(xs,e),this.off(D,e),this.off("end",e),t=!0,{done:!0,value:void 0}),s=()=>{if(t)return e();let n=this.read();return n===null?e():{done:!1,value:n}};return this.once("end",e),this.once(xs,e),this.once(D,e),{next:s,throw:e,return:e,[Symbol.iterator](){return this}}}destroy(t){if(this[D])return t?this.emit("error",t):this.emit(D),this;this[D]=!0,this[U]=!0,this[M].length=0,this[$]=0;let e=this;return typeof e.close=="function"&&!this[be]&&e.close(),t?this.emit("error",t):this.emit(D),this}static get isStream(){return W.isStream}};W.Minipass=xe});var _r=v(T=>{"use strict";var sc=T&&T.__createBinding||(Object.create?function(i,t,e,s){s===void 0&&(s=e);var n=Object.getOwnPropertyDescriptor(t,e);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,s,n)}:function(i,t,e,s){s===void 0&&(s=e),i[s]=t[e]}),ic=T&&T.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),nc=T&&T.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&sc(t,i,e);return ic(t,i),t};Object.defineProperty(T,"__esModule",{value:!0});T.PathScurry=T.Path=T.PathScurryDarwin=T.PathScurryPosix=T.PathScurryWin32=T.PathScurryBase=T.PathPosix=T.PathWin32=T.PathBase=T.ChildrenCache=T.ResolveCache=void 0;var pr=ir(),je=A("path"),rc=A("url"),Nt=A("fs"),oc=nc(A("fs")),ac=Nt.realpathSync.native,Oe=A("fs/promises"),cr=Ps(),Mt={lstatSync:Nt.lstatSync,readdir:Nt.readdir,readdirSync:Nt.readdirSync,readlinkSync:Nt.readlinkSync,realpathSync:ac,promises:{lstat:Oe.lstat,readdir:Oe.readdir,readlink:Oe.readlink,realpath:Oe.realpath}},gr=i=>!i||i===Mt||i===oc?Mt:{...Mt,...i,promises:{...Mt.promises,...i.promises||{}}},mr=/^\\\\\?\\([a-z]:)\\?$/i,hc=i=>i.replace(/\//g,"\\").replace(mr,"$1\\"),cc=/[\\\/]/,K=0,wr=1,yr=2,Z=4,br=6,Sr=8,ut=10,Er=12,H=15,Rt=~H,Cs=16,lr=32,$t=64,J=128,Ae=256,Te=512,fr=$t|J|Te,lc=1023,Ds=i=>i.isFile()?Sr:i.isDirectory()?Z:i.isSymbolicLink()?ut:i.isCharacterDevice()?yr:i.isBlockDevice()?br:i.isSocket()?Er:i.isFIFO()?wr:K,ur=new Map,Ft=i=>{let t=ur.get(i);if(t)return t;let e=i.normalize("NFKD");return ur.set(i,e),e},dr=new Map,ke=i=>{let t=dr.get(i);if(t)return t;let e=Ft(i.toLowerCase());return dr.set(i,e),e},Lt=class extends pr.LRUCache{constructor(){super({max:256})}};T.ResolveCache=Lt;var Pe=class extends pr.LRUCache{constructor(t=16*1024){super({maxSize:t,sizeCalculation:e=>e.length+1})}};T.ChildrenCache=Pe;var vr=Symbol("PathScurry setAsCwd"),F=class{name;root;roots;parent;nocase;isCWD=!1;#t;#e;get dev(){return this.#e}#i;get mode(){return this.#i}#s;get nlink(){return this.#s}#o;get uid(){return this.#o}#u;get gid(){return this.#u}#c;get rdev(){return this.#c}#l;get blksize(){return this.#l}#a;get ino(){return this.#a}#h;get size(){return this.#h}#r;get blocks(){return this.#r}#w;get atimeMs(){return this.#w}#y;get mtimeMs(){return this.#y}#p;get ctimeMs(){return this.#p}#d;get birthtimeMs(){return this.#d}#_;get atime(){return this.#_}#m;get mtime(){return this.#m}#x;get ctime(){return this.#x}#O;get birthtime(){return this.#O}#S;#E;#v;#g;#j;#A;#n;#D;#b;#P;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(t,e=K,s,n,r,o,a){this.name=t,this.#S=r?ke(t):Ft(t),this.#n=e&lc,this.nocase=r,this.roots=n,this.root=s||this,this.#D=o,this.#v=a.fullpath,this.#j=a.relative,this.#A=a.relativePosix,this.parent=a.parent,this.parent?this.#t=this.parent.#t:this.#t=gr(a.fs)}depth(){return this.#E!==void 0?this.#E:this.parent?this.#E=this.parent.depth()+1:this.#E=0}childrenCache(){return this.#D}resolve(t){if(!t)return this;let e=this.getRootString(t),n=t.substring(e.length).split(this.splitSep);return e?this.getRoot(e).#R(n):this.#R(n)}#R(t){let e=this;for(let s of t)e=e.child(s);return e}children(){let t=this.#D.get(this);if(t)return t;let e=Object.assign([],{provisional:0});return this.#D.set(this,e),this.#n&=~Cs,e}child(t,e){if(t===""||t===".")return this;if(t==="..")return this.parent||this;let s=this.children(),n=this.nocase?ke(t):Ft(t);for(let h of s)if(h.#S===n)return h;let r=this.parent?this.sep:"",o=this.#v?this.#v+r+t:void 0,a=this.newChild(t,K,{...e,parent:this,fullpath:o});return this.canReaddir()||(a.#n|=J),s.push(a),a}relative(){if(this.isCWD)return"";if(this.#j!==void 0)return this.#j;let t=this.name,e=this.parent;if(!e)return this.#j=this.name;let s=e.relative();return s+(!s||!e.parent?"":this.sep)+t}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#A!==void 0)return this.#A;let t=this.name,e=this.parent;if(!e)return this.#A=this.fullpathPosix();let s=e.relativePosix();return s+(!s||!e.parent?"":"/")+t}fullpath(){if(this.#v!==void 0)return this.#v;let t=this.name,e=this.parent;if(!e)return this.#v=this.name;let n=e.fullpath()+(e.parent?this.sep:"")+t;return this.#v=n}fullpathPosix(){if(this.#g!==void 0)return this.#g;if(this.sep==="/")return this.#g=this.fullpath();if(!this.parent){let n=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(n)?this.#g=`//?/${n}`:this.#g=n}let t=this.parent,e=t.fullpathPosix(),s=e+(!e||!t.parent?"":"/")+this.name;return this.#g=s}isUnknown(){return(this.#n&H)===K}isType(t){return this[`is${t}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#n&H)===Sr}isDirectory(){return(this.#n&H)===Z}isCharacterDevice(){return(this.#n&H)===yr}isBlockDevice(){return(this.#n&H)===br}isFIFO(){return(this.#n&H)===wr}isSocket(){return(this.#n&H)===Er}isSymbolicLink(){return(this.#n&ut)===ut}lstatCached(){return this.#n&lr?this:void 0}readlinkCached(){return this.#b}realpathCached(){return this.#P}readdirCached(){let t=this.children();return t.slice(0,t.provisional)}canReadlink(){if(this.#b)return!0;if(!this.parent)return!1;let t=this.#n&H;return!(t!==K&&t!==ut||this.#n&Ae||this.#n&J)}calledReaddir(){return!!(this.#n&Cs)}isENOENT(){return!!(this.#n&J)}isNamed(t){return this.nocase?this.#S===ke(t):this.#S===Ft(t)}async readlink(){let t=this.#b;if(t)return t;if(this.canReadlink()&&this.parent)try{let e=await this.#t.promises.readlink(this.fullpath()),s=(await this.parent.realpath())?.resolve(e);if(s)return this.#b=s}catch(e){this.#f(e.code);return}}readlinkSync(){let t=this.#b;if(t)return t;if(this.canReadlink()&&this.parent)try{let e=this.#t.readlinkSync(this.fullpath()),s=this.parent.realpathSync()?.resolve(e);if(s)return this.#b=s}catch(e){this.#f(e.code);return}}#N(t){this.#n|=Cs;for(let e=t.provisional;e<t.length;e++){let s=t[e];s&&s.#M()}}#M(){this.#n&J||(this.#n=(this.#n|J)&Rt,this.#k())}#k(){let t=this.children();t.provisional=0;for(let e of t)e.#M()}#T(){this.#n|=Te,this.#$()}#$(){if(this.#n&$t)return;let t=this.#n;(t&H)===Z&&(t&=Rt),this.#n=t|$t,this.#k()}#F(t=""){t==="ENOTDIR"||t==="EPERM"?this.#$():t==="ENOENT"?this.#M():this.children().provisional=0}#L(t=""){t==="ENOTDIR"?this.parent.#$():t==="ENOENT"&&this.#M()}#f(t=""){let e=this.#n;e|=Ae,t==="ENOENT"&&(e|=J),(t==="EINVAL"||t==="UNKNOWN")&&(e&=Rt),this.#n=e,t==="ENOTDIR"&&this.parent&&this.parent.#$()}#I(t,e){return this.#C(t,e)||this.#W(t,e)}#W(t,e){let s=Ds(t),n=this.newChild(t.name,s,{parent:this}),r=n.#n&H;return r!==Z&&r!==ut&&r!==K&&(n.#n|=$t),e.unshift(n),e.provisional++,n}#C(t,e){for(let s=e.provisional;s<e.length;s++){let n=e[s];if((this.nocase?ke(t.name):Ft(t.name))===n.#S)return this.#B(t,n,s,e)}}#B(t,e,s,n){let r=e.name;return e.#n=e.#n&Rt|Ds(t),r!==t.name&&(e.name=t.name),s!==n.provisional&&(s===n.length-1?n.pop():n.splice(s,1),n.unshift(e)),n.provisional++,e}async lstat(){if(!(this.#n&J))try{return this.#G(await this.#t.promises.lstat(this.fullpath())),this}catch(t){this.#L(t.code)}}lstatSync(){if(!(this.#n&J))try{return this.#G(this.#t.lstatSync(this.fullpath())),this}catch(t){this.#L(t.code)}}#G(t){let{atime:e,atimeMs:s,birthtime:n,birthtimeMs:r,blksize:o,blocks:a,ctime:h,ctimeMs:c,dev:l,gid:f,ino:d,mode:u,mtime:m,mtimeMs:p,nlink:g,rdev:w,size:S,uid:y}=t;this.#_=e,this.#w=s,this.#O=n,this.#d=r,this.#l=o,this.#r=a,this.#x=h,this.#p=c,this.#e=l,this.#u=f,this.#a=d,this.#i=u,this.#m=m,this.#y=p,this.#s=g,this.#c=w,this.#h=S,this.#o=y;let E=Ds(t);this.#n=this.#n&Rt|E|lr,E!==K&&E!==Z&&E!==ut&&(this.#n|=$t)}#U=[];#z=!1;#H(t){this.#z=!1;let e=this.#U.slice();this.#U.length=0,e.forEach(s=>s(null,t))}readdirCB(t,e=!1){if(!this.canReaddir()){e?t(null,[]):queueMicrotask(()=>t(null,[]));return}let s=this.children();if(this.calledReaddir()){let r=s.slice(0,s.provisional);e?t(null,r):queueMicrotask(()=>t(null,r));return}if(this.#U.push(t),this.#z)return;this.#z=!0;let n=this.fullpath();this.#t.readdir(n,{withFileTypes:!0},(r,o)=>{if(r)this.#F(r.code),s.provisional=0;else{for(let a of o)this.#I(a,s);this.#N(s)}this.#H(s.slice(0,s.provisional))})}#q;async readdir(){if(!this.canReaddir())return[];let t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);let e=this.fullpath();if(this.#q)await this.#q;else{let s=()=>{};this.#q=new Promise(n=>s=n);try{for(let n of await this.#t.promises.readdir(e,{withFileTypes:!0}))this.#I(n,t);this.#N(t)}catch(n){this.#F(n.code),t.provisional=0}this.#q=void 0,s()}return t.slice(0,t.provisional)}readdirSync(){if(!this.canReaddir())return[];let t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);let e=this.fullpath();try{for(let s of this.#t.readdirSync(e,{withFileTypes:!0}))this.#I(s,t);this.#N(t)}catch(s){this.#F(s.code),t.provisional=0}return t.slice(0,t.provisional)}canReaddir(){if(this.#n&fr)return!1;let t=H&this.#n;return t===K||t===Z||t===ut}shouldWalk(t,e){return(this.#n&Z)===Z&&!(this.#n&fr)&&!t.has(this)&&(!e||e(this))}async realpath(){if(this.#P)return this.#P;if(!((Te|Ae|J)&this.#n))try{let t=await this.#t.promises.realpath(this.fullpath());return this.#P=this.resolve(t)}catch{this.#T()}}realpathSync(){if(this.#P)return this.#P;if(!((Te|Ae|J)&this.#n))try{let t=this.#t.realpathSync(this.fullpath());return this.#P=this.resolve(t)}catch{this.#T()}}[vr](t){if(t===this)return;t.isCWD=!1,this.isCWD=!0;let e=new Set([]),s=[],n=this;for(;n&&n.parent;)e.add(n),n.#j=s.join(this.sep),n.#A=s.join("/"),n=n.parent,s.push("..");for(n=t;n&&n.parent&&!e.has(n);)n.#j=void 0,n.#A=void 0,n=n.parent}};T.PathBase=F;var It=class i extends F{sep="\\";splitSep=cc;constructor(t,e=K,s,n,r,o,a){super(t,e,s,n,r,o,a)}newChild(t,e=K,s={}){return new i(t,e,this.root,this.roots,this.nocase,this.childrenCache(),s)}getRootString(t){return je.win32.parse(t).root}getRoot(t){if(t=hc(t.toUpperCase()),t===this.root.name)return this.root;for(let[e,s]of Object.entries(this.roots))if(this.sameRoot(t,e))return this.roots[t]=s;return this.roots[t]=new qt(t,this).root}sameRoot(t,e=this.root.name){return t=t.toUpperCase().replace(/\//g,"\\").replace(mr,"$1\\"),t===e}};T.PathWin32=It;var Wt=class i extends F{splitSep="/";sep="/";constructor(t,e=K,s,n,r,o,a){super(t,e,s,n,r,o,a)}getRootString(t){return t.startsWith("/")?"/":""}getRoot(t){return this.root}newChild(t,e=K,s={}){return new i(t,e,this.root,this.roots,this.nocase,this.childrenCache(),s)}};T.PathPosix=Wt;var Bt=class{root;rootPath;roots;cwd;#t;#e;#i;nocase;#s;constructor(t=process.cwd(),e,s,{nocase:n,childrenCacheSize:r=16*1024,fs:o=Mt}={}){this.#s=gr(o),(t instanceof URL||t.startsWith("file://"))&&(t=(0,rc.fileURLToPath)(t));let a=e.resolve(t);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#t=new Lt,this.#e=new Lt,this.#i=new Pe(r);let h=a.substring(this.rootPath.length).split(s);if(h.length===1&&!h[0]&&h.pop(),n===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=n,this.root=this.newRoot(this.#s),this.roots[this.rootPath]=this.root;let c=this.root,l=h.length-1,f=e.sep,d=this.rootPath,u=!1;for(let m of h){let p=l--;c=c.child(m,{relative:new Array(p).fill("..").join(f),relativePosix:new Array(p).fill("..").join("/"),fullpath:d+=(u?"":f)+m}),u=!0}this.cwd=c}depth(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.depth()}childrenCache(){return this.#i}resolve(...t){let e="";for(let r=t.length-1;r>=0;r--){let o=t[r];if(!(!o||o===".")&&(e=e?`${o}/${e}`:o,this.isAbsolute(o)))break}let s=this.#t.get(e);if(s!==void 0)return s;let n=this.cwd.resolve(e).fullpath();return this.#t.set(e,n),n}resolvePosix(...t){let e="";for(let r=t.length-1;r>=0;r--){let o=t[r];if(!(!o||o===".")&&(e=e?`${o}/${e}`:o,this.isAbsolute(o)))break}let s=this.#e.get(e);if(s!==void 0)return s;let n=this.cwd.resolve(e).fullpathPosix();return this.#e.set(e,n),n}relative(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.relative()}relativePosix(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.relativePosix()}basename(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.name}dirname(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),(t.parent||t).fullpath()}async readdir(t=this.cwd,e={withFileTypes:!0}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof F||(e=t,t=this.cwd);let{withFileTypes:s}=e;if(t.canReaddir()){let n=await t.readdir();return s?n:n.map(r=>r.name)}else return[]}readdirSync(t=this.cwd,e={withFileTypes:!0}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof F||(e=t,t=this.cwd);let{withFileTypes:s=!0}=e;return t.canReaddir()?s?t.readdirSync():t.readdirSync().map(n=>n.name):[]}async lstat(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.lstat()}lstatSync(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.lstatSync()}async readlink(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof F||(e=t.withFileTypes,t=this.cwd);let s=await t.readlink();return e?s:s?.fullpath()}readlinkSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof F||(e=t.withFileTypes,t=this.cwd);let s=t.readlinkSync();return e?s:s?.fullpath()}async realpath(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof F||(e=t.withFileTypes,t=this.cwd);let s=await t.realpath();return e?s:s?.fullpath()}realpathSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof F||(e=t.withFileTypes,t=this.cwd);let s=t.realpathSync();return e?s:s?.fullpath()}async walk(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof F||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=[];(!r||r(t))&&a.push(s?t:t.fullpath());let h=new Set,c=(f,d)=>{h.add(f),f.readdirCB((u,m)=>{if(u)return d(u);let p=m.length;if(!p)return d();let g=()=>{--p===0&&d()};for(let w of m)(!r||r(w))&&a.push(s?w:w.fullpath()),n&&w.isSymbolicLink()?w.realpath().then(S=>S?.isUnknown()?S.lstat():S).then(S=>S?.shouldWalk(h,o)?c(S,g):g()):w.shouldWalk(h,o)?c(w,g):g()},!0)},l=t;return new Promise((f,d)=>{c(l,u=>{if(u)return d(u);f(a)})})}walkSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof F||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=[];(!r||r(t))&&a.push(s?t:t.fullpath());let h=new Set([t]);for(let c of h){let l=c.readdirSync();for(let f of l){(!r||r(f))&&a.push(s?f:f.fullpath());let d=f;if(f.isSymbolicLink()){if(!(n&&(d=f.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(h,o)&&h.add(d)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(t=this.cwd,e={}){return typeof t=="string"?t=this.cwd.resolve(t):t instanceof F||(e=t,t=this.cwd),this.stream(t,e)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof F||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:n=!1,filter:r,walkFilter:o}=e;(!r||r(t))&&(yield s?t:t.fullpath());let a=new Set([t]);for(let h of a){let c=h.readdirSync();for(let l of c){(!r||r(l))&&(yield s?l:l.fullpath());let f=l;if(l.isSymbolicLink()){if(!(n&&(f=l.realpathSync())))continue;f.isUnknown()&&f.lstatSync()}f.shouldWalk(a,o)&&a.add(f)}}}stream(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof F||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=new cr.Minipass({objectMode:!0});(!r||r(t))&&a.write(s?t:t.fullpath());let h=new Set,c=[t],l=0,f=()=>{let d=!1;for(;!d;){let u=c.shift();if(!u){l===0&&a.end();return}l++,h.add(u);let m=(g,w,S=!1)=>{if(g)return a.emit("error",g);if(n&&!S){let y=[];for(let E of w)E.isSymbolicLink()&&y.push(E.realpath().then(k=>k?.isUnknown()?k.lstat():k));if(y.length){Promise.all(y).then(()=>m(null,w,!0));return}}for(let y of w)y&&(!r||r(y))&&(a.write(s?y:y.fullpath())||(d=!0));l--;for(let y of w){let E=y.realpathCached()||y;E.shouldWalk(h,o)&&c.push(E)}d&&!a.flowing?a.once("drain",f):p||f()},p=!0;u.readdirCB(m,!0),p=!1}};return f(),a}streamSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof F||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=new cr.Minipass({objectMode:!0}),h=new Set;(!r||r(t))&&a.write(s?t:t.fullpath());let c=[t],l=0,f=()=>{let d=!1;for(;!d;){let u=c.shift();if(!u){l===0&&a.end();return}l++,h.add(u);let m=u.readdirSync();for(let p of m)(!r||r(p))&&(a.write(s?p:p.fullpath())||(d=!0));l--;for(let p of m){let g=p;if(p.isSymbolicLink()){if(!(n&&(g=p.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(h,o)&&c.push(g)}}d&&!a.flowing&&a.once("drain",f)};return f(),a}chdir(t=this.cwd){let e=this.cwd;this.cwd=typeof t=="string"?this.cwd.resolve(t):t,this.cwd[vr](e)}};T.PathScurryBase=Bt;var qt=class extends Bt{sep="\\";constructor(t=process.cwd(),e={}){let{nocase:s=!0}=e;super(t,je.win32,"\\",{...e,nocase:s}),this.nocase=s;for(let n=this.cwd;n;n=n.parent)n.nocase=this.nocase}parseRootPath(t){return je.win32.parse(t).root.toUpperCase()}newRoot(t){return new It(this.rootPath,Z,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")||t.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(t)}};T.PathScurryWin32=qt;var Ut=class extends Bt{sep="/";constructor(t=process.cwd(),e={}){let{nocase:s=!1}=e;super(t,je.posix,"/",{...e,nocase:s}),this.nocase=s}parseRootPath(t){return"/"}newRoot(t){return new Wt(this.rootPath,Z,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")}};T.PathScurryPosix=Ut;var Ce=class extends Ut{constructor(t=process.cwd(),e={}){let{nocase:s=!0}=e;super(t,{...e,nocase:s})}};T.PathScurryDarwin=Ce;T.Path=process.platform==="win32"?It:Wt;T.PathScurry=process.platform==="win32"?qt:process.platform==="darwin"?Ce:Ut});var Ns=v(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.Pattern=void 0;var fc=et(),uc=i=>i.length>=1,dc=i=>i.length>=1,Rs=class i{#t;#e;#i;length;#s;#o;#u;#c;#l;#a;#h=!0;constructor(t,e,s,n){if(!uc(t))throw new TypeError("empty pattern list");if(!dc(e))throw new TypeError("empty glob list");if(e.length!==t.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=t.length,s<0||s>=this.length)throw new TypeError("index out of range");if(this.#t=t,this.#e=e,this.#i=s,this.#s=n,this.#i===0){if(this.isUNC()){let[r,o,a,h,...c]=this.#t,[l,f,d,u,...m]=this.#e;c[0]===""&&(c.shift(),m.shift());let p=[r,o,a,h,""].join("/"),g=[l,f,d,u,""].join("/");this.#t=[p,...c],this.#e=[g,...m],this.length=this.#t.length}else if(this.isDrive()||this.isAbsolute()){let[r,...o]=this.#t,[a,...h]=this.#e;o[0]===""&&(o.shift(),h.shift());let c=r+"/",l=a+"/";this.#t=[c,...o],this.#e=[l,...h],this.length=this.#t.length}}}pattern(){return this.#t[this.#i]}isString(){return typeof this.#t[this.#i]=="string"}isGlobstar(){return this.#t[this.#i]===fc.GLOBSTAR}isRegExp(){return this.#t[this.#i]instanceof RegExp}globString(){return this.#u=this.#u||(this.#i===0?this.isAbsolute()?this.#e[0]+this.#e.slice(1).join("/"):this.#e.join("/"):this.#e.slice(this.#i).join("/"))}hasMore(){return this.length>this.#i+1}rest(){return this.#o!==void 0?this.#o:this.hasMore()?(this.#o=new i(this.#t,this.#e,this.#i+1,this.#s),this.#o.#a=this.#a,this.#o.#l=this.#l,this.#o.#c=this.#c,this.#o):this.#o=null}isUNC(){let t=this.#t;return this.#l!==void 0?this.#l:this.#l=this.#s==="win32"&&this.#i===0&&t[0]===""&&t[1]===""&&typeof t[2]=="string"&&!!t[2]&&typeof t[3]=="string"&&!!t[3]}isDrive(){let t=this.#t;return this.#c!==void 0?this.#c:this.#c=this.#s==="win32"&&this.#i===0&&this.length>1&&typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0])}isAbsolute(){let t=this.#t;return this.#a!==void 0?this.#a:this.#a=t[0]===""&&t.length>1||this.isDrive()||this.isUNC()}root(){let t=this.#t[0];return typeof t=="string"&&this.isAbsolute()&&this.#i===0?t:""}checkFollowGlobstar(){return!(this.#i===0||!this.isGlobstar()||!this.#h)}markFollowGlobstar(){return this.#i===0||!this.isGlobstar()||!this.#h?!1:(this.#h=!1,!0)}};De.Pattern=Rs});var $s=v(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.Ignore=void 0;var xr=et(),pc=Ns(),gc=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Ms=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(t,{nobrace:e,nocase:s,noext:n,noglobstar:r,platform:o=gc}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=o,this.mmopts={dot:!0,nobrace:e,nocase:s,noext:n,noglobstar:r,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let a of t)this.add(a)}add(t){let e=new xr.Minimatch(t,this.mmopts);for(let s=0;s<e.set.length;s++){let n=e.set[s],r=e.globParts[s];if(!n||!r)throw new Error("invalid pattern object");for(;n[0]==="."&&r[0]===".";)n.shift(),r.shift();let o=new pc.Pattern(n,r,0,this.platform),a=new xr.Minimatch(o.globString(),this.mmopts),h=r[r.length-1]==="**",c=o.isAbsolute();c?this.absolute.push(a):this.relative.push(a),h&&(c?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}ignored(t){let e=t.fullpath(),s=`${e}/`,n=t.relative()||".",r=`${n}/`;for(let o of this.relative)if(o.match(n)||o.match(r))return!0;for(let o of this.absolute)if(o.match(e)||o.match(s))return!0;return!1}childrenIgnored(t){let e=t.fullpath()+"/",s=(t.relative()||".")+"/";for(let n of this.relativeChildren)if(n.match(s))return!0;for(let n of this.absoluteChildren)if(n.match(e))return!0;return!1}};Re.Ignore=Ms});var Ar=v(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.Processor=Q.SubWalks=Q.MatchRecord=Q.HasWalkedCache=void 0;var Or=et(),Ne=class i{store;constructor(t=new Map){this.store=t}copy(){return new i(new Map(this.store))}hasWalked(t,e){return this.store.get(t.fullpath())?.has(e.globString())}storeWalked(t,e){let s=t.fullpath(),n=this.store.get(s);n?n.add(e.globString()):this.store.set(s,new Set([e.globString()]))}};Q.HasWalkedCache=Ne;var Me=class{store=new Map;add(t,e,s){let n=(e?2:0)|(s?1:0),r=this.store.get(t);this.store.set(t,r===void 0?n:n&r)}entries(){return[...this.store.entries()].map(([t,e])=>[t,!!(e&2),!!(e&1)])}};Q.MatchRecord=Me;var $e=class{store=new Map;add(t,e){if(!t.canReaddir())return;let s=this.store.get(t);s?s.find(n=>n.globString()===e.globString())||s.push(e):this.store.set(t,[e])}get(t){let e=this.store.get(t);if(!e)throw new Error("attempting to walk unknown path");return e}entries(){return this.keys().map(t=>[t,this.store.get(t)])}keys(){return[...this.store.keys()].filter(t=>t.canReaddir())}};Q.SubWalks=$e;var Fs=class i{hasWalkedCache;matches=new Me;subwalks=new $e;patterns;follow;dot;opts;constructor(t,e){this.opts=t,this.follow=!!t.follow,this.dot=!!t.dot,this.hasWalkedCache=e?e.copy():new Ne}processPatterns(t,e){this.patterns=e;let s=e.map(n=>[t,n]);for(let[n,r]of s){this.hasWalkedCache.storeWalked(n,r);let o=r.root(),a=r.isAbsolute()&&this.opts.absolute!==!1;if(o){n=n.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let f=r.rest();if(f)r=f;else{this.matches.add(n,!0,!1);continue}}if(n.isENOENT())continue;let h,c,l=!1;for(;typeof(h=r.pattern())=="string"&&(c=r.rest());)n=n.resolve(h),r=c,l=!0;if(h=r.pattern(),c=r.rest(),l){if(this.hasWalkedCache.hasWalked(n,r))continue;this.hasWalkedCache.storeWalked(n,r)}if(typeof h=="string"){let f=h===".."||h===""||h===".";this.matches.add(n.resolve(h),a,f);continue}else if(h===Or.GLOBSTAR){(!n.isSymbolicLink()||this.follow||r.checkFollowGlobstar())&&this.subwalks.add(n,r);let f=c?.pattern(),d=c?.rest();if(!c||(f===""||f===".")&&!d)this.matches.add(n,a,f===""||f===".");else if(f===".."){let u=n.parent||n;d?this.hasWalkedCache.hasWalked(u,d)||this.subwalks.add(u,d):this.matches.add(u,a,!0)}}else h instanceof RegExp&&this.subwalks.add(n,r)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new i(this.opts,this.hasWalkedCache)}filterEntries(t,e){let s=this.subwalks.get(t),n=this.child();for(let r of e)for(let o of s){let a=o.isAbsolute(),h=o.pattern(),c=o.rest();h===Or.GLOBSTAR?n.testGlobstar(r,o,c,a):h instanceof RegExp?n.testRegExp(r,h,c,a):n.testString(r,h,c,a)}return n}testGlobstar(t,e,s,n){if((this.dot||!t.name.startsWith("."))&&(e.hasMore()||this.matches.add(t,n,!1),t.canReaddir()&&(this.follow||!t.isSymbolicLink()?this.subwalks.add(t,e):t.isSymbolicLink()&&(s&&e.checkFollowGlobstar()?this.subwalks.add(t,s):e.markFollowGlobstar()&&this.subwalks.add(t,e)))),s){let r=s.pattern();if(typeof r=="string"&&r!==".."&&r!==""&&r!==".")this.testString(t,r,s.rest(),n);else if(r===".."){let o=t.parent||t;this.subwalks.add(o,s)}else r instanceof RegExp&&this.testRegExp(t,r,s.rest(),n)}}testRegExp(t,e,s,n){e.test(t.name)&&(s?this.subwalks.add(t,s):this.matches.add(t,n,!1))}testString(t,e,s,n){t.isNamed(e)&&(s?this.subwalks.add(t,s):this.matches.add(t,n,!1))}};Q.Processor=Fs});var jr=v(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.GlobStream=ht.GlobWalker=ht.GlobUtil=void 0;var mc=Ps(),kr=$s(),Tr=Ar(),wc=(i,t)=>typeof i=="string"?new kr.Ignore([i],t):Array.isArray(i)?new kr.Ignore(i,t):i,zt=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#t=[];#e;#i;signal;maxDepth;includeChildMatches;constructor(t,e,s){if(this.patterns=t,this.path=e,this.opts=s,this.#i=!s.posix&&s.platform==="win32"?"\\":"/",this.includeChildMatches=s.includeChildMatches!==!1,(s.ignore||!this.includeChildMatches)&&(this.#e=wc(s.ignore??[],s),!this.includeChildMatches&&typeof this.#e.add!="function")){let n="cannot ignore child matches, ignore lacks add() method.";throw new Error(n)}this.maxDepth=s.maxDepth||1/0,s.signal&&(this.signal=s.signal,this.signal.addEventListener("abort",()=>{this.#t.length=0}))}#s(t){return this.seen.has(t)||!!this.#e?.ignored?.(t)}#o(t){return!!this.#e?.childrenIgnored?.(t)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let t;for(;!this.paused&&(t=this.#t.shift());)t()}onResume(t){this.signal?.aborted||(this.paused?this.#t.push(t):t())}async matchCheck(t,e){if(e&&this.opts.nodir)return;let s;if(this.opts.realpath){if(s=t.realpathCached()||await t.realpath(),!s)return;t=s}let r=t.isUnknown()||this.opts.stat?await t.lstat():t;if(this.opts.follow&&this.opts.nodir&&r?.isSymbolicLink()){let o=await r.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(r,e)}matchCheckTest(t,e){return t&&(this.maxDepth===1/0||t.depth()<=this.maxDepth)&&(!e||t.canReaddir())&&(!this.opts.nodir||!t.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!t.isSymbolicLink()||!t.realpathCached()?.isDirectory())&&!this.#s(t)?t:void 0}matchCheckSync(t,e){if(e&&this.opts.nodir)return;let s;if(this.opts.realpath){if(s=t.realpathCached()||t.realpathSync(),!s)return;t=s}let r=t.isUnknown()||this.opts.stat?t.lstatSync():t;if(this.opts.follow&&this.opts.nodir&&r?.isSymbolicLink()){let o=r.realpathSync();o&&(o?.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(r,e)}matchFinish(t,e){if(this.#s(t))return;if(!this.includeChildMatches&&this.#e?.add){let r=`${t.relativePosix()}/**`;this.#e.add(r)}let s=this.opts.absolute===void 0?e:this.opts.absolute;this.seen.add(t);let n=this.opts.mark&&t.isDirectory()?this.#i:"";if(this.opts.withFileTypes)this.matchEmit(t);else if(s){let r=this.opts.posix?t.fullpathPosix():t.fullpath();this.matchEmit(r+n)}else{let r=this.opts.posix?t.relativePosix():t.relative(),o=this.opts.dotRelative&&!r.startsWith(".."+this.#i)?"."+this.#i:"";this.matchEmit(r?o+r+n:"."+n)}}async match(t,e,s){let n=await this.matchCheck(t,s);n&&this.matchFinish(n,e)}matchSync(t,e,s){let n=this.matchCheckSync(t,s);n&&this.matchFinish(n,e)}walkCB(t,e,s){this.signal?.aborted&&s(),this.walkCB2(t,e,new Tr.Processor(this.opts),s)}walkCB2(t,e,s,n){if(this.#o(t))return n();if(this.signal?.aborted&&n(),this.paused){this.onResume(()=>this.walkCB2(t,e,s,n));return}s.processPatterns(t,e);let r=1,o=()=>{--r===0&&n()};for(let[a,h,c]of s.matches.entries())this.#s(a)||(r++,this.match(a,h,c).then(()=>o()));for(let a of s.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;r++;let h=a.readdirCached();a.calledReaddir()?this.walkCB3(a,h,s,o):a.readdirCB((c,l)=>this.walkCB3(a,l,s,o),!0)}o()}walkCB3(t,e,s,n){s=s.filterEntries(t,e);let r=1,o=()=>{--r===0&&n()};for(let[a,h,c]of s.matches.entries())this.#s(a)||(r++,this.match(a,h,c).then(()=>o()));for(let[a,h]of s.subwalks.entries())r++,this.walkCB2(a,h,s.child(),o);o()}walkCBSync(t,e,s){this.signal?.aborted&&s(),this.walkCB2Sync(t,e,new Tr.Processor(this.opts),s)}walkCB2Sync(t,e,s,n){if(this.#o(t))return n();if(this.signal?.aborted&&n(),this.paused){this.onResume(()=>this.walkCB2Sync(t,e,s,n));return}s.processPatterns(t,e);let r=1,o=()=>{--r===0&&n()};for(let[a,h,c]of s.matches.entries())this.#s(a)||this.matchSync(a,h,c);for(let a of s.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;r++;let h=a.readdirSync();this.walkCB3Sync(a,h,s,o)}o()}walkCB3Sync(t,e,s,n){s=s.filterEntries(t,e);let r=1,o=()=>{--r===0&&n()};for(let[a,h,c]of s.matches.entries())this.#s(a)||this.matchSync(a,h,c);for(let[a,h]of s.subwalks.entries())r++,this.walkCB2Sync(a,h,s.child(),o);o()}};ht.GlobUtil=zt;var Ls=class extends zt{matches=new Set;constructor(t,e,s){super(t,e,s)}matchEmit(t){this.matches.add(t)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((t,e)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?e(this.signal.reason):t(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}};ht.GlobWalker=Ls;var Is=class extends zt{results;constructor(t,e,s){super(t,e,s),this.results=new mc.Minipass({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(t){this.results.write(t),this.results.flowing||this.pause()}stream(){let t=this.path;return t.isUnknown()?t.lstat().then(()=>{this.walkCB(t,this.patterns,()=>this.results.end())}):this.walkCB(t,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};ht.GlobStream=Is});var Bs=v(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.Glob=void 0;var yc=et(),bc=A("url"),Fe=_r(),Sc=Ns(),Le=jr(),Ec=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Ws=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(t,e){if(!e)throw new TypeError("glob options required");if(this.withFileTypes=!!e.withFileTypes,this.signal=e.signal,this.follow=!!e.follow,this.dot=!!e.dot,this.dotRelative=!!e.dotRelative,this.nodir=!!e.nodir,this.mark=!!e.mark,e.cwd?(e.cwd instanceof URL||e.cwd.startsWith("file://"))&&(e.cwd=(0,bc.fileURLToPath)(e.cwd)):this.cwd="",this.cwd=e.cwd||"",this.root=e.root,this.magicalBraces=!!e.magicalBraces,this.nobrace=!!e.nobrace,this.noext=!!e.noext,this.realpath=!!e.realpath,this.absolute=e.absolute,this.includeChildMatches=e.includeChildMatches!==!1,this.noglobstar=!!e.noglobstar,this.matchBase=!!e.matchBase,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:1/0,this.stat=!!e.stat,this.ignore=e.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof t=="string"&&(t=[t]),this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(t=t.map(h=>h.replace(/\\/g,"/"))),this.matchBase){if(e.noglobstar)throw new TypeError("base matching requires globstar");t=t.map(h=>h.includes("/")?h:`./**/${h}`)}if(this.pattern=t,this.platform=e.platform||Ec,this.opts={...e,platform:this.platform},e.scurry){if(this.scurry=e.scurry,e.nocase!==void 0&&e.nocase!==e.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let h=e.platform==="win32"?Fe.PathScurryWin32:e.platform==="darwin"?Fe.PathScurryDarwin:e.platform?Fe.PathScurryPosix:Fe.PathScurry;this.scurry=new h(this.cwd,{nocase:e.nocase,fs:e.fs})}this.nocase=this.scurry.nocase;let s=this.platform==="darwin"||this.platform==="win32",n={...e,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:s,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},r=this.pattern.map(h=>new yc.Minimatch(h,n)),[o,a]=r.reduce((h,c)=>(h[0].push(...c.set),h[1].push(...c.globParts),h),[[],[]]);this.patterns=o.map((h,c)=>{let l=a[c];if(!l)throw new Error("invalid pattern object");return new Sc.Pattern(h,l,0,this.platform)})}async walk(){return[...await new Le.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Le.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Le.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Le.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};Ie.Glob=Ws});var qs=v(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.hasMagic=void 0;var vc=et(),_c=(i,t={})=>{Array.isArray(i)||(i=[i]);for(let e of i)if(new vc.Minimatch(e,t).hasMagic())return!0;return!1};We.hasMagic=_c});var Rr=v(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});O.glob=O.sync=O.iterate=O.iterateSync=O.stream=O.streamSync=O.Ignore=O.hasMagic=O.Glob=O.unescape=O.escape=void 0;O.globStreamSync=Gt;O.globStream=Us;O.globSync=zs;O.globIterateSync=Ht;O.globIterate=Gs;var Pr=et(),dt=Bs(),xc=qs(),Dr=et();Object.defineProperty(O,"escape",{enumerable:!0,get:function(){return Dr.escape}});Object.defineProperty(O,"unescape",{enumerable:!0,get:function(){return Dr.unescape}});var Oc=Bs();Object.defineProperty(O,"Glob",{enumerable:!0,get:function(){return Oc.Glob}});var Ac=qs();Object.defineProperty(O,"hasMagic",{enumerable:!0,get:function(){return Ac.hasMagic}});var kc=$s();Object.defineProperty(O,"Ignore",{enumerable:!0,get:function(){return kc.Ignore}});function Gt(i,t={}){return new dt.Glob(i,t).streamSync()}function Us(i,t={}){return new dt.Glob(i,t).stream()}function zs(i,t={}){return new dt.Glob(i,t).walkSync()}async function Cr(i,t={}){return new dt.Glob(i,t).walk()}function Ht(i,t={}){return new dt.Glob(i,t).iterateSync()}function Gs(i,t={}){return new dt.Glob(i,t).iterate()}O.streamSync=Gt;O.stream=Object.assign(Us,{sync:Gt});O.iterateSync=Ht;O.iterate=Object.assign(Gs,{sync:Ht});O.sync=Object.assign(zs,{stream:Gt,iterate:Ht});O.glob=Object.assign(Cr,{glob:Cr,globSync:zs,sync:O.sync,globStream:Us,stream:O.stream,globStreamSync:Gt,streamSync:O.streamSync,globIterate:Gs,iterate:O.iterate,globIterateSync:Ht,iterateSync:O.iterateSync,Glob:dt.Glob,hasMagic:xc.hasMagic,escape:Pr.escape,unescape:Pr.unescape});O.glob.glob=O.glob});var Ir=v((Of,Lr)=>{var Nr=A("path"),Tc=kn(),{minimatch:Kt}=et(),jc=ds(),{glob:Pc}=Rr();function Cc(i){let t=[],e=[];for(let s of i){let n=s.match(/^!+/);if(n&&(s=s.slice(n[0].length)),s=s.replace(/^\.?\/+/,""),n&&n[0].length%2===1)e.push(s);else{for(let o=0;o<e.length;++o){let a=e[o];Kt(s,a)&&e.splice(o,1)}t.push(s)}}for(let s of e)for(let n of Kt.match(t,s))t.splice(t.indexOf(n),1);return{patterns:t,negatedPatterns:e}}function Mr(i){let t=Array.isArray(i.packages)?i.packages:i;if(!Array.isArray(t))throw Be({message:"workspaces config expects an Array",code:"EWORKSPACESCONFIG"});return Cc(t)}function $r(i,t){return i.name||Tc(t)}function Dc(i){return i=i.replace(/\\/g,"/"),i.endsWith("/")?i:`${i}/`}function Be({Type:i=TypeError,message:t,code:e}){return Object.assign(new i(t),{code:e})}function Rc(i){return new Map(Array.from(i,t=>t.reverse()))}async function Fr(i={}){if(!i||!i.pkg)throw Be({message:"mapWorkspaces missing pkg info",code:"EMAPWORKSPACESPKG"});i.cwd||(i.cwd=process.cwd());let{workspaces:t=[]}=i.pkg,{patterns:e,negatedPatterns:s}=Mr(t),n=new Map;if(!e.length&&!s.length)return n;let r=new Map,o=()=>({...i,ignore:[...i.ignore||[],"**/node_modules/**",...s]}),a=await Pc(e.map(l=>Dc(l)),o());a=a.sort((l,f)=>l.localeCompare(f,"en"));let h=[];for(let l of e)h.push(...a.filter(f=>Kt(f,l,{partial:!0,windowsPathsNoEscape:!0})));for(let l of h){let f;try{f=await jc.normalize(Nr.join(i.cwd,l))}catch(m){if(m.code==="ENOENT"||m.code==="ENOTDIR")continue;throw m}let d=$r(f.content,f.path),u=r.get(d);u||(u=new Set,r.set(d,u)),u.add(f.path)}let c=["must not have multiple workspaces with the same name"];for(let[l,f]of r)f.size>1?Nc(c,l,f):n.set(l,f.values().next().value);if(c.length>1)throw Be({Type:Error,message:c.join(`
`),code:"EDUPLICATEWORKSPACE"});return n}function Nc(i,t,e){i.push(`package '${t}' has conflicts in the following paths:`);for(let s of e)i.push("    "+s)}Fr.virtual=function(i={}){if(!i||!i.lockfile)throw Be({message:"mapWorkspaces.virtual missing lockfile info",code:"EMAPWORKSPACESLOCKFILE"});i.cwd||(i.cwd=process.cwd());let{packages:t={}}=i.lockfile,{workspaces:e=[]}=t[""]||{},s=new Map,{patterns:n,negatedPatterns:r}=Mr(e);if(!n.length&&!r.length)return s;r.push("**/node_modules/**");let o=Object.keys(t);for(let a of r)for(let h of Kt.match(o,a))o.splice(o.indexOf(h),1);for(let a of n)for(let h of Kt.match(o,a)){let c=Nr.join(i.cwd,h),l=$r(t[h],c);s.set(c,l)}return Rc(s)};Lr.exports=Fr});var zr=v((Af,Ur)=>{var{walkUp:Mc}=mi(),Wr=Ei(),nt=ss(),{log:z,time:$c}=Ii(),{resolve:Yt,dirname:qe,join:Hs}=A("path"),{homedir:Fc}=A("os"),{readFile:Lc,writeFile:Ic,chmod:Wc,unlink:Bc,stat:Br,mkdir:qc}=A("fs/promises"),Uc=["npm-version","global-prefix","local-prefix"],Ks=(...i)=>Br(Yt(...i)).then(t=>t.isFile()).catch(()=>!1),zc=(...i)=>Br(Yt(...i)).then(t=>t.isDirectory()).catch(()=>!1),Ue=(i,t)=>Object.prototype.hasOwnProperty.call(i,t),Et=mt(),pt=qi(),Gc=ns(),Hc=Hi(),Kc=Yi(),qr=new Set(["global","user","project"]),Vt=new Set(["default","builtin",...qr,"env","cli"]),Vs=class{#t=!1;#e;#i=null;static get typeDefs(){return Et}constructor({definitions:t,shorthands:e,flatten:s,nerfDarts:n=[],npmPath:r,env:o=process.env,argv:a=process.argv,platform:h=process.platform,execPath:c=process.execPath,cwd:l=process.cwd(),excludeNpmCwd:f=!1}){this.nerfDarts=n,this.definitions=t;let d={},u={};this.deprecated={};for(let[g,w]of Object.entries(t))u[g]=w.default,d[g]=w.type,w.deprecated&&(this.deprecated[g]=w.deprecated.trim().replace(/\n +/,`
`));this.#e=s,this.types=d,this.shorthands=e,this.defaults=u,this.npmPath=r,this.npmBin=Hs(this.npmPath,"bin/npm-cli.js"),this.argv=a,this.env=o,this.execPath=c,this.platform=h,this.cwd=l,this.excludeNpmCwd=f,this.globalPrefix=null,this.localPrefix=null,this.localPackage=null,this.home=null;let m=[...Vt];this.data=new Map;let p=null;for(let g of m)this.data.set(g,p=new Js(p));this.data.set=()=>{throw new Error("cannot change internal config data structure")},this.data.delete=()=>{throw new Error("cannot change internal config data structure")},this.sources=new Map([]),this.list=[];for(let{data:g}of this.data.values())this.list.unshift(g);Object.freeze(this.list),this.#t=!1}get loaded(){return this.#t}get prefix(){return this.#s("global")?this.globalPrefix:this.localPrefix}find(t){if(!this.loaded)throw new Error("call config.load() before reading values");let e=[...this.data.entries()];for(let s=e.length-1;s>-1;s--){let[n,{data:r}]=e[s];if(Ue(r,t))return n}return null}get(t,e){if(!this.loaded)throw new Error("call config.load() before reading values");return this.#s(t,e)}#s(t,e=null){if(e!==null&&!Vt.has(e))throw new Error("invalid config location param: "+e);let{data:s}=this.data.get(e||"cli");return e===null||Ue(s,t)?s[t]:void 0}set(t,e,s="cli"){if(!this.loaded)throw new Error("call config.load() before setting values");if(!Vt.has(s))throw new Error("invalid config location param: "+s);this.#c(t);let{data:n,raw:r}=this.data.get(s);n[t]=e,["global","user","project"].includes(s)&&(r[t]=e),this.data.get(s)[vt]=null,this.#i=null}get flat(){if(this.#i)return this.#i;let t=$c.start("config:load:flatten");this.#i={};for(let{data:e}of this.data.values())this.#e(e,this.#i);return this.#i.nodeBin=this.execPath,this.#i.npmBin=this.npmBin,t(),this.#i}delete(t,e="cli"){if(!this.loaded)throw new Error("call config.load() before deleting values");if(!Vt.has(e))throw new Error("invalid config location param: "+e);let{data:s,raw:n}=this.data.get(e);delete s[t],["global","user","project"].includes(e)&&delete n[t]}async load(){if(this.loaded)throw new Error("attempting to load npm config multiple times");this.loadDefaults(),await this.loadBuiltinConfig(),this.loadCLI(),this.loadEnv(),await this.loadProjectConfig(),await this.loadUserConfig(),await this.loadGlobalConfig(),this.#t=!0,this.globalPrefix=this.get("prefix"),this.setEnvs()}loadDefaults(){this.loadGlobalPrefix(),this.loadHome();let t={...this.defaults,prefix:this.globalPrefix};try{t["npm-version"]=A(Hs(this.npmPath,"package.json")).version}catch{}this.#u(t,"default","default values");let{data:e}=this.data.get("default");Object.defineProperty(e,"globalconfig",{get:()=>Yt(this.#s("prefix"),"etc/npmrc"),set(s){Object.defineProperty(e,"globalconfig",{value:s,configurable:!0,writable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}loadHome(){this.home=this.env.HOME||Fc()}loadGlobalPrefix(){if(this.globalPrefix)throw new Error("cannot load default global prefix more than once");this.env.PREFIX?this.globalPrefix=this.env.PREFIX:this.platform==="win32"?this.globalPrefix=qe(this.execPath):(this.globalPrefix=qe(qe(this.execPath)),this.env.DESTDIR&&(this.globalPrefix=Hs(this.env.DESTDIR,this.globalPrefix)))}loadEnv(){let t=Object.create(null);for(let[e,s]of Object.entries(this.env)){if(!/^npm_config_/i.test(e)||s==="")continue;let n=e.slice(11);n.startsWith("//")||(n=n.replace(/(?!^)_/g,"-").toLowerCase()),t[n]=s}this.#u(t,"env","environment")}loadCLI(){for(let e of Object.keys(this.shorthands))e.length>1&&this.argv.includes(`-${e}`)&&z.warn(`-${e} is not a valid single-hyphen cli flag and will be removed in the future`);nt.invalidHandler=(e,s,n)=>this.invalidHandler(e,s,n,"command line options","cli"),nt.unknownHandler=this.unknownHandler,nt.abbrevHandler=this.abbrevHandler;let t=nt(this.types,this.shorthands,this.argv);nt.invalidHandler=null,nt.unknownHandler=null,this.parsedArgv=t.argv,delete t.argv,this.#u(t,"cli","command line options")}get valid(){for(let[t,{valid:e}]of this.data.entries())if(e===!1||e===null&&!this.validate(t))return!1;return!0}validate(t){if(t){let e=this.data.get(t);return e[vt]=!0,nt.invalidHandler=(s,n,r)=>this.invalidHandler(s,n,r,e.source,t),nt.clean(e.data,this.types,Et),nt.invalidHandler=null,e[vt]}else{let e=!0,s=[];for(let n of this.data.keys()){if(n==="default"||n==="builtin"||n==="cli")continue;let r=this.validate(n);if(e=e&&r,["global","user","project"].includes(n)){for(let a of["_authtoken","-authtoken"])this.get(a,n)&&s.push({action:"delete",key:a,where:n});let o=pt(this.get("registry"));for(let a of["_auth","_authToken","username","_password"])this.get(a,n)&&(a==="username"&&!this.get("_password",n)?s.push({action:"delete",key:a,where:n}):a==="_password"&&!this.get("username",n)?s.push({action:"delete",key:a,where:n}):s.push({action:"rename",from:a,to:`${o}:${a}`,where:n}))}}if(s.length){let{ErrInvalidAuth:n}=Zi();throw new n(s)}return e}}repair(t){if(!t)try{this.validate()}catch(e){if(e.code!=="ERR_INVALID_AUTH")throw e;t=e.problems}finally{t||(t=[])}for(let e of t)if(e.action==="delete")this.delete(e.key,e.where);else if(e.action==="rename"){let s=this.data.get(e.where).raw?.[e.from],n=this.get(e.from,e.where);this.set(e.to,s||n,e.where),this.delete(e.from,e.where)}}isDefault(t){let[e,...s]=[...Vt],n=this.data.get(e).data;return Ue(n,t)&&s.every(r=>{let o=this.data.get(r).data;return!Ue(o,t)})}invalidHandler(t,e,s,n,r){let o=en();z.warn("invalid config",t+"="+JSON.stringify(e),`set in ${n}`),this.data.get(r)[vt]=!1,Array.isArray(s)&&(s.includes(Et.url.type)?s=Et.url.type:s.includes(Et.path.type)&&(s=Et.path.type));let a=o(s),h=a.filter(f=>f!==void 0&&f!==Array),c="Must be"+this.#o(h,a),l=h.length===1?h[0]:[...new Set(h.map(f=>typeof f=="string"?f:JSON.stringify(f)))].join(", ");z.warn("invalid config",c,l)}abbrevHandler(t,e){z.warn(`Expanding --${t} to --${e}. This will stop working in the next major version of npm.`)}unknownHandler(t,e){e&&z.warn(`"${e}" is being parsed as a normal command line argument.`)}#o(t,e){let s;return t.length===1&&e.includes(Array)?s=" one or more":t.length>1&&e.includes(Array)?s=" one or more of:":t.length>1?s=" one of:":s="",s}#u(t,e,s,n=null){let r=this.data.get(e);if(r.source){let o=`double-loading "${e}" configs from ${s}, previously loaded from ${r.source}`;throw new Error(o)}if(this.sources.has(s)){let o=`double-loading config "${s}" as "${e}", previously loaded as "${this.sources.get(s)}"`;throw new Error(o)}if(r.source=s,this.sources.set(s,e),n)r.loadError=n,n.code!=="ENOENT"&&z.verbose("config",`error loading ${e} config`,n);else{r.raw=t;for(let[o,a]of Object.entries(t)){let h=Gc(o,this.env),c=this.parseField(a,h);if(e!=="default"&&(this.#c(h),this.definitions[o]?.exclusive)){for(let l of this.definitions[o].exclusive)if(!this.isDefault(l))throw new TypeError(`--${o} can not be provided when using --${l}`)}(e!=="default"||o==="npm-version")&&this.checkUnknown(e,o),r.data[h]=c}}}checkUnknown(t,e){if(!this.definitions[e]){if(Uc.includes(e))return;if(!e.includes(":")){z.warn(`Unknown ${t} config "${t==="cli"?"--":""}${e}". This will stop working in the next major version of npm.`);return}let s=e.split(":").pop();!this.definitions[s]&&!this.nerfDarts.includes(s)&&z.warn(`Unknown ${t} config "${s}" (${e}). This will stop working in the next major version of npm.`)}}#c(t){this.deprecated[t]&&z.warn("config",t,this.deprecated[t])}parseField(t,e,s=!1){return Hc(t,e,this,s)}async#l(t,e){z.silly("config",`load:file:${t}`),await Lc(t,"utf8").then(s=>{let n=Wr.parse(s);return e==="project"&&n.prefix&&z.error("config",`prefix cannot be changed from project config: ${t}.`),this.#u(n,e,t)},s=>this.#u(null,e,t,s))}loadBuiltinConfig(){return this.#l(Yt(this.npmPath,"npmrc"),"builtin")}async loadProjectConfig(){if(await this.loadLocalPrefix(),this.localPackage==null&&(this.localPackage=await Ks(this.localPrefix,"package.json")),this.#s("global")===!0||this.#s("location")==="global"){this.data.get("project").source="(global mode enabled, ignored)",this.sources.set(this.data.get("project").source,"project");return}let t=Yt(this.localPrefix,".npmrc");if(t!==this.#s("userconfig"))return this.#l(t,"project");this.data.get("project").source='(same as "user" config, ignored)',this.sources.set(this.data.get("project").source,"project")}async loadLocalPrefix(){let t=this.#s("prefix","cli");if(t){this.localPrefix=t;return}let e=this.#s("workspaces","cli"),s=this.#s("global")||this.#s("location")==="global";for(let n of Mc(this.cwd)){if(this.excludeNpmCwd&&n===this.npmPath)break;let r=await Ks(n,"package.json");if(!this.localPrefix&&(r||await zc(n,"node_modules"))){if(this.localPrefix=n,this.localPackage=r,e===!1||s)return;continue}if(this.localPrefix&&r){let o=ds(),{content:a}=await o.normalize(n).catch(()=>({content:{}}));if(!a?.workspaces)continue;let c=await Ir()({cwd:n,pkg:a});for(let l of c.values())if(l===this.localPrefix){await Ks(this.localPrefix,".npmrc")&&z.warn("config",`ignoring workspace config at ${this.localPrefix}/.npmrc`);let{data:f}=this.data.get("default");f.workspace=[this.localPrefix],this.localPrefix=n,this.localPackage=r,z.info("config",`found workspace root at ${this.localPrefix}`);return}}}this.localPrefix||(this.localPrefix=this.cwd)}loadUserConfig(){return this.#l(this.#s("userconfig"),"user")}loadGlobalConfig(){return this.#l(this.#s("globalconfig"),"global")}async save(t){if(!this.loaded)throw new Error("call config.load() before saving");if(!qr.has(t))throw new Error("invalid config location param: "+t);let e=this.data.get(t);if(e[Jt]=null,t==="user"){let o=pt(this.get("registry")),a=this.get(`${o}:email`,"user");a&&(this.delete(`${o}:email`,"user"),this.set("email",a,"user"))}let s=Wr.stringify(e.raw).trim()+`
`;if(!s.trim()){await Bc(e.source).catch(()=>{});return}let n=qe(e.source);await qc(n,{recursive:!0}),await Ic(e.source,s,"utf8");let r=t==="user"?384:438;await Wc(e.source,r)}clearCredentialsByURI(t,e="user"){let s=pt(t);if(pt(this.get("registry"))===s){this.delete("-authtoken",e),this.delete("_authToken",e),this.delete("_authtoken",e),this.delete("_auth",e),this.delete("_password",e),this.delete("username",e);let r=this.get(`${s}:email`,e);r&&this.set("email",r,e)}this.delete(`${s}:_authToken`,e),this.delete(`${s}:_auth`,e),this.delete(`${s}:_password`,e),this.delete(`${s}:username`,e),this.delete(`${s}:email`,e),this.delete(`${s}:certfile`,e),this.delete(`${s}:keyfile`,e)}setCredentialsByURI(t,{token:e,username:s,password:n,certfile:r,keyfile:o}){let a=pt(t);if(this.delete(`${a}:always-auth`,"user"),this.delete(`${a}:email`,"user"),r&&o&&(this.set(`${a}:certfile`,r,"user"),this.set(`${a}:keyfile`,o,"user")),e)this.set(`${a}:_authToken`,e,"user"),this.delete(`${a}:_password`,"user"),this.delete(`${a}:username`,"user");else if(s||n){if(!s)throw new Error("must include username");if(!n)throw new Error("must include password");this.delete(`${a}:_authToken`,"user"),this.set(`${a}:username`,s,"user");let h=Buffer.from(n,"utf8").toString("base64");this.set(`${a}:_password`,h,"user")}else if(!r||!o)throw new Error("No credentials to set.")}getCredentialsByURI(t){let e=pt(t),s=pt(this.get("registry")),n={},r=this.get(`${e}:email`)||this.get("email");r&&(e===s&&this.set("email",r,"user"),n.email=r);let o=this.get(`${e}:certfile`),a=this.get(`${e}:keyfile`);o&&a&&(n.certfile=o,n.keyfile=a);let h=this.get(`${e}:_authToken`);if(h)return n.token=h,n;let c=this.get(`${e}:username`),l=this.get(`${e}:_password`);if(c&&l){n.username=c,n.password=Buffer.from(l,"base64").toString("utf8");let d=`${n.username}:${n.password}`;return n.auth=Buffer.from(d,"utf8").toString("base64"),n}let f=this.get(`${e}:_auth`);if(f){let u=Buffer.from(f,"base64").toString("utf8").split(":");return n.username=u.shift(),n.password=u.join(":"),n.auth=f,n}return n}setEnvs(){Kc(this)}},Jt=Symbol("loadError"),vt=Symbol("valid"),Js=class{#t;#e=null;#i=null;constructor(t){this.#t=Object.create(t&&t.data),this.#i={},this[vt]=!0}get data(){return this.#t}get valid(){return this[vt]}set source(t){if(this.#e)throw new Error("cannot set ConfigData source more than once");this.#e=t}get source(){return this.#e}set loadError(t){if(this[Jt]||Object.keys(this.#i).length)throw new Error("cannot set ConfigData loadError after load");this[Jt]=t}get loadError(){return this[Jt]}set raw(t){if(Object.keys(this.#i).length||this[Jt])throw new Error("cannot set ConfigData raw after load");this.#i=t}get raw(){return this.#i}};Ur.exports=Vs});var Jr=v((Tf,Vr)=>{var Vc=["type","description","default","key"],Jc=["default","defaultDescription","deprecated","description","exclusive","flatten","hint","key","short","type","typeDescription","usage","envExport"],{url:{type:Yc},path:{type:Xc}}=mt(),Ys=class{constructor(t,e){this.key=t,this.envExport=!0,Object.assign(this,e),this.validate(),this.defaultDescription||(this.defaultDescription=Kr(this.default)),this.typeDescription||(this.typeDescription=Hr(this.type)),this.hint||(this.type===Number?this.hint="<number>":this.hint=`<${this.key}>`),this.usage||(this.usage=Zc(this))}validate(){for(let t of Vc)if(!Object.prototype.hasOwnProperty.call(this,t))throw new Error(`config lacks ${t}: ${this.key}`);if(!this.key)throw new Error(`config lacks key: ${this.key}`);for(let t of Object.keys(this))if(!Jc.includes(t))throw new Error(`config defines unknown field ${t}: ${this.key}`)}describe(){let t=Xt(this.description),e=this.envExport?"":`
This value is not exported to the environment for child processes.
`,s=this.deprecated?`* DEPRECATED: ${Xt(this.deprecated)}
`:"",n=this.exclusive?`
This config can not be used with: \`${this.exclusive.join("`, `")}\``:"";return Qc(`#### \`${this.key}\`

* Default: ${Xt(this.defaultDescription)}
* Type: ${Xt(this.typeDescription)}
${s}
${t}
${n}
${e}`)}},Zc=i=>{let t="";if(!Array.isArray(i.type))return i.short&&(t=`-${i.short}|`),i.type===Boolean&&i.default!==!1?t=`${t}--no-${i.key}`:t=`${t}--${i.key}`,i.type!==Boolean&&(t=`${t} ${i.hint}`),t;t=`--${i.key}`,i.short&&(t=`-${i.short}|--${i.key}`);let e=i.type,s=e.includes(Array),n=e.includes(Boolean);if(e=e.filter(a=>a!==null&&a!==Array&&a!==Boolean),!e.length)return t;let r;e.some(a=>typeof a!="string")?r=i.hint:r=`<${e.filter(a=>a).join("|")}>`,n&&(t=`--no-${i.key}|${t}`);let o=`${t} ${r}`;return s?`${o} [${o} ...]`:o},Hr=i=>{if(Array.isArray(i)){let t=i.filter(o=>o!==Array).map(o=>Hr(o)),e=t.length>1?[t.pop()]:[],s=t.length>1?", or ":" or ",n=[t.join(", ")].concat(e).join(s),r=i.includes(Array)?" (can be set multiple times)":"";return`${n}${r}`}switch(i){case String:return"String";case Number:return"Number";case Boolean:return"Boolean";case Date:return"Date";case Xc:return"Path";case Yc:return"URL";default:return Kr(i)}},Kr=i=>typeof i=="string"?JSON.stringify(i):String(i),Xt=i=>{let t=i.match(/\n +/);return t?i.split(t[0]).join(`
`).trim():i.trim()},Gr=i=>{let t=Math.min(Math.max(20,process.stdout.columns)||80,80)-5;return Xt(i).split(/[ \n]+/).reduce((e,s)=>{let n=e.split(`
`).pop(),r=n.length&&n.length+s.length>t?`
`:" ";return e+r+s})},Qc=i=>{let t=!1;return i.split(`

`).map(e=>t||e.startsWith("```")?(t=!e.endsWith("```"),e):e.charAt(0)==="*"?"* "+e.slice(1).trim().split(`
* `).map(s=>Gr(s).replace(/\n/g,`
  `)).join(`
* `):Gr(e)).join(`

`)};Vr.exports=Ys});var Zr=v((jf,Xr)=>{var Zt=Jr(),{url:{type:tl},path:{type:Yr}}=mt(),ze=(i,t,e)=>{let s=i.replace(/-([a-z])/g,(n,r)=>r.toUpperCase());e[s]=t[i]},el={_auth:new Zt("_auth",{default:null,type:[null,String],description:"",flatten:ze}),globalconfig:new Zt("globalconfig",{type:Yr,default:"",defaultDescription:"",description:"",flatten:ze}),location:new Zt("location",{default:"user",short:"L",type:["global","user","project"],defaultDescription:"",description:"",flatten:(i,t,e)=>{ze(i,t,e),e.global&&(e.location="global"),t.location==="global"&&(e.global=!0)}}),registry:new Zt("registry",{default:"https://registry.npmjs.org/",type:tl,description:"",flatten:ze}),userconfig:new Zt("userconfig",{default:"~/.npmrc",type:Yr,description:""})};Xr.exports=el});var eo=v((Pf,to)=>{var Xs=Zr(),sl=(i,t={})=>{for(let[e,s]of Object.entries(i)){let n=Xs[e];n&&n.flatten?n.flatten(e,i,t):(/@.*:registry$/i.test(e)||/^\/\//.test(e))&&(t[e]=s)}return t},Qr=Object.entries(Xs).reduce((i,[t,{short:e=[],default:s}])=>{for(let n of[].concat(e))i.shorthands[n]=[`--${t}`];return i.defaults[t]=s,i},{shorthands:{},defaults:{}}),il={"enjoy-by":["--before"],d:["--loglevel","info"],dd:["--loglevel","verbose"],ddd:["--loglevel","silly"],quiet:["--loglevel","warn"],q:["--loglevel","warn"],s:["--loglevel","silent"],silent:["--loglevel","silent"],verbose:["--loglevel","verbose"],desc:["--description"],help:["--usage"],local:["--no-global"],n:["--no-yes"],no:["--no-yes"],porcelain:["--parseable"],readonly:["--read-only"],reg:["--registry"],iwr:["--include-workspace-root"],ws:["--workspaces"],...Qr.shorthands},nl=["_auth","_authToken","_password","certfile","email","keyfile","username"];to.exports={defaults:Qr.defaults,definitions:Xs,flatten:sl,nerfDarts:nl,shorthands:il}});var io=v(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.sync=_t.isexe=void 0;var rl=A("fs"),ol=A("fs/promises"),al=async(i,t={})=>{let{ignoreErrors:e=!1}=t;try{return so(await(0,ol.stat)(i),t)}catch(s){let n=s;if(e||n.code==="EACCES")return!1;throw n}};_t.isexe=al;var hl=(i,t={})=>{let{ignoreErrors:e=!1}=t;try{return so((0,rl.statSync)(i),t)}catch(s){let n=s;if(e||n.code==="EACCES")return!1;throw n}};_t.sync=hl;var so=(i,t)=>i.isFile()&&cl(i,t),cl=(i,t)=>{let e=t.uid??process.getuid?.(),s=t.groups??process.getgroups?.()??[],n=t.gid??process.getgid?.()??s[0];if(e===void 0||n===void 0)throw new Error("cannot get uid or gid");let r=new Set([n,...s]),o=i.mode,a=i.uid,h=i.gid,c=parseInt("100",8),l=parseInt("010",8),f=parseInt("001",8),d=c|l;return!!(o&f||o&l&&r.has(h)||o&c&&a===e||o&d&&e===0)}});var ro=v(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.sync=xt.isexe=void 0;var ll=A("fs"),fl=A("fs/promises"),ul=async(i,t={})=>{let{ignoreErrors:e=!1}=t;try{return no(await(0,fl.stat)(i),i,t)}catch(s){let n=s;if(e||n.code==="EACCES")return!1;throw n}};xt.isexe=ul;var dl=(i,t={})=>{let{ignoreErrors:e=!1}=t;try{return no((0,ll.statSync)(i),i,t)}catch(s){let n=s;if(e||n.code==="EACCES")return!1;throw n}};xt.sync=dl;var pl=(i,t)=>{let{pathExt:e=process.env.PATHEXT||""}=t,s=e.split(";");if(s.indexOf("")!==-1)return!0;for(let n=0;n<s.length;n++){let r=s[n].toLowerCase(),o=i.substring(i.length-r.length).toLowerCase();if(r&&o===r)return!0}return!1},no=(i,t,e)=>i.isFile()&&pl(t,e)});var ao=v(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0})});var po=v(R=>{"use strict";var ho=R&&R.__createBinding||(Object.create?function(i,t,e,s){s===void 0&&(s=e);var n=Object.getOwnPropertyDescriptor(t,e);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,s,n)}:function(i,t,e,s){s===void 0&&(s=e),i[s]=t[e]}),gl=R&&R.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),co=R&&R.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&ho(t,i,e);return gl(t,i),t},ml=R&&R.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&ho(t,i,e)};Object.defineProperty(R,"__esModule",{value:!0});R.sync=R.isexe=R.posix=R.win32=void 0;var lo=co(io());R.posix=lo;var fo=co(ro());R.win32=fo;ml(ao(),R);var wl=process.env._ISEXE_TEST_PLATFORM_||process.platform,uo=wl==="win32"?fo:lo;R.isexe=uo.isexe;R.sync=uo.sync});var xo=v((Mf,_o)=>{var{isexe:yl,sync:bl}=po(),{join:Sl,delimiter:El,sep:go,posix:mo}=A("path"),wo=process.platform==="win32",yo=new RegExp(`[${mo.sep}${go===mo.sep?"":go}]`.replace(/(\\)/g,"\\$1")),vl=new RegExp(`^\\.${yo.source}`),bo=i=>Object.assign(new Error(`not found: ${i}`),{code:"ENOENT"}),So=(i,{path:t=process.env.PATH,pathExt:e=process.env.PATHEXT,delimiter:s=El})=>{let n=i.match(yo)?[""]:[...wo?[process.cwd()]:[],...(t||"").split(s)];if(wo){let r=e||[".EXE",".CMD",".BAT",".COM"].join(s),o=r.split(s).flatMap(a=>[a,a.toLowerCase()]);return i.includes(".")&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:r}}return{pathEnv:n,pathExt:[""]}},Eo=(i,t)=>{let e=/^".*"$/.test(i)?i.slice(1,-1):i;return(!e&&vl.test(t)?t.slice(0,2):"")+Sl(e,t)},vo=async(i,t={})=>{let{pathEnv:e,pathExt:s,pathExtExe:n}=So(i,t),r=[];for(let o of e){let a=Eo(o,i);for(let h of s){let c=a+h;if(await yl(c,{pathExt:n,ignoreErrors:!0})){if(!t.all)return c;r.push(c)}}}if(t.all&&r.length)return r;if(t.nothrow)return null;throw bo(i)},_l=(i,t={})=>{let{pathEnv:e,pathExt:s,pathExtExe:n}=So(i,t),r=[];for(let o of e){let a=Eo(o,i);for(let h of s){let c=a+h;if(bl(c,{pathExt:n,ignoreErrors:!0})){if(!t.all)return c;r.push(c)}}}if(t.all&&r.length)return r;if(t.nothrow)return null;throw bo(i)};_o.exports=vo;vo.sync=_l});var Ao={};Ve(Ao,{pluginName:()=>Oo,throwError:()=>He});function He(i){throw new Ge.ReportError(Ge.MessageName.UNNAMED,`[${Oo}] ${i.message||i}`)}var Ge,Oo,Zs=di(()=>{"use strict";Ge=A("@yarnpkg/core"),Oo="yarn-plugin-npmrc"});var Po={};Ve(Po,{loadNpmrc:()=>xl});async function xl(){let i="";try{i=To.default.realpathSync(jo.default.sync("npm"))}catch{He(`Couldn't find "npm" executable to help read the config`)}let t=new ko.default({npmPath:i,definitions:Ot.definitions,shorthands:Ot.shorthands,flatten:Ot.flatten,argv:[]});try{await t.load(),t.validate()}catch(e){He(e)}return t}var ko,Ot,To,jo,Co=di(()=>{"use strict";ko=ee(zr()),Ot=ee(eo()),To=ee(A("fs")),jo=ee(xo());Zs()});var Pl={};Ve(Pl,{default:()=>jl});var Do=A("@yarnpkg/core"),Ol={npmrcAuthEnabled:{description:"Attempt to read auth info from .npmrc for all registry requests",type:Do.SettingsType.BOOLEAN,default:!1}},Al="npmrcAuthEnabled",Qs,Ke,ti={},kl=async(i,t,{configuration:e})=>{if(!e.get(Al))return i;if(t in ti)return ti[t];if(Ke)throw Ke;if(!Qs){let{loadNpmrc:r}=await Promise.resolve().then(()=>(Co(),Po));try{Qs=await r()}catch(o){throw Ke=o,Ke}}let s=Qs.getCredentialsByURI(t);if(s.certfile||s.keyfile){let{throwError:r}=await Promise.resolve().then(()=>(Zs(),Ao));r(`This plugin does not support certfile or keyfile auth (for registry "${t}")`)}let n;return"token"in s?n=`Bearer ${s.token}`:"auth"in s?n=`Basic ${s.auth}`:n=i,ti[t]=n,n},Tl={hooks:{getNpmAuthenticationHeader:kl},configuration:Ol},jl=Tl;return Io(Pl);})();
return plugin;
}
};
