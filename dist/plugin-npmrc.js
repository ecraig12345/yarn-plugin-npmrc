/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-npmrc",
factory: function (require) {
"use strict";var plugin=(()=>{var Wt=Object.create;var B=Object.defineProperty;var Ut=Object.getOwnPropertyDescriptor;var Vt=Object.getOwnPropertyNames;var Jt=Object.getPrototypeOf,Kt=Object.prototype.hasOwnProperty;var j=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var Q=(e,t)=>()=>(e&&(t=e(e=0)),t);var E=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Z=(e,t)=>{for(var r in t)B(e,r,{get:t[r],enumerable:!0})},Ae=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Vt(t))!Kt.call(e,s)&&s!==r&&B(e,s,{get:()=>t[s],enumerable:!(n=Ut(t,s))||n.enumerable});return e};var ee=(e,t,r)=>(r=e!=null?Wt(Jt(e)):{},Ae(t||!e||!e.__esModule?B(r,"default",{value:e,enumerable:!0}):r,e)),Xt=e=>Ae(B({},"__esModule",{value:!0}),e);var Ne=E((an,_e)=>{var{hasOwnProperty:te}=Object.prototype,re=(e,t={})=>{typeof t=="string"&&(t={section:t}),t.align=t.align===!0,t.newline=t.newline===!0,t.sort=t.sort===!0,t.whitespace=t.whitespace===!0||t.align===!0,t.platform=t.platform||typeof process<"u"&&process.platform,t.bracketedArray=t.bracketedArray!==!1;let r=t.platform==="win32"?`\r
`:`
`,n=t.whitespace?" = ":"=",s=[],i=t.sort?Object.keys(e).sort():Object.keys(e),a=0;t.align&&(a=$(i.filter(o=>e[o]===null||Array.isArray(e[o])||typeof e[o]!="object").map(o=>Array.isArray(e[o])?`${o}[]`:o).concat([""]).reduce((o,l)=>$(o).length>=$(l).length?o:l)).length);let c="",f=t.bracketedArray?"[]":"";for(let o of i){let l=e[o];if(l&&Array.isArray(l))for(let p of l)c+=$(`${o}${f}`).padEnd(a," ")+n+$(p)+r;else l&&typeof l=="object"?s.push(o):c+=$(o).padEnd(a," ")+n+$(l)+r}t.section&&c.length&&(c="["+$(t.section)+"]"+(t.newline?r+r:r)+c);for(let o of s){let l=ve(o,".").join("\\."),p=(t.section?t.section+".":"")+l,d=re(e[o],{...t,section:p});c.length&&d.length&&(c+=r),c+=d}return c};function ve(e,t){var r=0,n=0,s=0,i=[];do if(s=e.indexOf(t,r),s!==-1){if(r=s+t.length,s>0&&e[s-1]==="\\")continue;i.push(e.slice(n,s)),n=s+t.length}while(s!==-1);return i.push(e.slice(n)),i}var Pe=(e,t={})=>{t.bracketedArray=t.bracketedArray!==!1;let r=Object.create(null),n=r,s=null,i=/^\[([^\]]*)\]\s*$|^([^=]+)(=(.*))?$/i,a=e.split(/[\r\n]+/g),c={};for(let o of a){if(!o||o.match(/^\s*[;#]/)||o.match(/^\s*$/))continue;let l=o.match(i);if(!l)continue;if(l[1]!==void 0){if(s=H(l[1]),s==="__proto__"){n=Object.create(null);continue}n=r[s]=r[s]||Object.create(null);continue}let p=H(l[2]),d;t.bracketedArray?d=p.length>2&&p.slice(-2)==="[]":(c[p]=(c?.[p]||0)+1,d=c[p]>1);let u=d&&p.endsWith("[]")?p.slice(0,-2):p;if(u==="__proto__")continue;let w=l[3]?H(l[4]):!0,b=w==="true"||w==="false"||w==="null"?JSON.parse(w):w;d&&(te.call(n,u)?Array.isArray(n[u])||(n[u]=[n[u]]):n[u]=[]),Array.isArray(n[u])?n[u].push(b):n[u]=b}let f=[];for(let o of Object.keys(r)){if(!te.call(r,o)||typeof r[o]!="object"||Array.isArray(r[o]))continue;let l=ve(o,".");n=r;let p=l.pop(),d=p.replace(/\\\./g,".");for(let u of l)u!=="__proto__"&&((!te.call(n,u)||typeof n[u]!="object")&&(n[u]=Object.create(null)),n=n[u]);n===r&&d===p||(n[d]=r[o],f.push(o))}for(let o of f)delete r[o];return r},Se=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"),$=e=>typeof e!="string"||e.match(/[=\r\n]/)||e.match(/^\[/)||e.length>1&&Se(e)||e!==e.trim()?JSON.stringify(e):e.split(";").join("\\;").split("#").join("\\#"),H=e=>{if(e=(e||"").trim(),Se(e)){e.charAt(0)==="'"&&(e=e.slice(1,-1));try{e=JSON.parse(e)}catch{}}else{let t=!1,r="";for(let n=0,s=e.length;n<s;n++){let i=e.charAt(n);if(t)"\\;#".indexOf(i)!==-1?r+=i:r+="\\"+i,t=!1;else{if(";#".indexOf(i)!==-1)break;i==="\\"?t=!0:r+=i}}return t&&(r+="\\"),r.trim()}return e};_e.exports={parse:Pe,decode:Pe,stringify:re,encode:re,safe:$,unsafe:H}});var Te=E((cn,$e)=>{$e.exports=Yt;function Yt(...e){let t=e;e.length===1&&(Array.isArray(e[0])||typeof e[0]=="string")&&(t=[].concat(e[0]));for(let s=0,i=t.length;s<i;s++)t[s]=typeof t[s]=="string"?t[s]:String(t[s]);t=t.sort(zt);let r={},n="";for(let s=0,i=t.length;s<i;s++){let a=t[s],c=t[s+1]||"",f=!0,o=!0;if(a===c)continue;let l=0,p=a.length;for(;l<p;l++){let d=a.charAt(l);if(f=f&&d===c.charAt(l),o=o&&d===n.charAt(l),!f&&!o){l++;break}}if(n=a,l===p){r[a]=a;continue}for(let d=a.slice(0,l);l<=p;l++)r[d]=a,d+=a.charAt(l)}return r}function zt(e,t){return e===t?0:e>t?1:-1}});var ne=E((ln,Ce)=>{Ce.exports=process.env.DEBUG_NOPT||process.env.NOPT_DEBUG?(...e)=>console.error(...e):()=>{}});var ie=E((fn,Le)=>{var qe=j("url"),se=j("path"),ke=j("stream").Stream,Qt=j("os"),Re=ne();function Zt(e,t,r){e[t]=String(r)}function er(e,t,r){if(r===!0)return!1;if(r===null)return!0;r=String(r);let s=process.platform==="win32"?/^~(\/|\\)/:/^~\//,i=Qt.homedir();return i&&r.match(s)?e[t]=se.resolve(i,r.slice(2)):e[t]=se.resolve(r),!0}function tr(e,t,r){if(Re("validate Number %j %j %j",t,r,isNaN(r)),isNaN(r))return!1;e[t]=+r}function rr(e,t,r){let n=Date.parse(r);if(Re("validate Date %j %j %j",t,r,n),isNaN(n))return!1;e[t]=new Date(r)}function nr(e,t,r){typeof r=="string"?isNaN(r)?r==="null"||r==="false"?r=!1:r=!0:r=!!+r:r=!!r,e[t]=r}function sr(e,t,r){if(r=qe.parse(String(r)),!r.host)return!1;e[t]=r.href}function ir(e,t,r){if(!(r instanceof ke))return!1;e[t]=r}Le.exports={String:{type:String,validate:Zt},Boolean:{type:Boolean,validate:nr},url:{type:qe,validate:sr},Number:{type:Number,validate:tr},path:{type:se,validate:er},Stream:{type:ke,validate:ir},Date:{type:Date,validate:rr},Array:{type:Array}}});var We=E((un,Ge)=>{var I=Te(),m=ne(),or=ie(),Me=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Be=(e,{types:t,dynamicTypes:r})=>{let n=Me(t,e),s=t[e];if(!n&&typeof r=="function"){let i=r(e);i!==void 0&&(s=i,n=!0)}return[n,s]},q=(e,t)=>t&&e===t,N=(e,t)=>t&&e.indexOf(t)!==-1,ar=(e,t)=>t&&!N(e,t);function cr(e,{types:t,shorthands:r,typeDefs:n,invalidHandler:s,unknownHandler:i,abbrevHandler:a,typeDefault:c,dynamicTypes:f}={}){m(t,r,e,n);let o={},l={remain:[],cooked:e,original:e.slice(0)};return Ie(e,o,l.remain,{typeDefs:n,types:t,dynamicTypes:f,shorthands:r,unknownHandler:i,abbrevHandler:a}),He(o,{types:t,dynamicTypes:f,typeDefs:n,invalidHandler:s,typeDefault:c}),o.argv=l,Object.defineProperty(o.argv,"toString",{value:function(){return this.original.map(JSON.stringify).join(" ")},enumerable:!1}),o}function He(e,{types:t={},typeDefs:r={},dynamicTypes:n,invalidHandler:s,typeDefault:i}={}){let a=r.String?.type,c=r.Number?.type,f=r.Array?.type,o=r.Boolean?.type,l=r.Date?.type,p=typeof i<"u";p||(i=[!1,!0,null],a&&i.push(a),f&&i.push(f));let d={};Object.keys(e).forEach(u=>{if(u==="argv")return;let w=e[u];m("val=%j",w);let b=Array.isArray(w),[h,S]=Be(u,{types:t,dynamicTypes:n}),x=S;b||(w=[w]),x||(x=i),q(x,f)&&(x=i.concat(f)),Array.isArray(x)||(x=[x]),m("val=%j",w),m("types=",x),w=w.map(g=>{if(typeof g=="string"&&(m("string %j",g),g=g.trim(),g==="null"&&~x.indexOf(null)||g==="true"&&(~x.indexOf(!0)||N(x,o))||g==="false"&&(~x.indexOf(!1)||N(x,o))?(g=JSON.parse(g),m("jsonable %j",g)):N(x,c)&&!isNaN(g)?(m("convert to number",g),g=+g):N(x,l)&&!isNaN(Date.parse(g))&&(m("convert to date",g),g=new Date(g))),!h){if(!p)return g;S=i}g===!1&&~x.indexOf(null)&&!(~x.indexOf(!1)||N(x,o))&&(g=null);let _={};return _[u]=g,m("prevalidated val",_,g,S),oe(_,u,g,S,{typeDefs:r})?(m("validated v",_,g,S),_[u]):(s?s(u,g,S,e):s!==!1&&m("invalid: "+u+"="+g,S),d)}).filter(g=>g!==d),!w.length&&ar(x,f)?(m("VAL HAS NO LENGTH, DELETE IT",w,u,x.indexOf(f)),delete e[u]):b?(m(b,e[u],w),e[u]=w):e[u]=w[0],m("k=%s val=%j",u,w,e[u])})}function oe(e,t,r,n,{typeDefs:s}={}){let i=s?.Array?.type;if(Array.isArray(n)){for(let f=0,o=n.length;f<o;f++)if(!q(n[f],i)&&oe(e,t,r,n[f],{typeDefs:s}))return!0;return delete e[t],!1}if(q(n,i))return!0;if(n!==n)return m("Poison NaN",t,r,n),delete e[t],!1;if(r===n)return m("Explicitly allowed %j",r),e[t]=r,!0;let a=!1,c=Object.keys(s);for(let f=0,o=c.length;f<o;f++){m("test type %j %j %j",t,r,c[f]);let l=s[c[f]];if(l&&(n&&n.name&&l.type&&l.type.name?n.name===l.type.name:n===l.type)){let p={};if(a=l.validate(p,t,r)!==!1,r=p[t],a){e[t]=r;break}}}return m("OK? %j (%j %j %j)",a,t,r,c[c.length-1]),a||delete e[t],a}function Ie(e,t,r,{types:n={},typeDefs:s={},shorthands:i={},dynamicTypes:a,unknownHandler:c,abbrevHandler:f}={}){let o=s.String?.type,l=s.Number?.type,p=s.Array?.type,d=s.Boolean?.type;m("parse",e,t,r);let u=I(Object.keys(n));m("abbrevs=%j",u);let w=I(Object.keys(i));for(let b=0;b<e.length;b++){let h=e[b];if(m("arg",h),h.match(/^-{2,}$/)){r.push.apply(r,e.slice(b+1)),e[b]="--";break}let S=!1;if(h.charAt(0)==="-"&&h.length>1){let x=h.indexOf("=");if(x>-1){S=!0;let M=h.slice(x+1);h=h.slice(0,x),e.splice(b,1,h,M)}let g=Fe(h,w,u,{shorthands:i,abbrevHandler:f});if(m("arg=%j shRes=%j",h,g),g&&(e.splice.apply(e,[b,1].concat(g)),h!==g[0])){b--;continue}h=h.replace(/^-+/,"");let _=null;for(;h.toLowerCase().indexOf("no-")===0;)_=!_,h=h.slice(3);u[h]&&u[h]!==h&&(f?f(h,u[h]):f!==!1&&m(`abbrev: ${h} -> ${u[h]}`),h=u[h]);let[Ft,A]=Be(h,{types:n,dynamicTypes:a}),C=Array.isArray(A);C&&A.length===1&&(C=!1,A=A[0]);let z=q(A,p)||C&&N(A,p);!Ft&&Me(t,h)&&(Array.isArray(t[h])||(t[h]=[t[h]]),z=!0);let P,y=e[b+1],Gt=typeof _=="boolean"||q(A,d)||C&&N(A,d)||typeof A>"u"&&!S||y==="false"&&(A===null||C&&~A.indexOf(null));if(typeof A>"u"){let M=!S&&y&&!y?.startsWith("-")&&!["true","false"].includes(y);c?M?c(h,y):c(h):c!==!1&&(m(`unknown: ${h}`),M&&m(`unknown: ${y} parsed as normal opt`))}if(Gt){P=!_,(y==="true"||y==="false")&&(P=JSON.parse(y),y=null,_&&(P=!P),b++),C&&y&&(~A.indexOf(y)?(P=y,b++):y==="null"&&~A.indexOf(null)?(P=null,b++):!y.match(/^-{2,}[^-]/)&&!isNaN(y)&&N(A,l)?(P=+y,b++):!y.match(/^-[^-]/)&&N(A,o)&&(P=y,b++)),z?(t[h]=t[h]||[]).push(P):t[h]=P;continue}q(A,o)&&(y===void 0?y="":y.match(/^-{1,2}[^-]+/)&&(y="",b--)),y&&y.match(/^-{2,}$/)&&(y=void 0,b--),P=y===void 0?!0:y,z?(t[h]=t[h]||[]).push(P):t[h]=P,b++;continue}r.push(h)}}var De=Symbol("singles"),lr=(e,t)=>{let r=t[De];r||(r=Object.keys(t).filter(s=>s.length===1).reduce((s,i)=>(s[i]=!0,s),{}),t[De]=r,m("shorthand singles",r));let n=e.split("").filter(s=>r[s]);return n.join("")===e?n:null};function Fe(e,...t){let{abbrevHandler:r,types:n={},shorthands:s={}}=t.length?t.pop():{},i=t[0]??I(Object.keys(s)),a=t[1]??I(Object.keys(n));if(e=e.replace(/^-+/,""),a[e]===e)return null;if(s[e])return s[e]&&!Array.isArray(s[e])&&(s[e]=s[e].split(/\s+/)),s[e];let c=lr(e,s);return c?c.map(f=>s[f]).reduce((f,o)=>f.concat(o),[]):a[e]&&!s[e]?null:(i[e]&&(r?r(e,i[e]):r!==!1&&m(`abbrev: ${e} -> ${i[e]}`),e=i[e]),s[e]&&!Array.isArray(s[e])&&(s[e]=s[e].split(/\s+/)),s[e])}Ge.exports={nopt:cr,clean:He,parse:Ie,validate:oe,resolveShort:Fe,typeDefs:or}});var ce=E((v,Ue)=>{var ae=We(),fr=ie();Ue.exports=v=ur;v.clean=hr;v.typeDefs=fr;v.lib=ae;function ur(e,t,r=process.argv,n=2){return ae.nopt(r.slice(n),{types:e||{},shorthands:t||{},typeDefs:v.typeDefs,invalidHandler:v.invalidHandler,unknownHandler:v.unknownHandler,abbrevHandler:v.abbrevHandler})}function hr(e,t,r=v.typeDefs){return ae.clean(e,{types:t||{},typeDefs:r,invalidHandler:v.invalidHandler,unknownHandler:v.unknownHandler,abbrevHandler:v.abbrevHandler})}});var Je=E((hn,Ve)=>{var pr=Symbol("proc-log.meta");Ve.exports={META:pr,output:{LEVELS:["standard","error","buffer","flush"],KEYS:{standard:"standard",error:"error",buffer:"buffer",flush:"flush"},standard:function(...e){return process.emit("output","standard",...e)},error:function(...e){return process.emit("output","error",...e)},buffer:function(...e){return process.emit("output","buffer",...e)},flush:function(...e){return process.emit("output","flush",...e)}},log:{LEVELS:["notice","error","warn","info","verbose","http","silly","timing","pause","resume"],KEYS:{notice:"notice",error:"error",warn:"warn",info:"info",verbose:"verbose",http:"http",silly:"silly",timing:"timing",pause:"pause",resume:"resume"},error:function(...e){return process.emit("log","error",...e)},notice:function(...e){return process.emit("log","notice",...e)},warn:function(...e){return process.emit("log","warn",...e)},info:function(...e){return process.emit("log","info",...e)},verbose:function(...e){return process.emit("log","verbose",...e)},http:function(...e){return process.emit("log","http",...e)},silly:function(...e){return process.emit("log","silly",...e)},timing:function(...e){return process.emit("log","timing",...e)},pause:function(){return process.emit("log","pause")},resume:function(){return process.emit("log","resume")}},time:{LEVELS:["start","end"],KEYS:{start:"start",end:"end"},start:function(e,t){process.emit("time","start",e);function r(){return process.emit("time","end",e)}if(typeof t=="function"){let n=t();return n&&n.finally?n.finally(r):(r(),n)}return r},end:function(e){return process.emit("time","end",e)}},input:{LEVELS:["start","end","read"],KEYS:{start:"start",end:"end",read:"read"},start:function(e){process.emit("input","start");function t(){return process.emit("input","end")}if(typeof e=="function"){let r=e();return r&&r.finally?r.finally(t):(t(),r)}return t},end:function(){return process.emit("input","end")},read:function(...e){let t,r,n=new Promise((s,i)=>{t=s,r=i});return process.emit("input","read",t,r,...e),n}}}});var G=E((pn,le)=>{var F=ce(),dr=F.typeDefs.path.validate,gr=(e,t,r)=>typeof r!="string"?!1:dr(e,t,r);le.exports={...F.typeDefs,path:{...F.typeDefs.path,validate:gr}};F.typeDefs=le.exports});var Ye=E((dn,Xe)=>{var{URL:Ke}=j("url");Xe.exports=e=>{let t=new Ke(e),r=`${t.protocol}//${t.host}${t.pathname}`,n=new Ke(".",r);return`//${n.host}${n.pathname}`}});var fe=E((gn,ze)=>{var yr=/(?<!\\)(\\*)\$\{([^${}?]+)(\?)?\}/g;ze.exports=(e,t)=>e.replace(yr,(r,n,s,i)=>{let a=i==="?"?"":`\${${s}}`,c=t[s]!==void 0?t[s]:a;return n.length%2?r.slice((n.length+1)/2):n.slice(n.length/2)+c})});var et=E((yn,Ze)=>{var W=G(),mr=fe(),{resolve:Qe}=j("path"),ue=(e,t,r,n=!1)=>{if(typeof e!="string"&&!Array.isArray(e))return e;let{platform:s,types:i,home:a,env:c}=r,f=new Set([].concat(i[t])),o=f.has(W.path.type),l=f.has(W.Boolean.type),p=o||f.has(W.String.type),d=f.has(W.Number.type),u=!n&&f.has(Array);if(Array.isArray(e))return u?e.map(w=>ue(w,t,r,!0)):e;if(e=e.trim(),u)return ue(e.split(`

`),t,r);if(l&&!p&&e==="")return!0;if(!p&&!o&&!d)switch(e){case"true":return!0;case"false":return!1;case"null":return null;case"undefined":return}return e=mr(e,c),o&&((s==="win32"?/^~(\/|\\)/:/^~\//).test(e)&&a?e=Qe(a,e.slice(2)):e=Qe(e)),d&&!isNaN(e)&&(e=+e),e};Ze.exports=ue});var rt=E((mn,tt)=>{var T=class{constructor(t,r){this.key=t,this.type=r.type,this.default=r.default}},{url:{type:wr},path:{type:he}}=G(),br={_auth:new T("_auth",{default:null,type:[null,String]}),global:new T("global",{default:!1,type:Boolean}),globalconfig:new T("globalconfig",{type:he,default:""}),location:new T("location",{default:"user",type:["global","user","project"]}),prefix:new T("prefix",{type:he,default:""}),registry:new T("registry",{default:"https://registry.npmjs.org/",type:wr}),userconfig:new T("userconfig",{default:"~/.npmrc",type:he})};tt.exports=br});var it=E((wn,st)=>{var nt=rt(),xr=(e,t={})=>{for(let[r,n]of Object.entries(e)){let s=nt[r];s&&s.flatten?s.flatten(r,e,t):(/@.*:registry$/i.test(r)||/^\/\//.test(r))&&(t[r]=n)}return t};st.exports={definitions:nt,flatten:xr}});var at=E((bn,ot)=>{"use strict";var pe=class extends Error{constructor(t){let r="Invalid auth configuration found: ";r+=t.map(n=>{if(n.action==="delete")return`\`${n.key}\` is not allowed in ${n.where} config`;if(n.action==="rename")return`\`${n.from}\` must be renamed to \`${n.to}\` in ${n.where} config`}).join(", "),r+="\nPlease run `npm config fix` to repair your configuration.`",super(r),this.code="ERR_INVALID_AUTH",this.problems=t}};ot.exports={ErrInvalidAuth:pe}});var ut=E((xn,ft)=>{var Er=Ne(),de=ce(),{log:L}=Je(),{resolve:V,dirname:ge,join:ct}=j("path"),{homedir:jr}=j("os"),{readFile:Or,stat:Ar}=j("fs/promises"),Pr=(...e)=>Ar(V(...e)).then(t=>t.isFile()).catch(()=>!1),ye=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),vr=G(),lt=Ye(),Sr=fe(),_r=et(),{definitions:Nr}=it(),$r=new Set(["global","user","project"]),me=new Set(["default","builtin",...$r,"env"]),Tr="env",we=class{#n=!1;#r="";#e="";constructor({npmPath:t,projectRoot:r,workspaceRoot:n,env:s=process.env,platform:i=process.platform,execPath:a=process.execPath,cwd:c=process.cwd()}){if(!r||!n)throw new Error("must provide projectRoot and workspaceRoot options");this.#r=r,this.#e=n;let f={},o={};for(let[d,u]of Object.entries(Nr))o[d]=u.default,f[d]=u.type;this.types=f,this.defaults=o,this.npmPath=t,this.env=s,this.execPath=a,this.platform=i,this.cwd=c,this.globalPrefix=null,this.localPrefix=null,this.home=null;let l=[...me];this.data=new Map;let p=null;for(let d of l)this.data.set(d,p=new be(p));this.data.set=()=>{throw new Error("cannot change internal config data structure")},this.data.delete=()=>{throw new Error("cannot change internal config data structure")},this.sources=new Map([]),this.list=[];for(let{data:d}of this.data.values())this.list.unshift(d);Object.freeze(this.list),this.#n=!1}get loaded(){return this.#n}get prefix(){return this.#t("global")?this.globalPrefix:this.localPrefix}get(t,r){if(!this.loaded)throw new Error("call config.load() before reading values");return this.#t(t,r)}#t(t,r=null){if(r!==null&&!me.has(r))throw new Error("invalid config location param: "+r);let{data:n}=this.data.get(r||Tr);return r===null||ye(n,t)?n[t]:void 0}async load(){if(this.loaded)throw new Error("attempting to load npm config multiple times");this.loadDefaults(),await this.loadBuiltinConfig(),this.loadEnv(),await this.loadProjectConfig(),await this.loadUserConfig(),await this.loadGlobalConfig(),this.#n=!0,this.globalPrefix=this.get("prefix")}loadDefaults(){this.loadGlobalPrefix(),this.loadHome();let t={...this.defaults,prefix:this.globalPrefix};try{t["npm-version"]=j(ct(this.npmPath,"package.json")).version}catch{}this.#s(t,"default","default values");let{data:r}=this.data.get("default");Object.defineProperty(r,"globalconfig",{get:()=>V(this.#t("prefix"),"etc/npmrc"),set(n){Object.defineProperty(r,"globalconfig",{value:n,configurable:!0,writable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}loadHome(){this.home=this.env.HOME||jr()}loadGlobalPrefix(){if(this.globalPrefix)throw new Error("cannot load default global prefix more than once");this.env.PREFIX?this.globalPrefix=this.env.PREFIX:this.platform==="win32"?this.globalPrefix=ge(this.execPath):(this.globalPrefix=ge(ge(this.execPath)),this.env.DESTDIR&&(this.globalPrefix=ct(this.env.DESTDIR,this.globalPrefix)))}loadEnv(){let t=Object.create(null);for(let[r,n]of Object.entries(this.env)){if(!/^npm_config_/i.test(r)||n==="")continue;let s=r.slice(11);s.startsWith("//")||(s=s.replace(/(?!^)_/g,"-").toLowerCase()),t[s]=n}this.#s(t,"env","environment")}get valid(){for(let[t,{valid:r}]of this.data.entries())if(r===!1||r===null&&!this.validate(t))return!1;return!0}validate(t){if(t){let r=this.data.get(t);return r[D]=!0,de.invalidHandler=(n,s,i)=>this.invalidHandler(n,s,i,r.source,t),de.clean(r.data,this.types,vr),de.invalidHandler=null,r[D]}else{let r=!0,n=[];for(let s of this.data.keys()){if(s==="default"||s==="builtin")continue;let i=this.validate(s);if(r=r&&i,["global","user","project"].includes(s)){for(let c of["_authtoken","-authtoken"])this.get(c,s)&&n.push({action:"delete",key:c,where:s});let a=lt(this.get("registry"));for(let c of["_auth","_authToken","username","_password"])this.get(c,s)&&(c==="username"&&!this.get("_password",s)?n.push({action:"delete",key:c,where:s}):c==="_password"&&!this.get("username",s)?n.push({action:"delete",key:c,where:s}):n.push({action:"rename",from:c,to:`${a}:${c}`,where:s}))}}if(n.length){let{ErrInvalidAuth:s}=at();throw new s(n)}return r}}isDefault(t){let[r,...n]=[...me],s=this.data.get(r).data;return ye(s,t)&&n.every(i=>{let a=this.data.get(i).data;return!ye(a,t)})}invalidHandler(t,r,n,s,i){L.warn("invalid config",t+"="+JSON.stringify(r),`set in ${s}`),this.data.get(i)[D]=!1}#s(t,r,n,s=null){let i=this.data.get(r);if(i.source){let a=`double-loading "${r}" configs from ${n}, previously loaded from ${i.source}`;throw new Error(a)}if(this.sources.has(n)){let a=`double-loading config "${n}" as "${r}", previously loaded as "${this.sources.get(n)}"`;throw new Error(a)}if(i.source=n,this.sources.set(n,r),s)i.loadError=s,s.code!=="ENOENT"&&L.verbose("config",`error loading ${r} config`,s);else{i.raw=t;for(let[a,c]of Object.entries(t)){let f=Sr(a,this.env),o=this.parseField(c,f);i.data[f]=o}}}parseField(t,r,n=!1){return _r(t,r,this,n)}async#i(t,r){L.silly("config",`load:file:${t}`),await Or(t,"utf8").then(n=>{let s=Er.parse(n);return r==="project"&&s.prefix&&L.error("config",`prefix cannot be changed from project config: ${t}.`),this.#s(s,r,t)},n=>this.#s(null,r,t,n))}loadBuiltinConfig(){return this.#i(V(this.npmPath,"npmrc"),"builtin")}async loadProjectConfig(){if(await this.loadLocalPrefix(),this.#t("global")===!0||this.#t("location")==="global"){this.data.get("project").source="(global mode enabled, ignored)",this.sources.set(this.data.get("project").source,"project");return}let t=V(this.localPrefix,".npmrc");if(t!==this.#t("userconfig"))return this.#i(t,"project");this.data.get("project").source='(same as "user" config, ignored)',this.sources.set(this.data.get("project").source,"project")}async loadLocalPrefix(){this.#t("global")||this.#t("location")==="global"?this.localPrefix=this.#e:(this.#r!==this.#e&&await Pr(this.#e,".npmrc")&&L.warn("config",`ignoring workspace config at ${this.#e}/.npmrc`),this.localPrefix=this.#r)}loadUserConfig(){return this.#i(this.#t("userconfig"),"user")}loadGlobalConfig(){return this.#i(this.#t("globalconfig"),"global")}getCredentialsByURI(t){let r=lt(t),n={},s=this.get(`${r}:certfile`),i=this.get(`${r}:keyfile`);s&&i&&(n.certfile=s,n.keyfile=i);let a=this.get(`${r}:_authToken`);if(a)return n.token=a,n;let c=this.get(`${r}:username`),f=this.get(`${r}:_password`);if(c&&f){n.username=c,n.password=Buffer.from(f,"base64").toString("utf8");let l=`${n.username}:${n.password}`;return n.auth=Buffer.from(l,"utf8").toString("base64"),n}let o=this.get(`${r}:_auth`);if(o){let p=Buffer.from(o,"base64").toString("utf8").split(":");return n.username=p.shift(),n.password=p.join(":"),n.auth=o,n}return n}},U=Symbol("loadError"),D=Symbol("valid"),be=class{#n;#r=null;#e={};constructor(t){this.#n=Object.create(t&&t.data),this[D]=!0}get data(){return this.#n}get valid(){return this[D]}set source(t){if(this.#r)throw new Error("cannot set ConfigData source more than once");this.#r=t}get source(){return this.#r}set loadError(t){if(this[U]||Object.keys(this.#e).length)throw new Error("cannot set ConfigData loadError after load");this[U]=t}get loadError(){return this[U]}set raw(t){if(Object.keys(this.#e).length||this[U])throw new Error("cannot set ConfigData raw after load");this.#e=t}get raw(){return this.#e}};ft.exports=we});var pt=E(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.sync=k.isexe=void 0;var Cr=j("fs"),qr=j("fs/promises"),kr=async(e,t={})=>{let{ignoreErrors:r=!1}=t;try{return ht(await(0,qr.stat)(e),t)}catch(n){let s=n;if(r||s.code==="EACCES")return!1;throw s}};k.isexe=kr;var Rr=(e,t={})=>{let{ignoreErrors:r=!1}=t;try{return ht((0,Cr.statSync)(e),t)}catch(n){let s=n;if(r||s.code==="EACCES")return!1;throw s}};k.sync=Rr;var ht=(e,t)=>e.isFile()&&Lr(e,t),Lr=(e,t)=>{let r=t.uid??process.getuid?.(),n=t.groups??process.getgroups?.()??[],s=t.gid??process.getgid?.()??n[0];if(r===void 0||s===void 0)throw new Error("cannot get uid or gid");let i=new Set([s,...n]),a=e.mode,c=e.uid,f=e.gid,o=parseInt("100",8),l=parseInt("010",8),p=parseInt("001",8),d=o|l;return!!(a&p||a&l&&i.has(f)||a&o&&c===r||a&d&&r===0)}});var gt=E(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.sync=R.isexe=void 0;var Dr=j("fs"),Mr=j("fs/promises"),Br=async(e,t={})=>{let{ignoreErrors:r=!1}=t;try{return dt(await(0,Mr.stat)(e),e,t)}catch(n){let s=n;if(r||s.code==="EACCES")return!1;throw s}};R.isexe=Br;var Hr=(e,t={})=>{let{ignoreErrors:r=!1}=t;try{return dt((0,Dr.statSync)(e),e,t)}catch(n){let s=n;if(r||s.code==="EACCES")return!1;throw s}};R.sync=Hr;var Ir=(e,t)=>{let{pathExt:r=process.env.PATHEXT||""}=t,n=r.split(";");if(n.indexOf("")!==-1)return!0;for(let s=0;s<n.length;s++){let i=n[s].toLowerCase(),a=e.substring(e.length-i.length).toLowerCase();if(i&&a===i)return!0}return!1},dt=(e,t,r)=>e.isFile()&&Ir(t,r)});var mt=E(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0})});var Ot=E(O=>{"use strict";var wt=O&&O.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Fr=O&&O.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),bt=O&&O.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&wt(t,e,r);return Fr(t,e),t},Gr=O&&O.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&wt(t,e,r)};Object.defineProperty(O,"__esModule",{value:!0});O.sync=O.isexe=O.posix=O.win32=void 0;var xt=bt(pt());O.posix=xt;var Et=bt(gt());O.win32=Et;Gr(mt(),O);var Wr=process.env._ISEXE_TEST_PLATFORM_||process.platform,jt=Wr==="win32"?Et:xt;O.isexe=jt.isexe;O.sync=jt.sync});var qt=E((vn,Ct)=>{var{isexe:Ur,sync:Vr}=Ot(),{join:Jr,delimiter:Kr,sep:At,posix:Pt}=j("path"),vt=process.platform==="win32",St=new RegExp(`[${Pt.sep}${At===Pt.sep?"":At}]`.replace(/(\\)/g,"\\$1")),Xr=new RegExp(`^\\.${St.source}`),_t=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),Nt=(e,{path:t=process.env.PATH,pathExt:r=process.env.PATHEXT,delimiter:n=Kr})=>{let s=e.match(St)?[""]:[...vt?[process.cwd()]:[],...(t||"").split(n)];if(vt){let i=r||[".EXE",".CMD",".BAT",".COM"].join(n),a=i.split(n).flatMap(c=>[c,c.toLowerCase()]);return e.includes(".")&&a[0]!==""&&a.unshift(""),{pathEnv:s,pathExt:a,pathExtExe:i}}return{pathEnv:s,pathExt:[""]}},$t=(e,t)=>{let r=/^".*"$/.test(e)?e.slice(1,-1):e;return(!r&&Xr.test(t)?t.slice(0,2):"")+Jr(r,t)},Tt=async(e,t={})=>{let{pathEnv:r,pathExt:n,pathExtExe:s}=Nt(e,t),i=[];for(let a of r){let c=$t(a,e);for(let f of n){let o=c+f;if(await Ur(o,{pathExt:s,ignoreErrors:!0})){if(!t.all)return o;i.push(o)}}}if(t.all&&i.length)return i;if(t.nothrow)return null;throw _t(e)},Yr=(e,t={})=>{let{pathEnv:r,pathExt:n,pathExtExe:s}=Nt(e,t),i=[];for(let a of r){let c=$t(a,e);for(let f of n){let o=c+f;if(Vr(o,{pathExt:s,ignoreErrors:!0})){if(!t.all)return o;i.push(o)}}}if(t.all&&i.length)return i;if(t.nothrow)return null;throw _t(e)};Ct.exports=Tt;Tt.sync=Yr});var J,xe=Q(()=>{"use strict";J="yarn-plugin-npmrc"});var kt={};Z(kt,{throwError:()=>X});function X(e){throw new K.ReportError(K.MessageName.UNNAMED,`[${J}] ${e.message||e}`)}var K,Ee=Q(()=>{"use strict";K=j("@yarnpkg/core");xe()});var Mt={};Z(Mt,{loadNpmrc:()=>zr});async function zr(e){let t="";try{t=Lt.default.realpathSync(Dt.default.sync("npm"))}catch{X(`Couldn't find "npm" executable to help read the config`)}let r=["silly","verbose","info","http","timing","notice","warn","error"],n=r.indexOf(process.env.NPM_CONFIG_LOGLEVEL||process.env.npm_config_loglevel||"warn"),s=(i,...a)=>{r.indexOf(i)<n||console[i==="error"?"error":i==="warn"?"warn":"log"](`[${J}][${i}]`,...a)};process.on("log",s);try{let i=new Rt.default({npmPath:t,...e});return await i.load(),i.validate(),i}catch(i){X(i)}finally{process.off("log",s)}}var Rt,Lt,Dt,Bt=Q(()=>{"use strict";Rt=ee(ut()),Lt=ee(j("fs")),Dt=ee(qt());xe();Ee()});var sn={};Z(sn,{default:()=>nn});var Ht=j("@yarnpkg/core"),Qr={npmrcAuthEnabled:{description:"Attempt to read auth info from .npmrc for all registry requests",type:Ht.SettingsType.BOOLEAN,default:!1}},Zr="npmrcAuthEnabled",je,Y,Oe={},It,en=e=>{It=e.getWorkspaceByCwd(e.cwd).cwd},tn=async(e,t,{configuration:r})=>{if(!r.get(Zr)||!r.projectCwd)return e;if(t in Oe)return Oe[t];if(Y)throw Y;if(!je){let{loadNpmrc:i}=await Promise.resolve().then(()=>(Bt(),Mt));try{je=await i({projectRoot:r.projectCwd,workspaceRoot:It||r.projectCwd})}catch(a){throw Y=a,Y}}let n=je.getCredentialsByURI(t);if(n.certfile||n.keyfile){let{throwError:i}=await Promise.resolve().then(()=>(Ee(),kt));i(`This plugin does not support certfile or keyfile auth (for registry "${t}")`)}let s;return"token"in n?s=`Bearer ${n.token}`:"auth"in n?s=`Basic ${n.auth}`:s=e,Oe[t]=s,s},rn={hooks:{validateProject:en,getNpmAuthenticationHeader:tn},configuration:Qr},nn=rn;return Xt(sn);})();
return plugin;
}
};
